<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sean Vieau">
<meta name="dcterms.date" content="2024-11-18">

<title>Animated Plot - Global Lung Cancer Rates – Sean Vieau Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">



</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sean Vieau Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-advanced-data-analyses-(rsas" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Advanced Data Analyses (R/SAS)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-advanced-data-analyses-(rsas">    
        <li>
    <a class="dropdown-item" href="../../Project_1_Regression/Project_1_Regression_R/Project_1_Regression.html">
 <span class="dropdown-text">Regression (R)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Project_1_Regression/Project_1_Regression_SAS/Project_1_Regression_SAS.html">
 <span class="dropdown-text">Regression (SAS)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Project_2/Project_2_R/Code/Project2.html">
 <span class="dropdown-text">MLR With Confounding and Interaction (R)</span></a>
  </li>  
        <li class="dropdown-header">MLR With Confounding and Interaction (SAS)</li>
        <li>
    <a class="dropdown-item" href="../../Project_2/Project_2_R/Code/Project2LMM.html">
 <span class="dropdown-text">Linear Mixed Model (R)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Project_3_Predictive_Modelling/Project_3_R/Code/Project_3_Predictive_Modelling.html">
 <span class="dropdown-text">Predictive Modelling (R)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../Data_Wrangling/Treadmill_Data_Cleaning/Code/Automated_Treadmill_Data_Cleaning.html"> 
<span class="menu-text">Data Wrangling (Python)</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-management-(sas" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Management (SAS)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-management-(sas">    
        <li>
    <a class="dropdown-item" href="../../Data_Management_(SAS)/Project_1/Project_1_Importing.html">
 <span class="dropdown-text">Project 1 - Importing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Data_Management_(SAS)/Project_3/Project3.html">
 <span class="dropdown-text">Project 3 - Data Set Creation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-statistical-consulting-(r" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Statistical Consulting (R)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-statistical-consulting-(r">    
        <li>
    <a class="dropdown-item" href="../../Statistical_Consulting/Vieau_Project_01/Code/Megan_Watson_Project.html">
 <span class="dropdown-text">Scope of Work and Negative Binomial Regression (R)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-viz-(r" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Viz (R)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-viz-(r">    
        <li>
    <a class="dropdown-item" href="../../Data Visualization/Cancer_Animations/Gapminder_Cancer_Animations.html">
 <span class="dropdown-text">Animated Plots (R)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../Resume/Publications_and_Presentations.html"> 
<span class="menu-text">Publications/Presentations</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#research-question" id="toc-research-question" class="nav-link" data-scroll-target="#research-question">Research Question</a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul class="collapse">
  <li><a href="#load-libraries" id="toc-load-libraries" class="nav-link" data-scroll-target="#load-libraries">Load Libraries</a>
  <ul class="collapse">
  <li><a href="#read-in-lung-cancer-data" id="toc-read-in-lung-cancer-data" class="nav-link" data-scroll-target="#read-in-lung-cancer-data">Read in Lung Cancer Data</a></li>
  <li><a href="#read-in-gdp-per-capita-data" id="toc-read-in-gdp-per-capita-data" class="nav-link" data-scroll-target="#read-in-gdp-per-capita-data">Read in GDP Per Capita Data</a></li>
  <li><a href="#read-in-life-expectancy-data" id="toc-read-in-life-expectancy-data" class="nav-link" data-scroll-target="#read-in-life-expectancy-data">Read in Life Expectancy Data</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#integrate-data-sets" id="toc-integrate-data-sets" class="nav-link" data-scroll-target="#integrate-data-sets">Integrate Data Sets</a>
  <ul class="collapse">
  <li><a href="#transpose" id="toc-transpose" class="nav-link" data-scroll-target="#transpose">Transpose</a></li>
  <li><a href="#merge" id="toc-merge" class="nav-link" data-scroll-target="#merge">Merge</a></li>
  </ul></li>
  <li><a href="#animations" id="toc-animations" class="nav-link" data-scroll-target="#animations">Animations</a>
  <ul class="collapse">
  <li><a href="#all-countries-over-time" id="toc-all-countries-over-time" class="nav-link" data-scroll-target="#all-countries-over-time">All Countries Over Time</a></li>
  <li><a href="#by-continent" id="toc-by-continent" class="nav-link" data-scroll-target="#by-continent">By Continent</a></li>
  </ul></li>
  <li><a href="#observations" id="toc-observations" class="nav-link" data-scroll-target="#observations">Observations</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Animated Plot - Global Lung Cancer Rates</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sean Vieau </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 18, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In this mini-project we perform data tidying, joining, and ggplot animation to answer a public health research question using data sets from the gapminder data base.</p>
<p><img src="images/clipboard-1836962271.png" class="img-fluid"></p>
<section id="research-question" class="level2">
<h2 class="anchored" data-anchor-id="research-question">Research Question</h2>
<p>I am interested in trends in lung cancer in men over time (because the data sets from Gapminder are split by sex).</p>
<ul>
<li><u>Hypothesis:</u> I predict that over time, as life expectancy increases, lung cancer rates will increase.
<ul>
<li>Additionally, as GDP increases, cancer rates should decrease.</li>
</ul></li>
</ul>
<p>This research question is inspired by a TED talk which discussed how society has progressed in medicine so much that we have “killed all other killers”, allowing cancer to become more common, as longer life expectancies increase the chances of cancerous mutations occurring.</p>
</section>
</section>
<section id="data-preparation" class="level1">
<h1>Data Preparation</h1>
<section id="load-libraries" class="level2">
<h2 class="anchored" data-anchor-id="load-libraries">Load Libraries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdark) <span class="co"># Used for fun dark themes for plots</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gganimate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All data sets are from <a href="https://www.gapminder.org/data/">Gapminder.org</a></p>
<section id="read-in-lung-cancer-data" class="level3">
<h3 class="anchored" data-anchor-id="read-in-lung-cancer-data">Read in Lung Cancer Data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data set</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data_cancer <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(r<span class="st">"(C:\Users\sviea\Downloads\lung_cancer_new_cases_per_100000_men.csv)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 207 Columns: 68
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (1): country
dbl (67): 1953, 1954, 1955, 1956, 1957, 1958, 1959, 1960, 1961, 1962, 1963, ...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_cancer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1953</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1954</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1955</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1956</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1957</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1958</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1959</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1960</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1961</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1962</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1963</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1964</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1965</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1966</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1967</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1968</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1969</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1970</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1971</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1972</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1973</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1974</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1975</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1976</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1977</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1978</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1979</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1980</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1981</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1982</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1983</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1984</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1985</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1986</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1987</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1988</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1989</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1990</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1991</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1992</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1993</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1994</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1995</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1996</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1997</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1998</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2000</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2001</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2002</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2003</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2004</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2005</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2006</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2007</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2008</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2009</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2010</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2011</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2012</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2013</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2014</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2015</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2016</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2017</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2018</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">21.5</td>
<td style="text-align: right;">21.1</td>
<td style="text-align: right;">20.8</td>
<td style="text-align: right;">20.5</td>
<td style="text-align: right;">20.4</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.7</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">20.1</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.7</td>
<td style="text-align: right;">19.6</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">19.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Angola</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.9</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.6</td>
<td style="text-align: right;">24.2</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">24.3</td>
<td style="text-align: right;">24.4</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">22.9</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">22.7</td>
<td style="text-align: right;">22.7</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">23.4</td>
<td style="text-align: right;">23.6</td>
<td style="text-align: right;">23.8</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">23.6</td>
<td style="text-align: right;">23.6</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">23.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Albania</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">52.5</td>
<td style="text-align: right;">52.0</td>
<td style="text-align: right;">49.0</td>
<td style="text-align: right;">46.6</td>
<td style="text-align: right;">43.8</td>
<td style="text-align: right;">45.1</td>
<td style="text-align: right;">46.8</td>
<td style="text-align: right;">47.3</td>
<td style="text-align: right;">47.1</td>
<td style="text-align: right;">46.4</td>
<td style="text-align: right;">46.1</td>
<td style="text-align: right;">43.8</td>
<td style="text-align: right;">44.1</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">44.8</td>
<td style="text-align: right;">42.8</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">40.6</td>
<td style="text-align: right;">41.1</td>
<td style="text-align: right;">41.8</td>
<td style="text-align: right;">43.1</td>
<td style="text-align: right;">44.4</td>
<td style="text-align: right;">44.7</td>
<td style="text-align: right;">44.9</td>
<td style="text-align: right;">45.1</td>
<td style="text-align: right;">45.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Andorra</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">75.2</td>
<td style="text-align: right;">75.4</td>
<td style="text-align: right;">75.7</td>
<td style="text-align: right;">74.7</td>
<td style="text-align: right;">73.8</td>
<td style="text-align: right;">73.0</td>
<td style="text-align: right;">72.2</td>
<td style="text-align: right;">71.7</td>
<td style="text-align: right;">71.3</td>
<td style="text-align: right;">70.9</td>
<td style="text-align: right;">70.4</td>
<td style="text-align: right;">70.0</td>
<td style="text-align: right;">69.7</td>
<td style="text-align: right;">69.6</td>
<td style="text-align: right;">69.8</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">68.8</td>
<td style="text-align: right;">68.3</td>
<td style="text-align: right;">67.8</td>
<td style="text-align: right;">67.3</td>
<td style="text-align: right;">66.5</td>
<td style="text-align: right;">66.2</td>
<td style="text-align: right;">65.6</td>
<td style="text-align: right;">65.3</td>
<td style="text-align: right;">64.8</td>
<td style="text-align: right;">63.4</td>
<td style="text-align: right;">63.1</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">62.5</td>
<td style="text-align: right;">62.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UAE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">25.9</td>
<td style="text-align: right;">26.1</td>
<td style="text-align: right;">26.4</td>
<td style="text-align: right;">26.7</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">27.9</td>
<td style="text-align: right;">28.4</td>
<td style="text-align: right;">28.9</td>
<td style="text-align: right;">28.9</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">30.2</td>
<td style="text-align: right;">30.4</td>
<td style="text-align: right;">30.5</td>
<td style="text-align: right;">30.1</td>
<td style="text-align: right;">29.9</td>
<td style="text-align: right;">29.5</td>
<td style="text-align: right;">28.2</td>
<td style="text-align: right;">27.7</td>
<td style="text-align: right;">26.6</td>
<td style="text-align: right;">25.9</td>
<td style="text-align: right;">25.3</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.2</td>
<td style="text-align: right;">23.8</td>
<td style="text-align: right;">23.3</td>
<td style="text-align: right;">22.9</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">22.2</td>
<td style="text-align: right;">21.8</td>
<td style="text-align: right;">21.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">56.8</td>
<td style="text-align: right;">56.2</td>
<td style="text-align: right;">57.5</td>
<td style="text-align: right;">56.0</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">54.6</td>
<td style="text-align: right;">55.4</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">54.9</td>
<td style="text-align: right;">54.9</td>
<td style="text-align: right;">51.8</td>
<td style="text-align: right;">51.2</td>
<td style="text-align: right;">51.8</td>
<td style="text-align: right;">50.9</td>
<td style="text-align: right;">48.5</td>
<td style="text-align: right;">47.4</td>
<td style="text-align: right;">46.8</td>
<td style="text-align: right;">47.8</td>
<td style="text-align: right;">45.8</td>
<td style="text-align: right;">44.5</td>
<td style="text-align: right;">43.4</td>
<td style="text-align: right;">43.0</td>
<td style="text-align: right;">42.3</td>
<td style="text-align: right;">41.3</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">39.1</td>
<td style="text-align: right;">40.2</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">39.8</td>
<td style="text-align: right;">39.8</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>We have <code>NA</code> values for 1953-1989. Let’s just get rid of those now.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove unnecessary columns with missing values</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>data_cancer <span class="ot">&lt;-</span> data_cancer <span class="sc">|&gt;</span> </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">"1953"</span><span class="sc">:</span><span class="st">"1989"</span>))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check for correct removal</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_cancer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1990</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1991</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1992</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1993</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1994</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1995</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1996</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1997</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1998</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2000</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2001</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2002</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2003</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2004</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2005</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2006</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2007</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2008</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2009</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2010</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2011</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2012</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2013</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2014</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2015</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2016</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2017</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2018</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">21.5</td>
<td style="text-align: right;">21.1</td>
<td style="text-align: right;">20.8</td>
<td style="text-align: right;">20.5</td>
<td style="text-align: right;">20.4</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.7</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">20.1</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.9</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.8</td>
<td style="text-align: right;">19.7</td>
<td style="text-align: right;">19.6</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">19.5</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">19.4</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">19.3</td>
<td style="text-align: right;">19.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Angola</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.9</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.6</td>
<td style="text-align: right;">24.2</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">24.3</td>
<td style="text-align: right;">24.4</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">22.9</td>
<td style="text-align: right;">22.6</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">22.7</td>
<td style="text-align: right;">22.7</td>
<td style="text-align: right;">23.0</td>
<td style="text-align: right;">23.4</td>
<td style="text-align: right;">23.6</td>
<td style="text-align: right;">23.8</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">24.1</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">23.6</td>
<td style="text-align: right;">23.6</td>
<td style="text-align: right;">23.7</td>
<td style="text-align: right;">23.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Albania</td>
<td style="text-align: right;">52.5</td>
<td style="text-align: right;">52.0</td>
<td style="text-align: right;">49.0</td>
<td style="text-align: right;">46.6</td>
<td style="text-align: right;">43.8</td>
<td style="text-align: right;">45.1</td>
<td style="text-align: right;">46.8</td>
<td style="text-align: right;">47.3</td>
<td style="text-align: right;">47.1</td>
<td style="text-align: right;">46.4</td>
<td style="text-align: right;">46.1</td>
<td style="text-align: right;">43.8</td>
<td style="text-align: right;">44.1</td>
<td style="text-align: right;">45.2</td>
<td style="text-align: right;">44.8</td>
<td style="text-align: right;">42.8</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">38.7</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">39.3</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">40.6</td>
<td style="text-align: right;">41.1</td>
<td style="text-align: right;">41.8</td>
<td style="text-align: right;">43.1</td>
<td style="text-align: right;">44.4</td>
<td style="text-align: right;">44.7</td>
<td style="text-align: right;">44.9</td>
<td style="text-align: right;">45.1</td>
<td style="text-align: right;">45.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Andorra</td>
<td style="text-align: right;">75.2</td>
<td style="text-align: right;">75.4</td>
<td style="text-align: right;">75.7</td>
<td style="text-align: right;">74.7</td>
<td style="text-align: right;">73.8</td>
<td style="text-align: right;">73.0</td>
<td style="text-align: right;">72.2</td>
<td style="text-align: right;">71.7</td>
<td style="text-align: right;">71.3</td>
<td style="text-align: right;">70.9</td>
<td style="text-align: right;">70.4</td>
<td style="text-align: right;">70.0</td>
<td style="text-align: right;">69.7</td>
<td style="text-align: right;">69.6</td>
<td style="text-align: right;">69.8</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">68.8</td>
<td style="text-align: right;">68.3</td>
<td style="text-align: right;">67.8</td>
<td style="text-align: right;">67.3</td>
<td style="text-align: right;">66.5</td>
<td style="text-align: right;">66.2</td>
<td style="text-align: right;">65.6</td>
<td style="text-align: right;">65.3</td>
<td style="text-align: right;">64.8</td>
<td style="text-align: right;">63.4</td>
<td style="text-align: right;">63.1</td>
<td style="text-align: right;">62.8</td>
<td style="text-align: right;">62.5</td>
<td style="text-align: right;">62.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UAE</td>
<td style="text-align: right;">25.9</td>
<td style="text-align: right;">26.1</td>
<td style="text-align: right;">26.4</td>
<td style="text-align: right;">26.7</td>
<td style="text-align: right;">27.5</td>
<td style="text-align: right;">27.9</td>
<td style="text-align: right;">28.4</td>
<td style="text-align: right;">28.9</td>
<td style="text-align: right;">28.9</td>
<td style="text-align: right;">29.0</td>
<td style="text-align: right;">30.2</td>
<td style="text-align: right;">30.4</td>
<td style="text-align: right;">30.5</td>
<td style="text-align: right;">30.1</td>
<td style="text-align: right;">29.9</td>
<td style="text-align: right;">29.5</td>
<td style="text-align: right;">28.2</td>
<td style="text-align: right;">27.7</td>
<td style="text-align: right;">26.6</td>
<td style="text-align: right;">25.9</td>
<td style="text-align: right;">25.3</td>
<td style="text-align: right;">24.8</td>
<td style="text-align: right;">24.2</td>
<td style="text-align: right;">23.8</td>
<td style="text-align: right;">23.3</td>
<td style="text-align: right;">22.9</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">22.2</td>
<td style="text-align: right;">21.8</td>
<td style="text-align: right;">21.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">56.8</td>
<td style="text-align: right;">56.2</td>
<td style="text-align: right;">57.5</td>
<td style="text-align: right;">56.0</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">54.6</td>
<td style="text-align: right;">55.4</td>
<td style="text-align: right;">55.2</td>
<td style="text-align: right;">54.9</td>
<td style="text-align: right;">54.9</td>
<td style="text-align: right;">51.8</td>
<td style="text-align: right;">51.2</td>
<td style="text-align: right;">51.8</td>
<td style="text-align: right;">50.9</td>
<td style="text-align: right;">48.5</td>
<td style="text-align: right;">47.4</td>
<td style="text-align: right;">46.8</td>
<td style="text-align: right;">47.8</td>
<td style="text-align: right;">45.8</td>
<td style="text-align: right;">44.5</td>
<td style="text-align: right;">43.4</td>
<td style="text-align: right;">43.0</td>
<td style="text-align: right;">42.3</td>
<td style="text-align: right;">41.3</td>
<td style="text-align: right;">39.5</td>
<td style="text-align: right;">39.1</td>
<td style="text-align: right;">40.2</td>
<td style="text-align: right;">40.3</td>
<td style="text-align: right;">39.8</td>
<td style="text-align: right;">39.8</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="read-in-gdp-per-capita-data" class="level3">
<h3 class="anchored" data-anchor-id="read-in-gdp-per-capita-data">Read in GDP Per Capita Data</h3>
<p>The <code>gapminder</code> data set that comes with the <code>tidyverse</code> package only goes up to 2007. To get a more complete data set we will read in the GDP per capita data set downloaded from the gapminder website.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data set</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>data_gdp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(r<span class="st">"(C:\Users\sviea\Documents\R for Data Science\gdp_pcap.csv)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 195 Columns: 302
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (199): country, 1901, 1903, 1905, 1906, 1907, 1908, 1909, 1910, 1911, 19...
dbl (103): 1800, 1801, 1802, 1803, 1804, 1805, 1806, 1807, 1808, 1809, 1810,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data set</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>data_gdp <span class="ot">&lt;-</span> data_gdp <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"1990"</span><span class="sc">:</span><span class="st">"2019"</span>))</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine data</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_gdp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1990</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1991</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1992</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1993</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1994</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1995</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1996</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1997</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1998</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2000</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2001</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2002</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2003</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2004</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2005</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2006</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2007</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2008</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2009</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2010</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2011</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2012</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2013</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2014</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2015</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2016</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2017</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2018</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: left;">1850</td>
<td style="text-align: left;">1710</td>
<td style="text-align: left;">1650</td>
<td style="text-align: left;">1140</td>
<td style="text-align: left;">855</td>
<td style="text-align: left;">1280</td>
<td style="text-align: left;">1220</td>
<td style="text-align: left;">1180</td>
<td style="text-align: left;">1130</td>
<td style="text-align: left;">1090</td>
<td style="text-align: left;">1070</td>
<td style="text-align: left;">979</td>
<td style="text-align: left;">1230</td>
<td style="text-align: left;">1260</td>
<td style="text-align: left;">1240</td>
<td style="text-align: left;">1330</td>
<td style="text-align: left;">1360</td>
<td style="text-align: left;">1530</td>
<td style="text-align: left;">1560</td>
<td style="text-align: left;">1820</td>
<td style="text-align: left;">2030</td>
<td style="text-align: left;">1960</td>
<td style="text-align: left;">2120</td>
<td style="text-align: left;">2170</td>
<td style="text-align: left;">2150</td>
<td style="text-align: left;">2110</td>
<td style="text-align: left;">2100</td>
<td style="text-align: left;">2100</td>
<td style="text-align: left;">2060</td>
<td style="text-align: left;">2080</td>
</tr>
<tr class="even">
<td style="text-align: left;">Angola</td>
<td style="text-align: left;">4000</td>
<td style="text-align: left;">4050</td>
<td style="text-align: left;">3810</td>
<td style="text-align: left;">2890</td>
<td style="text-align: left;">2920</td>
<td style="text-align: left;">3340</td>
<td style="text-align: left;">3770</td>
<td style="text-align: left;">4000</td>
<td style="text-align: left;">4150</td>
<td style="text-align: left;">4190</td>
<td style="text-align: left;">4270</td>
<td style="text-align: left;">4380</td>
<td style="text-align: left;">4900</td>
<td style="text-align: left;">4950</td>
<td style="text-align: left;">5370</td>
<td style="text-align: left;">6040</td>
<td style="text-align: left;">6590</td>
<td style="text-align: left;">7310</td>
<td style="text-align: left;">7860</td>
<td style="text-align: left;">7650</td>
<td style="text-align: left;">7690</td>
<td style="text-align: left;">7660</td>
<td style="text-align: left;">8010</td>
<td style="text-align: left;">8100</td>
<td style="text-align: left;">8180</td>
<td style="text-align: left;">7970</td>
<td style="text-align: left;">7490</td>
<td style="text-align: left;">7220</td>
<td style="text-align: left;">6880</td>
<td style="text-align: left;">6600</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Albania</td>
<td style="text-align: left;">4750</td>
<td style="text-align: left;">3460</td>
<td style="text-align: left;">3260</td>
<td style="text-align: left;">3600</td>
<td style="text-align: left;">3910</td>
<td style="text-align: left;">4410</td>
<td style="text-align: left;">4830</td>
<td style="text-align: left;">4330</td>
<td style="text-align: left;">4750</td>
<td style="text-align: left;">5410</td>
<td style="text-align: left;">5840</td>
<td style="text-align: left;">6390</td>
<td style="text-align: left;">6710</td>
<td style="text-align: left;">7130</td>
<td style="text-align: left;">7560</td>
<td style="text-align: left;">8030</td>
<td style="text-align: left;">8560</td>
<td style="text-align: left;">9140</td>
<td style="text-align: left;">9910</td>
<td style="text-align: left;">10.3k</td>
<td style="text-align: left;">10.7k</td>
<td style="text-align: left;">11.1k</td>
<td style="text-align: left;">11.2k</td>
<td style="text-align: left;">11.4k</td>
<td style="text-align: left;">11.6k</td>
<td style="text-align: left;">11.9k</td>
<td style="text-align: left;">12.3k</td>
<td style="text-align: left;">12.8k</td>
<td style="text-align: left;">13.3k</td>
<td style="text-align: left;">13.7k</td>
</tr>
<tr class="even">
<td style="text-align: left;">Andorra</td>
<td style="text-align: left;">40.4k</td>
<td style="text-align: left;">40k</td>
<td style="text-align: left;">39k</td>
<td style="text-align: left;">37.5k</td>
<td style="text-align: left;">37.5k</td>
<td style="text-align: left;">38k</td>
<td style="text-align: left;">39.7k</td>
<td style="text-align: left;">43.6k</td>
<td style="text-align: left;">45.4k</td>
<td style="text-align: left;">47.2k</td>
<td style="text-align: left;">47k</td>
<td style="text-align: left;">47.4k</td>
<td style="text-align: left;">47.7k</td>
<td style="text-align: left;">51.9k</td>
<td style="text-align: left;">54.9k</td>
<td style="text-align: left;">60.4k</td>
<td style="text-align: left;">65.2k</td>
<td style="text-align: left;">66.5k</td>
<td style="text-align: left;">63.7k</td>
<td style="text-align: left;">64.5k</td>
<td style="text-align: left;">60.5k</td>
<td style="text-align: left;">60.9k</td>
<td style="text-align: left;">57.9k</td>
<td style="text-align: left;">55.7k</td>
<td style="text-align: left;">56.6k</td>
<td style="text-align: left;">56.5k</td>
<td style="text-align: left;">57.5k</td>
<td style="text-align: left;">56.4k</td>
<td style="text-align: left;">56.2k</td>
<td style="text-align: left;">56.3k</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UAE</td>
<td style="text-align: left;">72.1k</td>
<td style="text-align: left;">72k</td>
<td style="text-align: left;">73.2k</td>
<td style="text-align: left;">73.4k</td>
<td style="text-align: left;">77.6k</td>
<td style="text-align: left;">81.9k</td>
<td style="text-align: left;">84.6k</td>
<td style="text-align: left;">88.6k</td>
<td style="text-align: left;">86k</td>
<td style="text-align: left;">85.7k</td>
<td style="text-align: left;">92k</td>
<td style="text-align: left;">90.1k</td>
<td style="text-align: left;">89.2k</td>
<td style="text-align: left;">93.6k</td>
<td style="text-align: left;">98.8k</td>
<td style="text-align: left;">97.3k</td>
<td style="text-align: left;">94.1k</td>
<td style="text-align: left;">81.7k</td>
<td style="text-align: left;">71.1k</td>
<td style="text-align: left;">59k</td>
<td style="text-align: left;">56.4k</td>
<td style="text-align: left;">59.2k</td>
<td style="text-align: left;">59.7k</td>
<td style="text-align: left;">62.1k</td>
<td style="text-align: left;">64.1k</td>
<td style="text-align: left;">67.8k</td>
<td style="text-align: left;">70.9k</td>
<td style="text-align: left;">70.9k</td>
<td style="text-align: left;">71.2k</td>
<td style="text-align: left;">71.5k</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: left;">13.4k</td>
<td style="text-align: left;">14.5k</td>
<td style="text-align: left;">15.6k</td>
<td style="text-align: left;">16.6k</td>
<td style="text-align: left;">17.4k</td>
<td style="text-align: left;">16.7k</td>
<td style="text-align: left;">17.5k</td>
<td style="text-align: left;">18.7k</td>
<td style="text-align: left;">19.3k</td>
<td style="text-align: left;">18.5k</td>
<td style="text-align: left;">18.2k</td>
<td style="text-align: left;">17.2k</td>
<td style="text-align: left;">15.2k</td>
<td style="text-align: left;">16.4k</td>
<td style="text-align: left;">17.7k</td>
<td style="text-align: left;">19.1k</td>
<td style="text-align: left;">20.5k</td>
<td style="text-align: left;">22.2k</td>
<td style="text-align: left;">22.9k</td>
<td style="text-align: left;">21.3k</td>
<td style="text-align: left;">23.4k</td>
<td style="text-align: left;">24.6k</td>
<td style="text-align: left;">24k</td>
<td style="text-align: left;">24.3k</td>
<td style="text-align: left;">23.5k</td>
<td style="text-align: left;">23.9k</td>
<td style="text-align: left;">23.1k</td>
<td style="text-align: left;">23.5k</td>
<td style="text-align: left;">22.7k</td>
<td style="text-align: left;">22k</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Note: We have mixed data representation here! Some variables have a “k” to represent 10,000. We will have to process this.</p>
</section>
<section id="read-in-life-expectancy-data" class="level3">
<h3 class="anchored" data-anchor-id="read-in-life-expectancy-data">Read in Life Expectancy Data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in data set</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>data_lex <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(r<span class="st">"(C:\Users\sviea\Documents\R for Data Science\lex.csv)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 196 Columns: 302
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr   (1): country
dbl (301): 1800, 1801, 1802, 1803, 1804, 1805, 1806, 1807, 1808, 1809, 1810,...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data set</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>data_lex <span class="ot">&lt;-</span> data_lex <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"1990"</span><span class="sc">:</span><span class="st">"2019"</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine data</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_lex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1990</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1991</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1992</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1993</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1994</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1995</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1996</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1997</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1998</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1999</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2000</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2001</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2002</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2003</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2004</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2005</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2006</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2007</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2008</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2009</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2010</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2011</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2012</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2013</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2014</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2015</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2016</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2017</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2018</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2019</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">53.8</td>
<td style="text-align: right;">53.8</td>
<td style="text-align: right;">54.2</td>
<td style="text-align: right;">54.4</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: right;">54.3</td>
<td style="text-align: right;">54.7</td>
<td style="text-align: right;">54.5</td>
<td style="text-align: right;">53.3</td>
<td style="text-align: right;">54.7</td>
<td style="text-align: right;">54.7</td>
<td style="text-align: right;">54.8</td>
<td style="text-align: right;">55.5</td>
<td style="text-align: right;">56.5</td>
<td style="text-align: right;">57.1</td>
<td style="text-align: right;">57.6</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">58.5</td>
<td style="text-align: right;">59.2</td>
<td style="text-align: right;">59.9</td>
<td style="text-align: right;">60.5</td>
<td style="text-align: right;">61.0</td>
<td style="text-align: right;">61.4</td>
<td style="text-align: right;">61.9</td>
<td style="text-align: right;">61.9</td>
<td style="text-align: right;">61.9</td>
<td style="text-align: right;">62.0</td>
<td style="text-align: right;">62.9</td>
<td style="text-align: right;">62.7</td>
<td style="text-align: right;">63.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Angola</td>
<td style="text-align: right;">49.7</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">49.0</td>
<td style="text-align: right;">50.3</td>
<td style="text-align: right;">51.2</td>
<td style="text-align: right;">51.7</td>
<td style="text-align: right;">51.6</td>
<td style="text-align: right;">50.6</td>
<td style="text-align: right;">51.9</td>
<td style="text-align: right;">52.8</td>
<td style="text-align: right;">53.4</td>
<td style="text-align: right;">54.5</td>
<td style="text-align: right;">55.1</td>
<td style="text-align: right;">55.5</td>
<td style="text-align: right;">56.4</td>
<td style="text-align: right;">57.0</td>
<td style="text-align: right;">58.0</td>
<td style="text-align: right;">58.8</td>
<td style="text-align: right;">59.5</td>
<td style="text-align: right;">60.2</td>
<td style="text-align: right;">60.8</td>
<td style="text-align: right;">61.4</td>
<td style="text-align: right;">62.1</td>
<td style="text-align: right;">63.0</td>
<td style="text-align: right;">63.5</td>
<td style="text-align: right;">63.9</td>
<td style="text-align: right;">64.2</td>
<td style="text-align: right;">64.6</td>
<td style="text-align: right;">65.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Albania</td>
<td style="text-align: right;">72.8</td>
<td style="text-align: right;">72.6</td>
<td style="text-align: right;">73.2</td>
<td style="text-align: right;">73.8</td>
<td style="text-align: right;">74.6</td>
<td style="text-align: right;">74.6</td>
<td style="text-align: right;">74.5</td>
<td style="text-align: right;">72.9</td>
<td style="text-align: right;">74.8</td>
<td style="text-align: right;">75.1</td>
<td style="text-align: right;">75.4</td>
<td style="text-align: right;">76.0</td>
<td style="text-align: right;">75.9</td>
<td style="text-align: right;">75.6</td>
<td style="text-align: right;">75.8</td>
<td style="text-align: right;">76.2</td>
<td style="text-align: right;">76.9</td>
<td style="text-align: right;">77.5</td>
<td style="text-align: right;">77.6</td>
<td style="text-align: right;">78.0</td>
<td style="text-align: right;">78.1</td>
<td style="text-align: right;">78.1</td>
<td style="text-align: right;">78.2</td>
<td style="text-align: right;">78.3</td>
<td style="text-align: right;">78.2</td>
<td style="text-align: right;">78.1</td>
<td style="text-align: right;">78.2</td>
<td style="text-align: right;">78.3</td>
<td style="text-align: right;">78.4</td>
<td style="text-align: right;">78.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Andorra</td>
<td style="text-align: right;">79.0</td>
<td style="text-align: right;">79.1</td>
<td style="text-align: right;">79.2</td>
<td style="text-align: right;">79.3</td>
<td style="text-align: right;">79.5</td>
<td style="text-align: right;">79.8</td>
<td style="text-align: right;">80.0</td>
<td style="text-align: right;">80.2</td>
<td style="text-align: right;">80.4</td>
<td style="text-align: right;">80.6</td>
<td style="text-align: right;">80.8</td>
<td style="text-align: right;">80.9</td>
<td style="text-align: right;">81.1</td>
<td style="text-align: right;">81.2</td>
<td style="text-align: right;">81.3</td>
<td style="text-align: right;">81.4</td>
<td style="text-align: right;">81.5</td>
<td style="text-align: right;">81.7</td>
<td style="text-align: right;">81.8</td>
<td style="text-align: right;">81.8</td>
<td style="text-align: right;">81.8</td>
<td style="text-align: right;">81.9</td>
<td style="text-align: right;">81.9</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">82.0</td>
<td style="text-align: right;">82.1</td>
<td style="text-align: right;">82.1</td>
<td style="text-align: right;">82.1</td>
<td style="text-align: right;">82.2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">UAE</td>
<td style="text-align: right;">68.7</td>
<td style="text-align: right;">68.7</td>
<td style="text-align: right;">68.8</td>
<td style="text-align: right;">68.8</td>
<td style="text-align: right;">68.7</td>
<td style="text-align: right;">68.8</td>
<td style="text-align: right;">68.9</td>
<td style="text-align: right;">69.0</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">69.1</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">69.4</td>
<td style="text-align: right;">69.3</td>
<td style="text-align: right;">69.1</td>
<td style="text-align: right;">69.2</td>
<td style="text-align: right;">69.5</td>
<td style="text-align: right;">70.0</td>
<td style="text-align: right;">70.4</td>
<td style="text-align: right;">70.6</td>
<td style="text-align: right;">70.8</td>
<td style="text-align: right;">71.0</td>
<td style="text-align: right;">71.2</td>
<td style="text-align: right;">71.6</td>
<td style="text-align: right;">73.0</td>
<td style="text-align: right;">73.2</td>
<td style="text-align: right;">73.4</td>
<td style="text-align: right;">73.5</td>
<td style="text-align: right;">73.7</td>
<td style="text-align: right;">73.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">72.5</td>
<td style="text-align: right;">72.7</td>
<td style="text-align: right;">72.8</td>
<td style="text-align: right;">73.0</td>
<td style="text-align: right;">73.4</td>
<td style="text-align: right;">73.4</td>
<td style="text-align: right;">73.5</td>
<td style="text-align: right;">73.6</td>
<td style="text-align: right;">73.7</td>
<td style="text-align: right;">73.8</td>
<td style="text-align: right;">74.2</td>
<td style="text-align: right;">74.3</td>
<td style="text-align: right;">74.3</td>
<td style="text-align: right;">74.4</td>
<td style="text-align: right;">74.9</td>
<td style="text-align: right;">75.3</td>
<td style="text-align: right;">75.4</td>
<td style="text-align: right;">75.3</td>
<td style="text-align: right;">75.7</td>
<td style="text-align: right;">75.8</td>
<td style="text-align: right;">75.9</td>
<td style="text-align: right;">76.0</td>
<td style="text-align: right;">76.2</td>
<td style="text-align: right;">76.3</td>
<td style="text-align: right;">76.5</td>
<td style="text-align: right;">76.5</td>
<td style="text-align: right;">76.2</td>
<td style="text-align: right;">76.3</td>
<td style="text-align: right;">76.5</td>
<td style="text-align: right;">76.6</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
</section>
<section id="integrate-data-sets" class="level1">
<h1>Integrate Data Sets</h1>
<section id="transpose" class="level3">
<h3 class="anchored" data-anchor-id="transpose">Transpose</h3>
<p>First we will pivot all data sets to be in long form</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot lung cancer data set</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>data_cancer <span class="ot">&lt;-</span> data_cancer <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1990"</span><span class="sc">:</span><span class="st">"2019"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"lung_cancer"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year))</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_cancer))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lung_cancer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1990</td>
<td style="text-align: right;">21.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">21.1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1992</td>
<td style="text-align: right;">20.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1993</td>
<td style="text-align: right;">20.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">20.4</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1995</td>
<td style="text-align: right;">20.2</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot gdp data set</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>data_gdp <span class="ot">&lt;-</span> data_gdp <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1990"</span><span class="sc">:</span><span class="st">"2019"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"gdpPercap"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year))</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom function to clean gdpPercap values</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>clean_gdp <span class="ot">&lt;-</span> <span class="cf">function</span>(gdp) {</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"k"</span>, gdp), </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>         <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">"k"</span>, <span class="st">""</span>, gdp)) <span class="sc">*</span> <span class="dv">1000</span>, </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>         <span class="fu">as.numeric</span>(gdp))</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the custom function and convert gdpPercap to numeric</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>data_gdp <span class="ot">&lt;-</span> data_gdp <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdpPercap =</span> <span class="fu">clean_gdp</span>(gdpPercap))</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix data type of gdpPercap</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>data_gdp <span class="ot">&lt;-</span> data_gdp <span class="sc">|&gt;</span> </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gdpPercap =</span> <span class="fu">as.double</span>(gdpPercap))</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_gdp))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1990</td>
<td style="text-align: right;">1850</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">1710</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1992</td>
<td style="text-align: right;">1650</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1993</td>
<td style="text-align: right;">1140</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">855</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1995</td>
<td style="text-align: right;">1280</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pivot lex data set</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>data_lex <span class="ot">&lt;-</span> data_lex <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1990"</span><span class="sc">:</span><span class="st">"2019"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"life_expectancy"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year))</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_lex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">life_expectancy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1990</td>
<td style="text-align: right;">53.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">53.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1992</td>
<td style="text-align: right;">54.2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1993</td>
<td style="text-align: right;">54.4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">53.9</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1995</td>
<td style="text-align: right;">54.3</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="merge" class="level3">
<h3 class="anchored" data-anchor-id="merge">Merge</h3>
<p>And then merge the data sets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get continent info from gapminder</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>data_cont <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, continent) <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform join statements</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>data_merged <span class="ot">&lt;-</span> data_cancer <span class="sc">|&gt;</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_gdp) <span class="sc">|&gt;</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_lex) <span class="sc">|&gt;</span> </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_cont)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(country, year)`
Joining with `by = join_by(country, year)`
Joining with `by = join_by(country)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check for correct merging</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(data_merged))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lung_cancer</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">gdpPercap</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">life_expectancy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">continent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1990</td>
<td style="text-align: right;">21.5</td>
<td style="text-align: right;">1850</td>
<td style="text-align: right;">53.8</td>
<td style="text-align: left;">Asia</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1991</td>
<td style="text-align: right;">21.1</td>
<td style="text-align: right;">1710</td>
<td style="text-align: right;">53.8</td>
<td style="text-align: left;">Asia</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1992</td>
<td style="text-align: right;">20.8</td>
<td style="text-align: right;">1650</td>
<td style="text-align: right;">54.2</td>
<td style="text-align: left;">Asia</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1993</td>
<td style="text-align: right;">20.5</td>
<td style="text-align: right;">1140</td>
<td style="text-align: right;">54.4</td>
<td style="text-align: left;">Asia</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">20.4</td>
<td style="text-align: right;">855</td>
<td style="text-align: right;">53.9</td>
<td style="text-align: left;">Asia</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1995</td>
<td style="text-align: right;">20.2</td>
<td style="text-align: right;">1280</td>
<td style="text-align: right;">54.3</td>
<td style="text-align: left;">Asia</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="animations" class="level1">
<h1>Animations</h1>
<section id="all-countries-over-time" class="level3">
<h3 class="anchored" data-anchor-id="all-countries-over-time">All Countries Over Time</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create lables for countries with highest lung cancer rates at any time point</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>labels <span class="ot">&lt;-</span> data_merged <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">max_cancer =</span> <span class="fu">max</span>(lung_cancer)) <span class="sc">|&gt;</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(max_cancer)) <span class="sc">|&gt;</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">6</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(country)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_merged, <span class="fu">aes</span>(<span class="at">x =</span> life_expectancy, <span class="at">y =</span> lung_cancer, <span class="at">color =</span> gdpPercap, <span class="at">size =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(country <span class="sc">%in%</span> labels, <span class="fu">as.character</span>(country), <span class="st">''</span>))) <span class="sc">+</span> </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dark_theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"skyblue2"</span>, <span class="at">high =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Year: {frame_time}"</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"New Lung Cancer Cases per 100K People"</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Log GDP per Capita"</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"GDP Per Capita"</span>) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Gapminder_Cancer_Animations_files/figure-html/unnamed-chunk-10-1.gif" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can see Monaco increase over time to become the country with the highest lung cancer rates in men in 2019. We can also see Hungary at one point be the country with the highest lung cancer rates, but then decrease drastically to be more in the middle. Finally, Montenegro slowly increases to become the country with the second highest lung cancer rates.</p>
<p>We can also see some countries like Rwanda have a drastic dip in their population during tumultuous years.</p>
<p>Let’s create a plot by year so we can isolate any timepoints where the pattern changes</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_merged, <span class="fu">aes</span>(<span class="at">x =</span> life_expectancy, <span class="at">y =</span> lung_cancer, <span class="at">color =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dark_theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"skyblue2"</span>, <span class="at">high =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Lung Cancer Rates over Time"</span>,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"New Lung Cancer Cases per 100K People"</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Log GDP per Capita"</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"GDP Per Capita"</span>) <span class="sc">+</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Gapminder_Cancer_Animations_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There appears to be a decrease in the rate of new lung cancer cases over time. Let’s isolate.</p>
<section id="difference-in-lung-cancer-from-1990-to-2019" class="level4">
<h4 class="anchored" data-anchor-id="difference-in-lung-cancer-from-1990-to-2019">Difference in Lung Cancer from 1990 to 2019</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>data_merged <span class="sc">|&gt;</span> <span class="fu">filter</span>(year <span class="sc">==</span><span class="dv">1990</span> <span class="sc">|</span> year <span class="sc">==</span> <span class="dv">2019</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> life_expectancy, <span class="at">y =</span> lung_cancer, <span class="at">color =</span> gdpPercap, <span class="at">size =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dark_theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"skyblue2"</span>, <span class="at">high =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Change in Lung Cancer Rates: 1990 vs 2019"</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"New Lung Cancer Cases per 100K People"</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Log GDP per Capita"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"GDP Per Capita"</span>) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>year) <span class="sc">+</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> F, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Gapminder_Cancer_Animations_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can see that the slopes are different. Showing that in 2019, each one year increase in age is associated with LESS of an increase in new lung cancer cases than it was in 1990.</p>
<p>This is preliminary evidence that we as a planet are getting a better control over cancer by slightly decreasing the rate of new cases as the global population gets older.</p>
</section>
</section>
<section id="by-continent" class="level3">
<h3 class="anchored" data-anchor-id="by-continent">By Continent</h3>
<p>Note: Some countries were not in the gapminder data set and thus did not have a corresponding <code>continent</code>. I have filtered them out.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform join statements</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>data_merged <span class="ot">&lt;-</span> data_cancer <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_gdp) <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(data_lex) <span class="sc">|&gt;</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(data_cont) <span class="co"># Right join here because we only want countries that were in the gapminder dataset</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_merged, <span class="fu">aes</span>(<span class="at">x =</span> life_expectancy, <span class="at">y =</span> lung_cancer, <span class="at">color =</span> gdpPercap, <span class="at">size =</span> gdpPercap)) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dark_theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"skyblue2"</span>, <span class="at">high =</span> <span class="st">"white"</span>) <span class="sc">+</span> </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Year: {frame_time}"</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"New Lung Cancer Cases per 100K People"</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Life Expectancy"</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"GDP Per Capita"</span>) <span class="sc">+</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transition_time</span>(year) <span class="sc">+</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">size =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Gapminder_Cancer_Animations_files/figure-html/unnamed-chunk-13-1.gif" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can see countries in Africa increase in life expectancy over time! They also appear to be slowly increasing in new lung cancer cases.</p>
<p>We can also see that continents like the Americas, Asia, and Europe already had a high life expectancy starting in 1990. We can also see these countries slowly decrease in new cancer rates over time!</p>
</section>
</section>
<section id="observations" class="level1">
<h1>Observations</h1>
<ul>
<li><p>We do see an overall linear trend, where for all countries, increased life expectancy is associated with an increase in new lung cancer cases per 100k people.</p></li>
<li><p>When broken down by continent, we can see Africa slowly increase in new lung cancer cases as its population life expectancies increase</p></li>
<li><p>Continents with higher GDP per capita on the hand (Europe, Americas, Asia) however, show a decrease in new lung cancer cases over time</p></li>
<li><p>After 2010, there appears to be a trend in most countries of a decrease in new lung cancer cases. This may be due to improvements in efforts to decrease cancer (e.g.&nbsp;anti-smoking campaigns)</p></li>
<li><p>Monaco became the country with the highest lung cancer rate in 2019. Hungary held this position, but decreased in new lung cancer cases in time, likely due to intervention efforts.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>