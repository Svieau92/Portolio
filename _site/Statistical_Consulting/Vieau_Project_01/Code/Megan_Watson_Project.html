<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sean Vieau">
<meta name="dcterms.date" content="2024-11-23">

<title>Assessing the Impact of a Physical Therapy Quality-Improvement Initiative – Sean Vieau Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../../site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="../../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

<link href="../../../site_libs/table1-1.0/table1_defaults.css" rel="stylesheet">


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Sean Vieau Portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-advanced-data-analyses-(rsas" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Advanced Data Analyses (R/SAS)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-advanced-data-analyses-(rsas">    
        <li>
    <a class="dropdown-item" href="../../../Project_1_Regression/Project_1_Regression_R/Project_1_Regression.html">
 <span class="dropdown-text">Regression (R)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../Project_1_Regression/Project_1_Regression_SAS/Project_1_Regression_SAS.html">
 <span class="dropdown-text">Regression (SAS)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../Project_2/Project_2_R/Code/Project2.html">
 <span class="dropdown-text">MLR With Confounding and Interaction (R)</span></a>
  </li>  
        <li class="dropdown-header">MLR With Confounding and Interaction (SAS)</li>
        <li>
    <a class="dropdown-item" href="../../../Project_2/Project_2_R/Code/Project2LMM.html">
 <span class="dropdown-text">Linear Mixed Model (R)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../Project_3_Predictive_Modelling/Project_3_R/Code/Project_3_Predictive_Modelling.html">
 <span class="dropdown-text">Predictive Modelling (R)</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../Data_Wrangling/Treadmill_Data_Cleaning/Code/Automated_Treadmill_Data_Cleaning.html"> 
<span class="menu-text">Data Wrangling (Python)</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-management-(sas" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Management (SAS)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-management-(sas">    
        <li>
    <a class="dropdown-item" href="../../../Data_Management_(SAS)/Project_1/Project_1_Importing.html">
 <span class="dropdown-text">Project 1 - Importing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../Data_Management_(SAS)/Project_3/Project3.html">
 <span class="dropdown-text">Project 3 - Data Set Creation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-statistical-consulting-(r" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Statistical Consulting (R)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-statistical-consulting-(r">    
        <li>
    <a class="dropdown-item" href="../../../Statistical_Consulting/Vieau_Project_01/Code/Megan_Watson_Project.html">
 <span class="dropdown-text">Scope of Work and Negative Binomial Regression</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../../../Resume/Publications_and_Presentations.html"> 
<span class="menu-text">Publications/Presentations</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#scope-of-work-sow-agreement" id="toc-scope-of-work-sow-agreement" class="nav-link" data-scroll-target="#scope-of-work-sow-agreement">Scope of Work (SOW) Agreement</a>
  <ul class="collapse">
  <li><a href="#general-information" id="toc-general-information" class="nav-link" data-scroll-target="#general-information">General Information</a></li>
  <li><a href="#project-description" id="toc-project-description" class="nav-link" data-scroll-target="#project-description">Project Description</a>
  <ul class="collapse">
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#study-design" id="toc-study-design" class="nav-link" data-scroll-target="#study-design">Study Design</a></li>
  <li><a href="#description-of-the-data" id="toc-description-of-the-data" class="nav-link" data-scroll-target="#description-of-the-data">Description of the Data</a></li>
  <li><a href="#anticipated-sample-size-study-population" id="toc-anticipated-sample-size-study-population" class="nav-link" data-scroll-target="#anticipated-sample-size-study-population">Anticipated Sample Size / Study Population</a></li>
  <li><a href="#hypothesis" id="toc-hypothesis" class="nav-link" data-scroll-target="#hypothesis">Hypothesis</a></li>
  <li><a href="#analysis-plan-sketch" id="toc-analysis-plan-sketch" class="nav-link" data-scroll-target="#analysis-plan-sketch">Analysis Plan (Sketch)</a></li>
  </ul></li>
  <li><a href="#project-deliverables" id="toc-project-deliverables" class="nav-link" data-scroll-target="#project-deliverables">Project Deliverables</a></li>
  </ul></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">Data Preparation</a>
  <ul class="collapse">
  <li><a href="#missingness" id="toc-missingness" class="nav-link" data-scroll-target="#missingness">Missingness</a></li>
  <li><a href="#data-quality-check" id="toc-data-quality-check" class="nav-link" data-scroll-target="#data-quality-check">Data Quality Check</a></li>
  <li><a href="#Filtering" id="toc-Filtering" class="nav-link" data-scroll-target="#Filtering">Filtering</a></li>
  <li><a href="#Clean" id="toc-Clean" class="nav-link" data-scroll-target="#Clean">Data Cleaning</a></li>
  <li><a href="#Creation" id="toc-Creation" class="nav-link" data-scroll-target="#Creation">Variable Creation</a></li>
  </ul></li>
  <li><a href="#univariate-distributions" id="toc-univariate-distributions" class="nav-link" data-scroll-target="#univariate-distributions">Univariate Distributions</a>
  <ul class="collapse">
  <li><a href="#Outcome_Variables" id="toc-Outcome_Variables" class="nav-link" data-scroll-target="#Outcome_Variables">Outcome Variables</a></li>
  </ul></li>
  <li><a href="#table-one" id="toc-table-one" class="nav-link" data-scroll-target="#table-one">Table One</a></li>
  <li><a href="#correlation-matrix" id="toc-correlation-matrix" class="nav-link" data-scroll-target="#correlation-matrix">Correlation Matrix</a></li>
  <li><a href="#Bi" id="toc-Bi" class="nav-link" data-scroll-target="#Bi">Bivariate Comparisons</a></li>
  <li><a href="#seasonality" id="toc-seasonality" class="nav-link" data-scroll-target="#seasonality">Seasonality</a></li>
  <li><a href="#Main_Goals" id="toc-Main_Goals" class="nav-link" data-scroll-target="#Main_Goals">Analysis: Main Goals</a>
  <ul class="collapse">
  <li><a href="#goal-1-increase-frequency-of-pt-visits" id="toc-goal-1-increase-frequency-of-pt-visits" class="nav-link" data-scroll-target="#goal-1-increase-frequency-of-pt-visits">Goal 1: Increase Frequency of PT Visits</a></li>
  <li><a href="#Goal_Two" id="toc-Goal_Two" class="nav-link" data-scroll-target="#Goal_Two">Goal 2: Decrease Time from Admit to Therapy</a></li>
  <li><a href="#Goal_3" id="toc-Goal_3" class="nav-link" data-scroll-target="#Goal_3">Goal 3: Increase Percentage of Admissions Receiving Physical Therapy</a></li>
  </ul></li>
  <li><a href="#analysis-primary-outcomes" id="toc-analysis-primary-outcomes" class="nav-link" data-scroll-target="#analysis-primary-outcomes">Analysis: Primary Outcomes</a>
  <ul class="collapse">
  <li><a href="#MICU_LOS" id="toc-MICU_LOS" class="nav-link" data-scroll-target="#MICU_LOS">MICU Length of Stay</a></li>
  <li><a href="#MV" id="toc-MV" class="nav-link" data-scroll-target="#MV">MV Time</a></li>
  </ul></li>
  <li><a href="#analysis-secondary-outcomes" id="toc-analysis-secondary-outcomes" class="nav-link" data-scroll-target="#analysis-secondary-outcomes">Analysis: Secondary Outcomes</a>
  <ul class="collapse">
  <li><a href="#Non" id="toc-Non" class="nav-link" data-scroll-target="#Non">Non ICU Length of Stay</a></li>
  <li><a href="#Total_LOS" id="toc-Total_LOS" class="nav-link" data-scroll-target="#Total_LOS">Total Hospital Length of Stay</a></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#discussion" id="toc-discussion" class="nav-link" data-scroll-target="#discussion">Discussion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Assessing the Impact of a Physical Therapy Quality-Improvement Initiative</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sean Vieau </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 23, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This is the Quarto markdown for the live consultation project in BIOS 6621: Statistical Consulting.</p>
<p>This is a research project encompassing the entire data analysis pipeline, from initial consultation to scope of work writing, execution of statistical analysis, and completion of project deliverables.</p>
<p>For this study we run a series of negative binomial regressions to assess the success of a physical therapy quality improvement initiative at Anschutz Hospital, <strong>finding significant results and drastic improvements the form of: decreased MICU length of stay, decreased mechanical ventilation times, and decreased overall hospital length of stay!</strong></p>
<p>We also discover an <strong>interesting interaction</strong>, where the QI-initiative improved outcomes for mechanically ventilated patients in particular.</p>
</section>
<section id="scope-of-work-sow-agreement" class="level1">
<h1>Scope of Work (SOW) Agreement</h1>
<section id="general-information" class="level2">
<h2 class="anchored" data-anchor-id="general-information">General Information</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Investigator</strong></td>
<td>Megan Watson</td>
<td><strong>Date</strong></td>
<td>September 30, 2024</td>
</tr>
<tr class="even">
<td><strong>Project Title</strong></td>
<td>Quality Improvement into Standard Practice: Persistent Practice Changes and Decreased Length of Stay for 3 years following a Medical ICU Physical Therapy Quality Improvement Project</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="project-description" class="level2">
<h2 class="anchored" data-anchor-id="project-description">Project Description</h2>
<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The objective of this study is to assess the impact of a MICU physical therapy (PT) quality improvement (QI) project on physical therapist practice, and quantify the changes in length of stay (LOS) and mechanical ventilation (MV) time. The goals of the QI Initiative were to increase percentage of MICU admissions receiving PT, decrease time from MICU admission to first PT, and increase the frequency of PT visits. The main question the researcher came to us with was: how to correctly model the longitudinal data in the study?</p>
</section>
<section id="study-design" class="level3">
<h3 class="anchored" data-anchor-id="study-design">Study Design</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This was a retrospective cohort study, comparing 3 main time periods: Pre-QI Initiative (before April 2015), During QI Initiative (April 2015-Dec 2015), and After-QI Initiative (Jan 2016 and later). The QI initiative was deployed during the 9-month period between April 2015 and December 2015, during which time there were education and staffing changes. Patients were stratified as either having mechanical ventilation or not having mechanical ventilation. The primary outcomes of interest were MICU LOS and time on MV. Secondary outcomes of interest were the non-ICU LOS, total hospital LOS, and discharge location.</p>
</section>
<section id="description-of-the-data" class="level3">
<h3 class="anchored" data-anchor-id="description-of-the-data">Description of the Data</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data was received as a de-identified .csv. Data points consist of: Admit and Discharge Time, PT Consult Time, Admit to Consult Time, First Therapy Time, Consult to Therapy Time, Admit to Therapy Time, Total Therapy Visits, Days with Therapy Visits, Average, min, and Max Therapy Length, Admit and Discharge Date/Time, Total MV Days, Hospital LOS, Patient Age, Sex, “Problem List”, and Codes (presumably ICD9/10).</p>
</section>
<section id="anticipated-sample-size-study-population" class="level3">
<h3 class="anchored" data-anchor-id="anticipated-sample-size-study-population">Anticipated Sample Size / Study Population</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The sample size is N = ~3000-4000, consisting of patients admitted to the MICU with a LOS between 2 and 30 days (I.e. exclude &lt; 2 days or &gt; 30 days). This was a single site study performed here at Colorado University.</p>
</section>
<section id="hypothesis" class="level3">
<h3 class="anchored" data-anchor-id="hypothesis">Hypothesis</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The hypothesis for the study was that LOS and time on MV would decrease when comparing the pre- and intra-initiative time periods, and when comparing the pre- and post-initiative time periods. Clinical significance for this outcome is considered as a 1-2 day change in LOS. The intended end product of this project is a publication in a PT journal.</p>
</section>
<section id="analysis-plan-sketch" class="level3">
<h3 class="anchored" data-anchor-id="analysis-plan-sketch">Analysis Plan (Sketch)</h3>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The next steps are to perform rigorous analyses on each outcome variable to determine if the observed differences are statistically significant. We will perform a Poisson or Negative Binomial Regression with QI-initiative time period as the independent variable, and each respective outcome variable as the dependent variable, resulting in 7 individual models:</p>
<ol type="1">
<li>Log( E(% of admissions receiving PTi | QI-Initiativei ) ) = β0 + β1 * QI-Initiativei + β2 * Covariatesi + …</li>
<li>Log( E(Time before First PTi | QI-Initiativei) ) = β0 + β1 * QI-Initiativei + β2 * Covariates + …</li>
<li>Log( E(Frequency of PT visitsi | QI-Initiativei) ) = β0 + β1 * QI-Initiativei + β2 * Corvariatesi + …</li>
<li>Log( E(Unit LOSi | QI-Initiativei ) ) = β0 + β1 * QI-Initiativei + β2 * Covariatesi + …</li>
<li>Log( E(MV Totali | QI-Initiativei ) ) = β0 + β1 * QI-Initiativei + β2 * Covariatesi + …</li>
<li>Log( E(Non-ICU LOSi | QI-Initiativei ) ) = β0 + β1 * QI-Initiativei + β2 * Covariatesi + …</li>
<li>Log( E(Hospital LOSi | QI-Initiativei ) ) = β0+ β1 * QI-Initiativei + β2 * Covariatesi + …</li>
</ol>
<p>Performing these analyses as a Poisson or Negative Binomial Regression allows us to account for the right-skewness of these count variables. A Negative Binomial Regression will be performed in the case of overdispersion, where the variance is greater than the mean</p>
</section>
</section>
<section id="project-deliverables" class="level2">
<h2 class="anchored" data-anchor-id="project-deliverables">Project Deliverables</h2>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; At this stage, Megan has only asked for insight into what method to use to account for variance in time for her analysis. There are currently no other deliverables.</p>
<p><strong>Timeline / Deadlines</strong></p>
<p>At this time, Megan has not asked for data analysis efforts from us.</p>
<p>Should this change, the anticipated project start date will be 1 week after our next meeting with her, where revisions to the Comprehensive Analysis Report are also expected to be completed. &nbsp;The assigned analysts will reach out to the investigator to confirm the project timeframe and the project start date may be altered if necessary. 2 weeks will be allowed for initial data analysis by the assigned analyst.</p>
<p>A follow-up meeting is to occur no later than <strong>1 month after the next meeting with Megan.</strong> During the follow-up meeting, the project team will discuss and preliminary results of the analysis, mockup the desired tables and figures (1-2 descriptive tables, 1-2 analysis results tables and up to 4 graphs), and discuss next steps. During the follow-up meeting, the team will establish a meeting schedule for the remainder of the project.&nbsp;</p>
<p><strong>Estimated Cost</strong></p>
<p>This represents our best estimate of the effort needed to complete the project. Should the scope of work change substantially, the analyst(s) will discuss changes with the investigator and issue a new or amended project agreement.</p>
<table class="caption-top table">
<tbody>
<tr class="odd">
<td></td>
<td><strong>Effort</strong></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>Months</strong></td>
<td>PhD Faculty</td>
<td>Master’s Faculty</td>
<td>Student</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td><strong>1</strong></td>
<td>20%</td>
<td>0%</td>
<td>80%</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td><strong>Total Costs</strong></td>
<td><strong>’Bout Tree Fiddy</strong></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="data-preparation" class="level1">
<h1>Data Preparation</h1>
<p>Let’s begin by loading our libraries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar) <span class="co"># Used to visualize missing data</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra) <span class="co"># Used for pretty printing (kable_styling)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(table1) <span class="co"># Used to make Table 1</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra) <span class="co"># Used to plot ggplots side by side</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bestNormalize) <span class="co"># Used to find best transformation for a variable</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot) <span class="co"># Used for correlation matrix</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmtest) <span class="co"># Used for likelihood ratio test</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lmtest' was built under R version 4.4.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car) <span class="co"># Used to get vifs</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Import the data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/Users/sviea/Documents/Statistical Consulting/Vieau_Project_01/Data Raw/MICUPT_Deidentify.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 13109 Columns: 25
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(9): SEX, PROBLEM LIST DX CODES, PROBLEM LIST DX NAMES, DISCH_DISP, DEP... dbl
(16): ...1, MV_Total, HOSPITAL LOS, ADMIT TO CONSULT, CONSULT TO TREAT, ...
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(data)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"id"</span> <span class="co"># Rename the wonky id column</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And take a look at our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 13,109
Columns: 25
$ id                                    &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 1…
$ SEX                                   &lt;chr&gt; "M", "F", "F", "F", "F", "F", "M…
$ MV_Total                              &lt;dbl&gt; 30, NA, 13, NA, 16, NA, NA, NA, …
$ `HOSPITAL LOS`                        &lt;dbl&gt; 1827, 767, 610, 839, 1109, 549, …
$ `PROBLEM LIST DX CODES`               &lt;chr&gt; "291.81, 305.00, 311, 4", "287.5…
$ `PROBLEM LIST DX NAMES`               &lt;chr&gt; "AKI (acute kidney injury) (HC c…
$ DISCH_DISP                            &lt;chr&gt; "Skilled Nursing Facility", "Hom…
$ `DEPT BEFORE Unit`                    &lt;chr&gt; "PRE-ADMISSION", "PRE-ADMISSION"…
$ `DEPT AFTER Unit`                     &lt;chr&gt; "CARDIOLOGY UNIT", "AMC PULM UNI…
$ `ADMIT TO CONSULT`                    &lt;dbl&gt; 576, 451, 313, 403, 386, 17, NA,…
$ `CONSULT TO TREAT`                    &lt;dbl&gt; 97, NA, 97, 28, 19, NA, NA, NA, …
$ `ADMIT TO TREAT`                      &lt;dbl&gt; 673, NA, 410, 431, 405, NA, NA, …
$ `TOTAL THERAPY VISITS`                &lt;dbl&gt; 8, 0, 2, 2, 4, 0, 0, 0, 0, 0, 2,…
$ Unit_LOS                              &lt;dbl&gt; 1394, 487, 610, 483, 606, 25, 39…
$ `DAYS WITH THERAPY VISITS`            &lt;dbl&gt; 8, 0, 2, 2, 4, 0, 0, 0, 0, 0, 2,…
$ `PERCENT OF DAYS WITH THERAPY VISITS` &lt;dbl&gt; 13.79, 0.00, 8.00, 10.00, 16.00,…
$ `AVG THERAPY LENGTH`                  &lt;dbl&gt; 22, 0, 27, 17, 25, 0, 0, 0, 0, 0…
$ `MAX THERAPY LENGTH`                  &lt;dbl&gt; 30, 0, 30, 20, 30, 0, 0, 0, 0, 0…
$ `MIN THERAPY LENGTH`                  &lt;dbl&gt; 15, 0, 25, 15, 20, 0, 0, 0, 0, 0…
$ `ACTUAL DAYS POST MICU`               &lt;dbl&gt; 18, 12, 0, 15, 17, 4, 0, 8, 2, 5…
$ `PT or OT VISIT DAYS POST MICU`       &lt;dbl&gt; 5, 3, 0, 1, 9, 0, 0, 3, 0, 3, 2,…
$ `PERCENT POST ICU DAYS THERAPY`       &lt;dbl&gt; 27.78, 25.00, 0.00, 6.67, 52.94,…
$ Age_Range                             &lt;chr&gt; "60-69", "40-49", "40-49", "18-3…
$ Admit_MonthYear                       &lt;chr&gt; "2011-08", "2011-08", "2011-08",…
$ Age_Quartile                          &lt;chr&gt; "57-66", "43-56", "43-56", "14-4…</code></pre>
</div>
</div>
<p>It looks like everything is formatted correctly for the most part.</p>
<p>Percents are coded as doubles.</p>
<p><code>Admit_MonthYear</code> is a string (e.g.&nbsp;“2011-08”) that we may have to process in order to create variables for the 3 main time periods: Pre-QI Initiative (before April 2015), During QI Initiative (April 2015-Dec 2015), and After-QI Initiative (Jan 2016 and later).</p>
<p>Let’s take a look at our data for good measure.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print header of wideform data</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(data), <span class="at">format =</span> <span class="st">"html"</span>, <span class="at">full_width =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEX</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL LOS</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX CODES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX NAMES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DISCH_DISP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT BEFORE Unit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT AFTER Unit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO CONSULT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT OF DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT or OT VISIT DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT POST ICU DAYS THERAPY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Quartile</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">1827</td>
<td style="text-align: left;">291.81, 305.00, 311, 4</td>
<td style="text-align: left;">AKI (acute kidney injury) (HC c</td>
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">576</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">673</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1394</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">13.79</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">27.78</td>
<td style="text-align: left;">60-69</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">57-66</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">767</td>
<td style="text-align: left;">287.5, 416.8, 584.9, 5</td>
<td style="text-align: left;">Acute renal failure (HC code),</td>
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">451</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">487</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">25.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">610</td>
<td style="text-align: left;">078.5, 284.1, 288.4, 5</td>
<td style="text-align: left;">CMV (cytomegalovirus infectio</td>
<td style="text-align: left;">Expired</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">313</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">410</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">610</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">27</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">839</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Long Term Care</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">403</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">431</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">483</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">10.00</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6.67</td>
<td style="text-align: left;">18-39</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">14-42</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">1109</td>
<td style="text-align: left;">250.00, 250.60, 356.9</td>
<td style="text-align: left;">Cellulitis, Diabetes mellitus (H</td>
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">386</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">405</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">606</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">16.00</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">52.94</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">43-56</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">549</td>
<td style="text-align: left;">041.04, 244.9, 288.60</td>
<td style="text-align: left;">AKI (acute kidney injury) (HC c</td>
<td style="text-align: left;">Hospice/Medical Facility</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">40-49</td>
<td style="text-align: left;">2011-08</td>
<td style="text-align: left;">14-42</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<section id="missingness" class="level2">
<h2 class="anchored" data-anchor-id="missingness">Missingness</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_var</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We are missing the most data in <code>MV_Total</code> , followed by <code>CONSULT TO TREAT</code>, <code>ADMIT TO TREAT</code>, and <code>PROBLEM LIST DX CODES</code>. Missingness does not seem to be an issue for the rest of the variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vis_miss</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Immediately concerning is the 65% missing data on <code>MV_TOTAL</code>, the variable for total time on mechanical ventilation, which happens to me a main outcome of interest.</p>
<p><code>CONSULT TO TREAT</code> has 56% missing and <code>ADMIT TO TREAT</code> has 55% missing. This could be because, in emergency situations where immediate critical care is required, patients might be directly admitted to the MICU without a formal consult.</p>
<p><code>PROBLEM LIST DX CODES</code> and <code>PROBLEM LIST DX NAME</code> have 25% and 20% missing, respectively. Odd that their missingness doesn’t align exactly. This isn’t actually too bad, and our sample size is large enough that we may still be able to include these variables in our analysis if we wanted to. We’d just have to do some processing to place patients into large enough overarching diagnosis categories that we’d have enough patients in each group. Not the researcher’s primary research question however so not looking any further into it. We’d also have to examine missingness and see if there are and patterns or it’s MCAR.</p>
<section id="summary" class="level4">
<h4 class="anchored" data-anchor-id="summary">Summary</h4>
<p>Based on the initial missingness checks, we will exclude variables with excessive missingness.</p>
<p>These variables will be retained for reporting in Table 1 for the researcher, but will be excluded from consideration in the analysis.</p>
<ul>
<li><p><code>Consult to Treat</code> and <code>Admit to Treat</code> are missing &gt;= 55% of values, and will thus be excluded from analysis.</p></li>
<li><p><code>Problem List DX Codes</code> is missing 25% and <code>Problem List DX Names</code> is missing 20% of values. Additionally, it would be challenging to include these variables in the analysis in a meaningful way due to sample size limitations, so these will be excluded from consideration in the final analysis.</p></li>
<li><p><code>Admit to Consult</code> is missing 23% of values.</p></li>
</ul>
<p>All other variables were missing &lt; 1% and thus missingness does not need to be addressed for these variables.</p>
</section>
</section>
<section id="data-quality-check" class="level2">
<h2 class="anchored" data-anchor-id="data-quality-check">Data Quality Check</h2>
<p>Let’s perform some simple min/max checks to assess if data has been entered correctly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This function summarizes the mins and maxes of numeric variables</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>summarize_column <span class="ot">&lt;-</span> <span class="cf">function</span>(column) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(column)) {</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">data.frame</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">Type =</span> <span class="st">"Numeric"</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">Min =</span> <span class="fu">min</span>(column, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">Max =</span> <span class="fu">max</span>(column, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply the function to each column and bind the results into a single data frame</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>summary_df <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(data, summarize_column, <span class="at">.id =</span> <span class="st">"Column"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">format</span>(., <span class="at">scientific =</span> <span class="cn">FALSE</span>))) <span class="co"># Eliminates scientific notation</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print the mins and maxes of longform data_2</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(summary_df, <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Column</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Type</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Min</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">id</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">13109</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_Total</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">75</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HOSPITAL LOS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">4</td>
<td style="text-align: left;">9270</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADMIT TO CONSULT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">1172</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CONSULT TO TREAT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-405</td>
<td style="text-align: left;">3046</td>
</tr>
<tr class="even">
<td style="text-align: left;">ADMIT TO TREAT</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-1</td>
<td style="text-align: left;">983</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TOTAL THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">69</td>
</tr>
<tr class="even">
<td style="text-align: left;">Unit_LOS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">1</td>
<td style="text-align: left;">1811</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DAYS WITH THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">33</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERCENT OF DAYS WITH THERAPY VISITS</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AVG THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-1970</td>
<td style="text-align: left;">2144</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAX THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-85</td>
<td style="text-align: left;">4744</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MIN THERAPY LENGTH</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">-6841</td>
<td style="text-align: left;">1253</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACTUAL DAYS POST MICU</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">383</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT or OT VISIT DAYS POST MICU</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">68</td>
</tr>
<tr class="even">
<td style="text-align: left;">PERCENT POST ICU DAYS THERAPY</td>
<td style="text-align: left;">Numeric</td>
<td style="text-align: left;">0</td>
<td style="text-align: left;">100</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>HOSPITAL LOS</code> has a range of 4 to 9270. Presumably this is in hours, so a range of 0.01 to 386.25 days in the hospital. I believe the variable we are actually interested in for MICU LOS is <code>UNIT LOS</code> however, so a range of 1 to1811 hours, or 0.41 to 75.46 days. (Just realized none of us asked for a data dictionary even though it was a room of ~20 stats master’s students 😅).</p>
<p>The researcher outlined the exclusion criteria of &lt; 2 days or &gt; 30 days in the MICU for her investigation. It looks like we will have to <a href="#Filtering">filter the data set</a> to match these criteria.</p>
<p><code>CONSULT TO TREAT</code> has a range of -405 to 3056. <code>ADMIT TO TREAT</code> has a range of -1 to 983. I think these variables are the time from consultation or admission until the time treatment for that patient began. Again, without a data dictionary I am unsure what to make of those negative values.</p>
<p>Importantly, <code>AVG, MAX, and MIN THERAPY LENGTH</code> all have negative values for the minimums. This doesn’t make any sense at face value, will have to investigate and circle back to the researchers for how this data was coded.</p>
<p>Some variables like <code>MV_Total</code> are in hours, and some like <code>DAYS WITH THERAPY VISITS</code> are in days. I don’t think we need to run any conversions, but this will be important to at least keep track of for interpretations.</p>
<p>Aside from that everything else looks coded properly.</p>
</section>
<section id="Filtering" class="level2">
<h2 class="anchored" data-anchor-id="Filtering">Filtering</h2>
<p>Let’s go ahead and filter the data set according to the experimenter’s exclusion criteria of &lt; 2 days or &gt; 30 days in the MICU so we are not unnecessarily investigating superfluous data in our continued examinations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data set based on researcher's exclusion criteria</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data[data<span class="sc">$</span>Unit_LOS <span class="sc">&gt;=</span> <span class="dv">48</span> <span class="sc">&amp;</span> data<span class="sc">$</span>Unit_LOS <span class="sc">&lt;=</span> <span class="dv">720</span>,]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check dimensions</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(data_ex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6430   25</code></pre>
</div>
</div>
<p>We now have a dataset of 6430 patients!</p>
</section>
<section id="Clean" class="level2">
<h2 class="anchored" data-anchor-id="Clean">Data Cleaning</h2>
<p>Here we will go one by one through our potential covariates and make sure they are all properly coded and there are no erroenous values.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">ICD10 Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Department Before MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Department after MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Admit to Consult</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false">Consult to Treat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false">Admit to Treat</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" role="tab" aria-controls="tabset-2-7" aria-selected="false">Total Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-8" role="tab" aria-controls="tabset-2-8" aria-selected="false">Days with Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-9" role="tab" aria-controls="tabset-2-9" aria-selected="false"></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-10" role="tab" aria-controls="tabset-2-10" aria-selected="false">Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-11" role="tab" aria-controls="tabset-2-11" aria-selected="false">Days Post MICU</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-12" role="tab" aria-controls="tabset-2-12" aria-selected="false">Post MICU PT or OT Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-13-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-13" role="tab" aria-controls="tabset-2-13" aria-selected="false">Post ICU Days with Therapy</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-14-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-14" role="tab" aria-controls="tabset-2-14" aria-selected="false">Age</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-15-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-15" role="tab" aria-controls="tabset-2-15" aria-selected="false">Age Quartile</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-16-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-16" role="tab" aria-controls="tabset-2-16" aria-selected="false">Admit Date</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Note: <code>PROBLEM LIST DX CODES</code> and <code>PROBLEM LIST DX CODES</code> have 100’s of levels comprising sundry diagnoses.</p>
<p>Without a direction for the specific use of these variables we can’t do much with them, so they will likely be excluded from the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DEPT BEFORE Unit</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AMC ACE UNIT</td>
<td style="text-align: right;">79</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC ADMISSION TRN UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP OR</td>
<td style="text-align: right;">60</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP PACU</td>
<td style="text-align: right;">59</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP PACU HOLD INPT</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP PERIOP SVC</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP PRE-OP</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AOP OR</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AOP PACU</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BMT/ONC UNIT</td>
<td style="text-align: right;">232</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC BRONCH LAB</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">82</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD CATH LAB</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD EP LAB</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD MED UNIT</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD POSTPROC UNIT</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARD PRE/POST PROC</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: right;">56</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CC SURGE UNIT</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CICU</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CRITICAL CARE ANNX</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CTRC UNIT</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC DIALYSIS UNIT</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: right;">2962</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC GI PRE/POST</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC INTRNL MED UNIT</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC IR</td>
<td style="text-align: right;">95</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC LABOR AND DELIVERY</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">887</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">39</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED SURG UNIT</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED/GYN/ONC UNIT</td>
<td style="text-align: right;">131</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MEDICAL ICU</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MOTHER BABY UNIT</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEONATAL ICU</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC NEURO ICU</td>
<td style="text-align: right;">96</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEUROSCIENCES UNIT</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC ORTHO UNIT</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">179</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURG SPEC UNIT</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURG TRAUMA ICU</td>
<td style="text-align: right;">52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURGICAL ICU</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICAL UNIT</td>
<td style="text-align: right;">12</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC THRU UNIT</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC TRANSPLANT HEP</td>
<td style="text-align: right;">10</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC TRANSPLANT UNIT</td>
<td style="text-align: right;">55</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXPRESS ADMIT UNIT</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">GREENVAL ED</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HEM/ONC UNIT</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTERNAL MEDICINE UNIT</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MED SURGE HOLDING UNIT</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">MISSIPPI ED</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: right;">124</td>
</tr>
<tr class="even">
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: right;">389</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I lack the clinical knowledge to make use of this variable.</p>
<p>It will likely not be used in the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get counts</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DEPT AFTER Unit</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">AMC ACE UNIT</td>
<td style="text-align: right;">323</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC AIP OR</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC AIP SUITES UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC BMT/ONC UNIT</td>
<td style="text-align: right;">253</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">17</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CARD MED UNIT</td>
<td style="text-align: right;">57</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CC SURGE UNIT</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC CICU</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC CRITICAL CARE ANNX</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC DIALYSIS PRE-DISCH</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC DIALYSIS UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC INTRNL MED UNIT</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC IR</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC LABOR AND DELIVERY</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">991</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">203</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">906</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MED SURG UNIT</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC MED/GYN/ONC UNIT</td>
<td style="text-align: right;">264</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC MEDICAL ICU</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC NEURO ICU</td>
<td style="text-align: right;">26</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC NEUROSCIENCES UNIT</td>
<td style="text-align: right;">133</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC ORTHO UNIT</td>
<td style="text-align: right;">51</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">522</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURG SPEC UNIT</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURG TRAUMA ICU</td>
<td style="text-align: right;">30</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICAL ICU</td>
<td style="text-align: right;">40</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC SURGICAL UNIT</td>
<td style="text-align: right;">36</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC SURGICALSURGE UNIT</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC THRU UNIT</td>
<td style="text-align: right;">38</td>
</tr>
<tr class="even">
<td style="text-align: left;">AMC TRANSPLANT HEP</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AMC TRANSPLANT UNIT</td>
<td style="text-align: right;">108</td>
</tr>
<tr class="even">
<td style="text-align: left;">CARDIOLOGY UNIT</td>
<td style="text-align: right;">134</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EXPRESS ADMIT UNIT</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">INTERNAL MEDICINE UNIT</td>
<td style="text-align: right;">113</td>
</tr>
<tr class="odd">
<td style="text-align: left;">OLD AMC CARD ICU</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1880</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Similarly, I lack the clinical knowledge to make use of this variable without a specific direction from the researcher. It will likely be excluded in this analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`ADMIT TO CONSULT`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation idioms with `aes()`.
ℹ See also `vignette("ggplot2-in-packages")` for more information.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>ADMIT_TO_CONSULT_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"ADMIT_TO_CONSULT_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4021 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This looks incredibly messy to use. And has 23% missing values. We will likely exclude.</p>
<p>Could we convert it to a binary variable of whether the patient received a consult or not?</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<p><code>CONSULT TO TREAT</code> contained negative values. Let’s explore</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram for time from consult to treatment</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks like we have a lot of values extending below 0, so it’s not just some mis-entered data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by time from consult to treatment</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, <span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print table</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">head</span>(sorted_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10440</td>
<td style="text-align: right;">-405</td>
</tr>
<tr class="even">
<td style="text-align: right;">11514</td>
<td style="text-align: right;">-385</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7006</td>
<td style="text-align: right;">-189</td>
</tr>
<tr class="even">
<td style="text-align: right;">9262</td>
<td style="text-align: right;">-166</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11502</td>
<td style="text-align: right;">-143</td>
</tr>
<tr class="even">
<td style="text-align: right;">11474</td>
<td style="text-align: right;">-118</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><code>CONSULT TO TREAT</code> looks coded correctly. I believe it just has an event at timepoint zero, most likely admit.</p>
<section id="summary-1" class="level4">
<h4 class="anchored" data-anchor-id="summary-1">Summary</h4>
<p><code>CONSULT TO TREAT</code> is coded correctly. However it has 56% missing values and will thus not be used.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<p>The -1 value we saw as the min for <code>ADMIT TO TREAT</code> makes me suspicious that’s how missing data was coded for this variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram for time from admit to treatment</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The histogram shows there were very few patients with a value of -1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by time from admit to treatment</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>sorted_data <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print table</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(sorted_data), <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">8941</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="even">
<td style="text-align: right;">9949</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11126</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">37</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1275</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: right;">3579</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There were only 2 patients with an admit to treatment time of -1, and 1 patient with a value of 0. Will have to double check with the experimenters but this looks believable.</p>
<section id="summary-2" class="level4">
<h4 class="anchored" data-anchor-id="summary-2">Summary</h4>
<p>There are two patients with a -1 time to admit.</p>
<p>However, <code>ADMIT TO TREAT</code> has 55% missing values and will thus not be included in the final analysis.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-7-tab">
<p><code>TOTAL THERAPY VISITS</code> is a promising covariate.</p>
<p>Those who had more therapy days could have a quicker recovery if physical therapy improves patient condition.</p>
<p>Or alternatively, more therapy days could be indicative of worse physical health, and could potentially increase the outcome variables of total MV time and MICU LOS.</p>
<p>Either way it is prudent to account for it in the model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`TOTAL THERAPY VISITS`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform of average therapy length</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>TOTAL_THERAPY_VISITS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">TOTAL THERAPY VISITS</span><span class="st">`</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"TOTAL_THERAPY_VISITS_log"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2324 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
<section id="summary-3" class="level4">
<h4 class="anchored" data-anchor-id="summary-3">Summary</h4>
<p><code>TOTAL THERAPY VISITS</code> appears to have a logarithmic distribution. Poisson regression should take care of this</p>
</section>
</div>
<div id="tabset-2-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-8-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`DAYS WITH THERAPY VISITS`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>DAYS WITH THERAPY VISITS</code> appears to be coded correctly. Poisson regression will handle the distribution.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-9-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PERCENT OF DAYS WITH THERAPY VISITS`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting, there was a lot of patients with either 0 or 100% of their days including physical therapy.</p>
<p>This could be a good covariate to include in the final model.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-10-tab">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Negative Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Average Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Max Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Min Therapy Length</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>We saw earlier that average, min, and max therapy length had negative values for their minimum, which does not make sense. Let’s investigate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ah, we can see that we have a one incredibly low and negative values, and some incredibly high values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a table to checkout our frequencies for low and high values</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-1424     0     4     5     6     7     8     9    10    11    12    13    14 
    1  2374     1     9     4     4    12    13    53    17    38    29    31 
   15    16    17    18    19    20    21    22    23    24    25    26    27 
  117    48    60    43    59   168    89    78   107    88   213   127   117 
   28    29    30    31    32    33    34    35    36    37    38    39    40 
  113   114   174   127   122   102   111   129    92   110    85    82   141 
   41    42    43    44    45    46    47    48    49    50    51    52    53 
   78    79    71    77    80    60    56    42    58    48    23    28    37 
   54    55    56    57    58    59    60    61    62    63    64    65    66 
   34    35    21    15    18    16    23    12    12     5    13    10     5 
   67    68    69    70    71    72    73    74    75    76    77    81    83 
    4     6     5     8    10     4     3     5     5     2     1     1     1 
   85    86    90    93    97   362   617   644  1001  1043  1506  2093  2144 
    2     3     2     1     1     1     1     1     1     1     1     1     1 </code></pre>
</div>
</div>
<p>We have 1 patient with a -1424 average length in therapy that is most likely an erroneous entry, and some patients with very high times in therapy.</p>
<p>I wonder who that patient is that is so advanced they’ve spent negative time in therapy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Investigate patient with negative therapy lengths</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>negative <span class="ot">&lt;-</span> data_ex[data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">==</span> <span class="sc">-</span><span class="dv">1424</span>,] <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty Print</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(negative, <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"hover"</span>, <span class="st">"striped"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">10462</td>
<td style="text-align: right;">-1424</td>
<td style="text-align: right;">-2726</td>
<td style="text-align: right;">-85</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Aha! This patient has negative values for all therapy lengths.</p>
<p>Let’s see if they are the only one that has negative values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
-2726     0     3     4     5     6     7     8     9    10    11    12    13 
    1  2376     6     4    41    20    26    78    57   234    67    83    67 
   14    15    16    17    18    19    20    21    22    23    24    25    26 
   94   275    81    60    94    70   230    75    39   178   144   271   115 
   27    28    29    30    31    32    33    34    35    36    37    38    39 
   90    84    86   206    77    75    70    63    70    46    43    61    53 
   40    41    42    43    44    45    46    47    48    49    50    51    52 
  100    38    34    36    34    37    22    26    20    22    29    17     8 
   53    54    55    56    57    58    59    60    61    62    63    64    65 
   17    18    29     9    11     9    13    12     5     8     4     5     8 
   66    67    68    69    70    71    72    73    74    75    76    77    81 
    1     5     2     2     6     6     3     2     4     4     2     1     2 
   83    85    86    90    93    97  1204  1253 
    1     1     2     1     1     1     1     1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 -85    0    4    5    6    7    8    9   10   11   12   13   14   15   16   17 
   1 2374    1    8    4    5   10   13   50   14   19   15   22  124   34   20 
  18   19   20   21   22   23   24   25   26   27   28   29   30   31   32   33 
  27   38  153   39   18   73   58  197   64   67   72   62  210   74   68   59 
  34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49 
  61  106   63   60   98   92  158   79   82   62   61   98   58   58   53   46 
  50   51   52   53   54   55   56   57   58   59   60   61   62   63   64   65 
  81   36   31   70   79   91   57   48   47   44   66   46   28   31   23   25 
  66   67   68   69   70   71   72   73   74   75   76   77   78   79   80   81 
  16   15   35   25   42   17   19   14   22   16   16   10    9    8    9    5 
  82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97 
   4    7   10   13   10    5    3    6    9    4    7    7    2    3    1    3 
  98   99  100  101  102  103  104  105  107  109  110  117  140 1034 1540 1725 
   1    2    1    2    2    1    1    3    1    1    2    1    1    1    1    1 
2963 3035 3067 3119 4248 
   1    1    1    1    1 </code></pre>
</div>
</div>
<p>They are! What probably happened here was their minimum is actually 85, and their max is actually 2726, and those got reversed into negatives somehow. Similarly, their average should be 1424.</p>
<p>We’ll double check with the investigator, but for now let’s just delete this patient and re run the histogram and qqplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove negative patient</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span> <span class="fu">filter</span>(data_ex<span class="sc">$</span>id <span class="sc">!=</span> <span class="dv">10462</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We may have some outliers that spent very long in therapy</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine potential outliers</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n=</span><span class="dv">10</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">178</td>
<td style="text-align: right;">1253</td>
<td style="text-align: right;">3035</td>
<td style="text-align: right;">2144</td>
</tr>
<tr class="even">
<td style="text-align: right;">12985</td>
<td style="text-align: right;">1204</td>
<td style="text-align: right;">4248</td>
<td style="text-align: right;">2093</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3230</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">2963</td>
<td style="text-align: right;">1506</td>
</tr>
<tr class="even">
<td style="text-align: right;">2942</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">1540</td>
<td style="text-align: right;">1043</td>
</tr>
<tr class="odd">
<td style="text-align: right;">12803</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">3119</td>
<td style="text-align: right;">1001</td>
</tr>
<tr class="even">
<td style="text-align: right;">12640</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">3067</td>
<td style="text-align: right;">644</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6661</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1725</td>
<td style="text-align: right;">617</td>
</tr>
<tr class="even">
<td style="text-align: right;">10917</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">1034</td>
<td style="text-align: right;">362</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8071</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">97</td>
<td style="text-align: right;">97</td>
</tr>
<tr class="even">
<td style="text-align: right;">7733</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">93</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Success! That is not a logarithmic relationship, that’s just 8 patients who had an extremely long stay in therapy.</p>
<p>Let’s set these values to <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter out outlier patients</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>, <span class="dv">3230</span>, <span class="dv">2942</span>, <span class="dv">12803</span>, <span class="dv">12640</span>, <span class="dv">6661</span>, <span class="dv">10917</span>), <span class="cn">NA</span>, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>and re-plot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`AVG THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s a normal distribution with a preponderance of patients who did not have physical therapy.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set outlier values to NA</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>, <span class="dv">3230</span>, <span class="dv">2942</span>, <span class="dv">12803</span>, <span class="dv">12640</span>, <span class="dv">6661</span>, <span class="dv">10917</span>), <span class="cn">NA</span>, <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>))</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`MAX THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Max therapy appears mostly normally distributed, not including the patients that did not receive PT.</p>
<p>The highest patient has a max length of 140, and the next highest has a max stay of ~100. Not drastic enough to call that patient an outlier.</p>
<section id="summary-4" class="level4">
<h4 class="anchored" data-anchor-id="summary-4">Summary</h4>
<p><code>MAX THERAPY LENGTH</code> appears normally distributed for those that received PT.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set outlier values to NA</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">178</span>, <span class="dv">12985</span>), <span class="cn">NA</span>, <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>))</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`MIN THERAPY LENGTH`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="summary-5" class="level4">
<h4 class="anchored" data-anchor-id="summary-5">Summary</h4>
<p><code>MIN THERAPY LENGTH</code> appears mostly normal for thos who received it.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</div>
<div id="tabset-2-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-11-tab">
<p>This variable represents the number of days a patient has spent in a standard hospital unit after being discharged from the Medical Intensive Care Unit (MICU).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`ACTUAL DAYS POST MICU`"</span>, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It appears logarithmic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Log transform variable</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ACTUAL_DAYS_POST_MICU_log =</span> <span class="fu">log</span>(<span class="st">`</span><span class="at">ACTUAL DAYS POST MICU</span><span class="st">`</span>))</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"ACTUAL_DAYS_POST_MICU_log"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1988 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1988 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1988 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That appears normally distributed now!</p>
<section id="summary-6" class="level4">
<h4 class="anchored" data-anchor-id="summary-6">Summary</h4>
<p>Days post MICU is normal after log transforming.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-2-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-12-tab">
<p>This variable represents the number of days that patients have been visited by physical therapists (PT) or occupational therapists (OT) after being discharged from the Medical Intensive Care Unit (MICU). It captures the extent of post-ICU rehabilitation services provided to patients and can be important for understanding recovery trajectories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PT or OT VISIT DAYS POST MICU`"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This variable is important for our analysis as it will not effect our outcome variables.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-13" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-13-tab">
<p>This variable is the percentage of days after a patient is discharged from the Intensive Care Unit (ICU) during which they received therapy, such as physical therapy (PT) or occupational therapy (OT).</p>
<p>This variable is likely not important as it will not effect our outcome variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`PERCENT POST ICU DAYS THERAPY`"</span>, <span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-14" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-14-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine counts</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span>Age_Range))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">18-39</td>
<td style="text-align: right;">1121</td>
</tr>
<tr class="even">
<td style="text-align: left;">40-49</td>
<td style="text-align: right;">899</td>
</tr>
<tr class="odd">
<td style="text-align: left;">50-59</td>
<td style="text-align: right;">1492</td>
</tr>
<tr class="even">
<td style="text-align: left;">60-69</td>
<td style="text-align: right;">1574</td>
</tr>
<tr class="odd">
<td style="text-align: left;">70+</td>
<td style="text-align: right;">1327</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Age</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>That’s curious, what does “Negative Age” mean?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine negative age</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Age_Range <span class="sc">==</span> <span class="st">"Negative Age"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">SEX</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">HOSPITAL LOS</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX CODES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">PROBLEM LIST DX NAMES</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DISCH_DISP</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT BEFORE Unit</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">DEPT AFTER Unit</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO CONSULT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CONSULT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT TO TREAT</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Unit_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT OF DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MAX THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MIN THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT or OT VISIT DAYS POST MICU</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PERCENT POST ICU DAYS THERAPY</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Range</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Age_Quartile</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ADMIT_TO_CONSULT_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">TOTAL_THERAPY_VISITS_log</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">ACTUAL_DAYS_POST_MICU_log</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1394</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">139</td>
<td style="text-align: left;">292.81, 296.80, 314.0</td>
<td style="text-align: left;">ADHD (attention deficit hypera</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">69</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2012-08</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">2815</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">415</td>
<td style="text-align: left;">289.81, 289.84, 453.0</td>
<td style="text-align: left;">Antiphospholipid antibody synd</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2013-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">2.5649494</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4090</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">150</td>
<td style="text-align: left;">490, 949.0</td>
<td style="text-align: left;">Bronchitis, Burn</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: left;">AMC BURN ICU</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">64</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-03</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">4282</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">195</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-05</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4800</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">365</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: left;">AMC M/S PROG CARE UNIT</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2014-08</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">1.7917595</td>
</tr>
<tr class="even">
<td style="text-align: right;">6342</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">452</td>
<td style="text-align: left;">Portal vein thrombosis</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-06</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6412</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">66</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-06</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">6447</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">78</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">TRANSFER TO CANCER OR CHILDRENS</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">68</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6479</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">55</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">49</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2015-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">7512</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">80</td>
<td style="text-align: left;">244.9, 278.00, 415.19</td>
<td style="text-align: left;">Acquired hypothyroidism, Con</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC PULM UNIT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-02</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8292</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">53</td>
<td style="text-align: left;">345.90, 625.8, 780.02</td>
<td style="text-align: left;">Adnexal mass, Anticholinergic</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">PRE-ADMISSION</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-07</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="even">
<td style="text-align: right;">8779</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">191</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Suicide attempt by drug inges</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">89</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">20.00</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">33.33</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2016-10</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">1.0986123</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9152</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">430</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">Pneumonia of both lungs due t</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC CARDIOTHORACIC ICU</td>
<td style="text-align: left;">AMC MED SPEC UNIT</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">229</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">167</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-01</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">2.1972246</td>
<td style="text-align: right;">0.6931472</td>
</tr>
<tr class="even">
<td style="text-align: right;">9398</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">91</td>
<td style="text-align: left;">977.9</td>
<td style="text-align: left;">Intentional drug overdose (HC</td>
<td style="text-align: left;">Court/Law Enforcement</td>
<td style="text-align: left;">AMC EMERGENCY</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">66.67</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-02</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">-Inf</td>
<td style="text-align: right;">0.6931472</td>
<td style="text-align: right;">-Inf</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9793</td>
<td style="text-align: left;">F</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">74</td>
<td style="text-align: left;">453.40</td>
<td style="text-align: left;">DVT (deep venous thrombosis</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC IR</td>
<td style="text-align: left;">AMC MED HLTH SVC UNIT</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">42</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">52</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2017-05</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: right;">12029</td>
<td style="text-align: left;">M</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">61</td>
<td style="text-align: left;">453.42</td>
<td style="text-align: left;">DVT of lower extremity (deep v</td>
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: left;">AMC CARD PRE/POST PROC</td>
<td style="text-align: left;">POST-DISCHARGE</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">47</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">53</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: left;">Negative Age</td>
<td style="text-align: left;">2018-09</td>
<td style="text-align: left;">14-42</td>
<td style="text-align: right;">3.78419</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">-Inf</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I don’t see any pattern.</p>
<p>Let’s plot the counts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot counts</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> Age_Range, <span class="at">fill =</span> Age_Range)) <span class="sc">+</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Count by Age Range"</span>,</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>,</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Age Range"</span>) <span class="sc">+</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We have a sufficient size for each group and can use age range as a covariate.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-15" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-15-tab">
<p>This is just a different variable for age, where they divided the sample up by quartiles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check counts</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span>Age_Quartile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
14-42 43-56 57-66   67+ 
 1379  1637  1652  1761 </code></pre>
</div>
</div>
<p>We can use either age variables, it really shouldn’t matter unless there is some important clinical distinction that is driving up their divisions in <code>Age_Range</code>.</p>
<p><a href="#Clean">Top of Tabset</a></p>
</div>
<div id="tabset-2-16" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-16-tab">
<p><code>Admit_MonthYear</code> is a character. Let’s go ahead and convert to datetime using <code>lubridate</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert admit month year to datetime</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Admit_MonthYear =</span> <span class="fu">ym</span>(Admit_MonthYear))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we can plot how many patients were admitted each month.</p>
<p>We can also highlight the timeframe of the quality improvement iniative to visualize pre-, intra-, and post- periods.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the time periods to highlight</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>highlight_periods <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2015-04-01"</span>)),</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">end =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">"2016-01-01"</span>))</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> count)) <span class="sc">+</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Admissions Over Time"</span>,</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It does not appear that the number of patients admitted throughout the year really changed that drastically. I don’t think we will have to control for this.</p>
</div>
</div>
</div>
</section>
<section id="Creation" class="level2">
<h2 class="anchored" data-anchor-id="Creation">Variable Creation</h2>
<p>Here we will create any variables necessary for our analysis</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Mechanical Ventilation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Received Physical Therapy Variable Creation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">QI-Initiative Time Period</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>The researcher expressed that patients would be stratified on Mechanical ventilation v. NO mechanical ventilation. However, I do not see this variable. Let’s go ahead and create it, assuming that patients with NA for <code>MV_TOTAL</code> were simply never on mechanical ventilation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dummy code MV status </span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(data_ex<span class="sc">$</span>MV_Total), <span class="dv">0</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check that worked as intended.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter down to variables of interest to verify dummy coding worked</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>check <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, MV_Total, MV_YN)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pretty print</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(check), <span class="at">format =</span> <span class="st">"html"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"condensed"</span>, <span class="st">"stripe"</span>, <span class="st">"hover"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-condensed table-striped table-hover caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_Total</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">MV_YN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">3</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">8</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<p><a href="#Creation">Top of Tabset</a></p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>Let’s create a dummy variable for whether patients received PT or not.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create variable for reception of PT</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YN =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>), <span class="dv">1</span>,</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">ifelse</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)))</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check calculations</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, PT_YN) <span class="sc">|&gt;</span> </span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">AVG THERAPY LENGTH</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DAYS WITH THERAPY VISITS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">PT_YN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">27</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">17</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">25</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to factor for better plotting later on</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PT_YN =</span> <span class="fu">as.factor</span>(PT_YN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Looks good, not we can answer one of their research questions of whether PT enrollment increased after the intervention.</p>
<p><a href="#Creation">Top of Tabset</a></p>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>Let’s group participants into the time period that they were present during the initiative for.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create new variable based on QI initiative time period.</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">initiative =</span> <span class="fu">ifelse</span>(Admit_MonthYear <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>), <span class="st">"Pre"</span>,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">ifelse</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>), <span class="st">"Post"</span>, <span class="st">"During"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s double check we did that right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check counts</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data_ex<span class="sc">$</span>initiative)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
During   Post    Pre 
   661   2871   2897 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&lt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Admit_MonthYear)) <span class="sc">|&gt;</span> </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5759</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5760</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5761</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5763</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5765</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
<tr class="even">
<td style="text-align: right;">5767</td>
<td style="text-align: left;">2015-03-01</td>
<td style="text-align: left;">Pre</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-04-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">6094</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6096</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6099</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6100</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6105</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">6106</td>
<td style="text-align: left;">2015-05-01</td>
<td style="text-align: left;">During</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;=</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7167</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7169</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7171</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7172</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7174</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
<tr class="even">
<td style="text-align: right;">7176</td>
<td style="text-align: left;">2015-12-01</td>
<td style="text-align: left;">During</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Double check assigning</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(id, Admit_MonthYear, initiative) <span class="sc">|&gt;</span> </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Admit_MonthYear <span class="sc">&gt;</span> <span class="fu">as.Date</span>(<span class="st">"2015-12-01"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span> </span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pretty_print</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">id</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Admit_MonthYear</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">7324</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7331</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7336</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7339</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7343</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
<tr class="even">
<td style="text-align: right;">7345</td>
<td style="text-align: left;">2016-01-01</td>
<td style="text-align: left;">Post</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Looks good.</p>
<p><a href="#Creation">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
</section>
<section id="univariate-distributions" class="level1">
<h1>Univariate Distributions</h1>
<p>Here we will explore the univariate distributions of our variables to assess data quality using histograms and qqplots.</p>
<section id="Outcome_Variables" class="level2">
<h2 class="anchored" data-anchor-id="Outcome_Variables">Outcome Variables</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Mechanical Ventilation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">MICU Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Hospital Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Non-ICU Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-5" role="tab" aria-controls="tabset-4-5" aria-selected="false">Discharge Location</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>First we will begin with mechanical ventilation time (MV)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s some severe right skewness! Is that logarithmic? Let’s try and transform and see what happens.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a log transform of mechanical ventilation time and plot</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_Total_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>MV_Total)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total_log"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s better. Maybe try a square root transformation?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform a sqrt transformation and plot</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_Total_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(data_ex<span class="sc">$</span>MV_Total)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"MV_Total_sqrt"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That looks worse. Out of curiosity I’m going to try using the bestNormalize package I’ve been learning to see if it can recommend the best tranformation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>MV_Total)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `progress_estimated()` was deprecated in dplyr 1.0.0.
ℹ The deprecated feature was likely used in the bestNormalize package.
  Please report the issue to the authors.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 3263 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 24.5203
 - Box-Cox: 24.6427
 - Center+scale: 23.8378
 - Double Reversed Log_b(x+a): 26.4574
 - Exp(x): 343.4392
 - Log_b(x+a): 24.5281
 - orderNorm (ORQ): 24.0428
 - sqrt(x + a): 24.1975
 - Yeo-Johnson: 24.8401
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
center_scale(x) Transformation with 3263 nonmissing obs.
 Estimated statistics:
 - mean (before standardization) = 6.101747 
 - sd (before standardization) = 5.112296 </code></pre>
</div>
</div>
<p>The short explanation of how these values work is that the value closest to 1 is the best transformation, but these are all VERY far from one. So that didn’t help.</p>
<section id="boxplot" class="level4">
<h4 class="anchored" data-anchor-id="boxplot">Boxplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create boxplot to assess for outliers</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> MV_Total_log)) <span class="sc">+</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot of MV Total Log"</span>,</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MV Total Log"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are also no outliers for <code>MV_Total_Log!</code></p>
</section>
<section id="summary-7" class="level4">
<h4 class="anchored" data-anchor-id="summary-7">Summary</h4>
<p>It looks like the best option we have is a log transformation of <code>MV TOTAL</code>.</p>
<p>Alternatively, we will likely end up running a Poisson or Negative Binomial regression to handle this data.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s super skewed as well! Let’s try a log transform.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform of MICU LOS</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>Unit_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>Unit_LOS)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS_log"</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We’ve got more of an S shape going there. I wonder if a BoxCox transformation is more appropriate?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bestNormalize)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use bestNormalize to try to find best transformation</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>Unit_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 6429 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 9.1149
 - Box-Cox: 5.619
 - Center+scale: 33.7925
 - Double Reversed Log_b(x+a): 58.057
 - Log_b(x+a): 9.1133
 - orderNorm (ORQ): 1.3112
 - sqrt(x + a): 19.7736
 - Yeo-Johnson: 5.6601
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
orderNorm Transformation with 6429 nonmissing obs and ties
 - 515 unique values 
 - Original quantiles:
  0%  25%  50%  75% 100% 
  48   66   95  167  720 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform boxcox transformation</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>Unit_LOS_boxcox <span class="ot">&lt;-</span> <span class="fu">boxcox</span>(data_ex<span class="sc">$</span>Unit_LOS)<span class="sc">$</span>x.t</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"Unit_LOS_boxcox"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create boxplot to assess for outliers</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> Unit_LOS_boxcox)) <span class="sc">+</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There are no outliers for boxcox Unit LOS.</p>
<p>That histogram looks better at least, and we don’t have any outliers. The bestNormalize package offers ways to back transform after you run your analysis, but I haven’t gotten that far in learning it yet. It looks like a boxcox transformation is a candidate however.</p>
<section id="summary-8" class="level4">
<h4 class="anchored" data-anchor-id="summary-8">Summary</h4>
<p>This odd distribution will be handled later with a negative binomial regression.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"`HOSPITAL LOS`"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>Hospital LOS</code> also looks logarithmic.</p>
<p>Let’s transform and assess.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform </span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>HOSPITAL_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>)</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"HOSPITAL_LOS_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">y =</span> HOSPITAL_LOS_log)) <span class="sc">+</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-59-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks good! There are a handful of outliers in there, but the data looks normal and those values will likely be included.</p>
<section id="summary-9" class="level4">
<h4 class="anchored" data-anchor-id="summary-9">Summary</h4>
<p><code>HOSPITAL LOS</code> is normal after a log transform. We will either perform that or a Poisson or Negative Binomial <a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<p>We must compute <code>NON_ICU_LOS</code> by subtracting <code>Unit_LOS</code> from <code>HOSPITAL LOS</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute variable for non icu LOS.</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NON_ICU_LOS =</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">-</span> Unit_LOS)</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As expected, that looks exponential.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_log <span class="ot">&lt;-</span> <span class="fu">log</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_log"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_qq()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 106 rows containing non-finite outside the scale range
(`stat_qq_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That’s bimodal. Odd.</p>
<p>Let’s try a square root transform</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform log transform</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_sqrt <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_sqrt"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks crummy.</p>
<p>Let’s try bestNormalize</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>BNobject <span class="ot">&lt;-</span> <span class="fu">bestNormalize</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>BNobject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Best Normalizing transformation with 6429 Observations
 Estimated Normality Statistics (Pearson P / df, lower =&gt; more normal):
 - arcsinh(x): 7.1234
 - Center+scale: 51.799
 - Double Reversed Log_b(x+a): 56.0467
 - Log_b(x+a): 8.7476
 - orderNorm (ORQ): 1.6938
 - sqrt(x + a): 10.4875
 - Yeo-Johnson: 5.3559
Estimation method: Out-of-sample via CV with 10 folds and 5 repeats
 
Based off these, bestNormalize chose:
orderNorm Transformation with 6429 nonmissing obs and ties
 - 1045 unique values 
 - Original quantiles:
  0%  25%  50%  75% 100% 
   0   32  110  284 9206 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform boxcox transformation</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>NON_ICU_LOS_yeo <span class="ot">&lt;-</span> <span class="fu">yeojohnson</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)<span class="sc">$</span>x.t</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create histogram and qqplot</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="fu">distr_plots</span>(data_ex, <span class="st">"NON_ICU_LOS_yeo"</span>, <span class="dv">25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks better! Still bimodal but much more normal.</p>
<section id="summary-10" class="level4">
<h4 class="anchored" data-anchor-id="summary-10">Summary</h4>
<p>Looks like Yeo-Johnson transformation may be the way to go.</p>
<p><a href="#Outcome_Variables">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-4-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine discharge locations</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">table</span>(data_ex<span class="sc">$</span>DISCH_DISP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Var1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Acute IP to RPCU</td>
<td style="text-align: right;">5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Administrative Discharge</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Admitted as an Inpatient</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">Against Clinical Advice</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Another Health Care Institution Not Defined w/Planned Readmission</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Court/Law Enforcement</td>
<td style="text-align: right;">22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Discharge Lounge</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">Discharged to Other Facility</td>
<td style="text-align: right;">23</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Discharged/transferred to a Designated Cancer Center or Children’s Hospital</td>
<td style="text-align: right;">41</td>
</tr>
<tr class="even">
<td style="text-align: left;">Drug/Alch Detox D/C</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expired</td>
<td style="text-align: right;">1137</td>
</tr>
<tr class="even">
<td style="text-align: left;">Expired in Medical Facility</td>
<td style="text-align: right;">8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Expired Readmit as Organ Donor</td>
<td style="text-align: right;">7</td>
</tr>
<tr class="even">
<td style="text-align: left;">Federal Hospital</td>
<td style="text-align: right;">43</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home-Health Care Svc</td>
<td style="text-align: right;">758</td>
</tr>
<tr class="even">
<td style="text-align: left;">Home or Self Care</td>
<td style="text-align: right;">2417</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Home or Self Care w/Planned Readmission</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Hospice/Home</td>
<td style="text-align: right;">213</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Hospice/Medical Facility</td>
<td style="text-align: right;">211</td>
</tr>
<tr class="even">
<td style="text-align: left;">Intermediate Care Facility</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">IV Therapy Provider</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Left Against Medical Advice</td>
<td style="text-align: right;">49</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Long Term Care</td>
<td style="text-align: right;">451</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mental Health Facility</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Nursing Facility</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: left;">Psychiatric Hospital</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Rehab Facility</td>
<td style="text-align: right;">249</td>
</tr>
<tr class="even">
<td style="text-align: left;">Short Term Hospital</td>
<td style="text-align: right;">71</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Skilled Nursing Facility</td>
<td style="text-align: right;">596</td>
</tr>
<tr class="even">
<td style="text-align: left;">Swing Bed</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRANSFER TO CANCER OR CHILDRENS</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>There are a few options we have for to analyze discharge location.</p>
<ul>
<li>We can spit on expired vs not expired</li>
<li>We can split on hom vs other</li>
<li>We can just look at all the groups with the largest N, and collapse the rest into a single variable of ‘other’. This would be
<ul>
<li>Expired (1137), Home (3177), Hospice (424), long term care (451), rehab (249), skilled Nursing facility (596)</li>
</ul></li>
</ul>
<p>We will have to ask the researcher how she wants to group up these discharge locations! Keeping in mind that since we are looking at three different time periods, each group will essentially by a third of what is shown here.</p>
</div>
</div>
</div>
</section>
</section>
<section id="table-one" class="level1">
<h1>Table One</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up labels of variables.</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">PT_VISITS =</span> <span class="st">`</span><span class="at">TOTAL THERAPY VISITS</span><span class="st">`</span>,</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">PT_VISITS_PERC  =</span> <span class="st">`</span><span class="at">PERCENT OF DAYS WITH THERAPY VISITS</span><span class="st">`</span>,</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">DAYS_POST_MICU =</span> <span class="st">`</span><span class="at">ACTUAL DAYS POST MICU</span><span class="st">`</span>,</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">PT_POST_MICU =</span> <span class="st">`</span><span class="at">PT or OT VISIT DAYS POST MICU</span><span class="st">`</span>,</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">PERC_POST_ICU =</span> <span class="st">`</span><span class="at">PERCENT POST ICU DAYS THERAPY</span><span class="st">`</span>)</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Change label for age from 'negative age' to 'Missing'</span></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Age_Range =</span> <span class="fu">ifelse</span>(Age_Range <span class="sc">==</span> <span class="st">"Negative Age"</span>, <span class="st">"Missing"</span>, Age_Range))</span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create labels for variables to make the names of each variable more professional in outputs</span></span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>SEX) <span class="ot">&lt;-</span> <span class="st">"Sex"</span></span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>MV_Total) <span class="ot">&lt;-</span> <span class="st">"Total Mechanical Ventilation Time"</span></span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Hospital Length of Stay"</span></span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Time From Admit to Consult"</span></span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Time from Consult to Treatment"</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Time from Admit to Treatment"</span></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_VISITS) <span class="ot">&lt;-</span> <span class="st">"Total PT Visits"</span></span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>Unit_LOS) <span class="ot">&lt;-</span> <span class="st">"MICU Length of Stay"</span></span>
<span id="cb125-22"><a href="#cb125-22" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Days with PT Visits"</span></span>
<span id="cb125-23"><a href="#cb125-23" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_VISITS_PERC) <span class="ot">&lt;-</span> <span class="st">"% of Days with PT Visits"</span></span>
<span id="cb125-24"><a href="#cb125-24" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Average Therapy Length"</span></span>
<span id="cb125-25"><a href="#cb125-25" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Maximum Therapy Length"</span></span>
<span id="cb125-26"><a href="#cb125-26" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span>) <span class="ot">&lt;-</span> <span class="st">"Minimum Therapy Length"</span></span>
<span id="cb125-27"><a href="#cb125-27" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>DAYS_POST_MICU) <span class="ot">&lt;-</span> <span class="st">"Days Post MICU"</span></span>
<span id="cb125-28"><a href="#cb125-28" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_POST_MICU) <span class="ot">&lt;-</span> <span class="st">"PT Post MICU"</span></span>
<span id="cb125-29"><a href="#cb125-29" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PERC_POST_ICU) <span class="ot">&lt;-</span> <span class="st">"% Post MICU"</span></span>
<span id="cb125-30"><a href="#cb125-30" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>Age_Range) <span class="ot">&lt;-</span> <span class="st">"Age Range"</span></span>
<span id="cb125-31"><a href="#cb125-31" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>Age_Quartile) <span class="ot">&lt;-</span> <span class="st">"Age Quartile"</span></span>
<span id="cb125-32"><a href="#cb125-32" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>NON_ICU_LOS) <span class="ot">&lt;-</span> <span class="st">"NON-ICU Length of Stay"</span></span>
<span id="cb125-33"><a href="#cb125-33" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>PT_YN) <span class="ot">&lt;-</span> <span class="st">"Received PT"</span></span>
<span id="cb125-34"><a href="#cb125-34" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>MV_YN) <span class="ot">&lt;-</span> <span class="st">"Received Mechanical Ventilation"</span></span>
<span id="cb125-35"><a href="#cb125-35" aria-hidden="true" tabindex="-1"></a><span class="fu">label</span>(data_ex<span class="sc">$</span>initiative) <span class="ot">&lt;-</span> <span class="st">"QI Initiative Time Period"</span></span>
<span id="cb125-36"><a href="#cb125-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-37"><a href="#cb125-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Changing labels for clearer output</span></span>
<span id="cb125-38"><a href="#cb125-38" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>SEX <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>SEX, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>))</span>
<span id="cb125-39"><a href="#cb125-39" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>PT_YN <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>PT_YN, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span>, <span class="st">"Yes"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Table 1 stratified by QI initiative</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>table1 <span class="ot">&lt;-</span> <span class="fu">table1</span>(<span class="sc">~</span> SEX <span class="sc">+</span> MV_Total <span class="sc">+</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">+</span> PT_VISITS <span class="sc">+</span> Unit_LOS <span class="sc">+</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span> <span class="sc">+</span>  PT_VISITS_PERC <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">MIN THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span>  DAYS_POST_MICU <span class="sc">+</span> PT_POST_MICU <span class="sc">+</span> PERC_POST_ICU <span class="sc">+</span> Age_Range <span class="sc">+</span> Age_Quartile <span class="sc">+</span> NON_ICU_LOS <span class="sc">+</span>  PT_YN <span class="sc">+</span> MV_YN <span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">caption =</span> <span class="st">"Descriptive Statistics by QI-Initiative Time Period"</span>, <span class="at">overall =</span> <span class="fu">c</span>(<span class="at">left=</span><span class="st">"Total"</span>))</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>table1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="Rtable1">
<table class="Rtable1 caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Descriptive Statistics by QI-Initiative Time Period</caption>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th class="rowlabel firstrow lastrow" data-quarto-table-cell-role="th"></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">Total<br>
<span class="stratn">(N=6429)</span></span></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">During<br>
<span class="stratn">(N=661)</span></span></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">Post<br>
<span class="stratn">(N=2871)</span></span></th>
<th class="firstrow lastrow" data-quarto-table-cell-role="th"><span class="stratlabel">Pre<br>
<span class="stratn">(N=2897)</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td class="rowlabel firstrow">SEX</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Female</td>
<td>2920 (45.4%)</td>
<td>308 (46.6%)</td>
<td>1284 (44.7%)</td>
<td>1328 (45.8%)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Male</td>
<td class="lastrow">3509 (54.6%)</td>
<td class="lastrow">353 (53.4%)</td>
<td class="lastrow">1587 (55.3%)</td>
<td class="lastrow">1569 (54.2%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Total Mechanical Ventilation Time</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>6.10 (5.11)</td>
<td>6.24 (5.07)</td>
<td>6.10 (5.12)</td>
<td>6.06 (5.11)</td>
</tr>
<tr class="even">
<td class="rowlabel">Median [Min, Max]</td>
<td>4.00 [1.00, 31.0]</td>
<td>4.00 [1.00, 24.0]</td>
<td>4.00 [1.00, 31.0]</td>
<td>4.00 [1.00, 29.0]</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">3166 (49.2%)</td>
<td class="lastrow">322 (48.7%)</td>
<td class="lastrow">1245 (43.4%)</td>
<td class="lastrow">1599 (55.2%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Hospital Length of Stay</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>378 (429)</td>
<td>402 (516)</td>
<td>388 (436)</td>
<td>362 (398)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">247 [49.0, 9270]</td>
<td class="lastrow">266 [51.0, 9270]</td>
<td class="lastrow">255 [49.0, 6770]</td>
<td class="lastrow">241 [49.0, 6360]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Time From Admit to Consult</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>29.5 (67.6)</td>
<td>6.26 (21.4)</td>
<td>7.98 (30.3)</td>
<td>64.7 (92.6)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>0 [0, 905]</td>
<td>0 [0, 209]</td>
<td>0 [0, 501]</td>
<td>36.0 [0, 905]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">862 (13.4%)</td>
<td class="lastrow">20 (3.0%)</td>
<td class="lastrow">79 (2.8%)</td>
<td class="lastrow">763 (26.3%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Time from Consult to Treatment</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>105 (191)</td>
<td>98.3 (183)</td>
<td>105 (192)</td>
<td>107 (191)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>44.0 [-405, 3050]</td>
<td>41.5 [-189, 1770]</td>
<td>46.0 [-405, 3050]</td>
<td>40.0 [-18.0, 2110]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">2388 (37.1%)</td>
<td class="lastrow">89 (13.5%)</td>
<td class="lastrow">642 (22.4%)</td>
<td class="lastrow">1657 (57.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Time from Admit to Treatment</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>64.0 (66.0)</td>
<td>40.6 (33.1)</td>
<td>50.1 (41.6)</td>
<td>100 (93.4)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>44.0 [-1.00, 636]</td>
<td>32.0 [2.00, 296]</td>
<td>41.0 [-1.00, 477]</td>
<td>68.0 [1.00, 636]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">2372 (36.9%)</td>
<td class="lastrow">86 (13.0%)</td>
<td class="lastrow">630 (21.9%)</td>
<td class="lastrow">1656 (57.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Total PT Visits</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>1.78 (2.51)</td>
<td>3.18 (3.60)</td>
<td>2.41 (2.76)</td>
<td>0.828 (1.34)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">1.00 [0, 39.0]</td>
<td class="lastrow">2.00 [0, 27.0]</td>
<td class="lastrow">2.00 [0, 39.0]</td>
<td class="lastrow">0 [0, 17.0]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">MICU Length of Stay</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>139 (113)</td>
<td>140 (117)</td>
<td>139 (113)</td>
<td>138 (112)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">95.0 [48.0, 720]</td>
<td class="lastrow">94.0 [48.0, 692]</td>
<td class="lastrow">94.0 [48.0, 720]</td>
<td class="lastrow">95.0 [48.0, 717]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Days with PT Visits</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>1.69 (2.29)</td>
<td>2.92 (3.13)</td>
<td>2.30 (2.50)</td>
<td>0.802 (1.29)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">1.00 [0, 23.0]</td>
<td class="lastrow">2.00 [0, 23.0]</td>
<td class="lastrow">2.00 [0, 22.0]</td>
<td class="lastrow">0 [0, 16.0]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">% of Days with PT Visits</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>30.0 (30.4)</td>
<td>50.5 (30.4)</td>
<td>41.1 (30.8)</td>
<td>14.3 (20.8)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">25.0 [0, 100]</td>
<td class="lastrow">50.0 [0, 100]</td>
<td class="lastrow">40.0 [0, 100]</td>
<td class="lastrow">0 [0, 100]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Average Therapy Length</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>20.7 (19.0)</td>
<td>28.3 (15.5)</td>
<td>26.5 (17.9)</td>
<td>13.3 (18.0)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>22.0 [0, 97.0]</td>
<td>30.0 [0, 90.0]</td>
<td>29.0 [0, 97.0]</td>
<td>0 [0, 90.0]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">8 (0.1%)</td>
<td class="lastrow">1 (0.2%)</td>
<td class="lastrow">4 (0.1%)</td>
<td class="lastrow">3 (0.1%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Maximum Therapy Length</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>25.5 (24.4)</td>
<td>37.5 (22.6)</td>
<td>33.3 (24.0)</td>
<td>15.1 (20.8)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>25.0 [0, 140]</td>
<td>38.0 [0, 140]</td>
<td>35.0 [0, 117]</td>
<td>0 [0, 110]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">8 (0.1%)</td>
<td class="lastrow">1 (0.2%)</td>
<td class="lastrow">4 (0.1%)</td>
<td class="lastrow">3 (0.1%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Minimum Therapy Length</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>16.4 (16.4)</td>
<td>20.3 (14.0)</td>
<td>20.3 (15.7)</td>
<td>11.6 (16.4)</td>
</tr>
<tr class="odd">
<td class="rowlabel">Median [Min, Max]</td>
<td>15.0 [0, 97.0]</td>
<td>20.0 [0, 83.0]</td>
<td>20.0 [0, 97.0]</td>
<td>0 [0, 90.0]</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">2 (0.0%)</td>
<td class="lastrow">0 (0%)</td>
<td class="lastrow">1 (0.0%)</td>
<td class="lastrow">1 (0.0%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Days Post MICU</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>6.69 (13.4)</td>
<td>7.65 (18.7)</td>
<td>7.05 (13.6)</td>
<td>6.11 (11.5)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">3.00 [0, 383]</td>
<td class="lastrow">4.00 [0, 383]</td>
<td class="lastrow">3.00 [0, 278]</td>
<td class="lastrow">2.00 [0, 175]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">PT Post MICU</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>1.74 (3.53)</td>
<td>2.20 (4.07)</td>
<td>1.78 (3.36)</td>
<td>1.58 (3.54)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">0 [0, 43.0]</td>
<td class="lastrow">1.00 [0, 37.0]</td>
<td class="lastrow">0 [0, 43.0]</td>
<td class="lastrow">0 [0, 43.0]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">% Post MICU</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">Mean (SD)</td>
<td>18.2 (24.9)</td>
<td>21.9 (25.8)</td>
<td>18.5 (24.8)</td>
<td>17.0 (24.6)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">0 [0, 100]</td>
<td class="lastrow">14.3 [0, 100]</td>
<td class="lastrow">0 [0, 100]</td>
<td class="lastrow">0 [0, 100]</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Age Range</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">18-39</td>
<td>1121 (17.4%)</td>
<td>103 (15.6%)</td>
<td>533 (18.6%)</td>
<td>485 (16.7%)</td>
</tr>
<tr class="even">
<td class="rowlabel">40-49</td>
<td>899 (14.0%)</td>
<td>111 (16.8%)</td>
<td>373 (13.0%)</td>
<td>415 (14.3%)</td>
</tr>
<tr class="odd">
<td class="rowlabel">50-59</td>
<td>1492 (23.2%)</td>
<td>141 (21.3%)</td>
<td>620 (21.6%)</td>
<td>731 (25.2%)</td>
</tr>
<tr class="even">
<td class="rowlabel">60-69</td>
<td>1574 (24.5%)</td>
<td>169 (25.6%)</td>
<td>722 (25.1%)</td>
<td>683 (23.6%)</td>
</tr>
<tr class="odd">
<td class="rowlabel">70+</td>
<td>1327 (20.6%)</td>
<td>133 (20.1%)</td>
<td>616 (21.5%)</td>
<td>578 (20.0%)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Missing</td>
<td class="lastrow">16 (0.2%)</td>
<td class="lastrow">4 (0.6%)</td>
<td class="lastrow">7 (0.2%)</td>
<td class="lastrow">5 (0.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">Age Quartile</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">14-42</td>
<td>1379 (21.4%)</td>
<td>136 (20.6%)</td>
<td>633 (22.0%)</td>
<td>610 (21.1%)</td>
</tr>
<tr class="odd">
<td class="rowlabel">43-56</td>
<td>1637 (25.5%)</td>
<td>169 (25.6%)</td>
<td>668 (23.3%)</td>
<td>800 (27.6%)</td>
</tr>
<tr class="even">
<td class="rowlabel">57-66</td>
<td>1652 (25.7%)</td>
<td>179 (27.1%)</td>
<td>740 (25.8%)</td>
<td>733 (25.3%)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">67+</td>
<td class="lastrow">1761 (27.4%)</td>
<td class="lastrow">177 (26.8%)</td>
<td class="lastrow">830 (28.9%)</td>
<td class="lastrow">754 (26.0%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">NON-ICU Length of Stay</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>239 (404)</td>
<td>262 (497)</td>
<td>249 (411)</td>
<td>224 (371)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">110 [0, 9210]</td>
<td class="lastrow">125 [0, 9210]</td>
<td class="lastrow">117 [0, 6680]</td>
<td class="lastrow">102 [0, 6310]</td>
</tr>
<tr class="odd">
<td class="rowlabel firstrow">PT_YN</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="even">
<td class="rowlabel">No</td>
<td>2374 (36.9%)</td>
<td>86 (13.0%)</td>
<td>630 (21.9%)</td>
<td>1658 (57.2%)</td>
</tr>
<tr class="odd">
<td class="rowlabel lastrow">Yes</td>
<td class="lastrow">4055 (63.1%)</td>
<td class="lastrow">575 (87.0%)</td>
<td class="lastrow">2241 (78.1%)</td>
<td class="lastrow">1239 (42.8%)</td>
</tr>
<tr class="even">
<td class="rowlabel firstrow">Received Mechanical Ventilation</td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
<td class="firstrow"></td>
</tr>
<tr class="odd">
<td class="rowlabel">Mean (SD)</td>
<td>0.508 (0.500)</td>
<td>0.513 (0.500)</td>
<td>0.566 (0.496)</td>
<td>0.448 (0.497)</td>
</tr>
<tr class="even">
<td class="rowlabel lastrow">Median [Min, Max]</td>
<td class="lastrow">1.00 [0, 1.00]</td>
<td class="lastrow">1.00 [0, 1.00]</td>
<td class="lastrow">1.00 [0, 1.00]</td>
<td class="lastrow">0 [0, 1.00]</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: now that table 1 is complete we can set those patients with "negative age" to `NA`s.</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Set negative age to NA</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Age_Range =</span> <span class="fu">ifelse</span>(Age_Range <span class="sc">==</span> <span class="st">"Missing"</span>, <span class="cn">NA</span>, Age_Range))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="correlation-matrix" class="level1">
<h1>Correlation Matrix</h1>
<section id="remove-variables" class="level4">
<h4 class="anchored" data-anchor-id="remove-variables">Remove Variables</h4>
<p>Here we will remove variables we will not be using in the analysis as previously discussed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter dataset for correlation matrix</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>data_sub <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">PROBLEM LIST DX CODES</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">PROBLEM LIST DX NAMES</span><span class="st">`</span>, <span class="sc">-</span>DISCH_DISP, <span class="sc">-</span><span class="st">`</span><span class="at">DEPT BEFORE Unit</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">DEPT AFTER Unit</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">CONSULT TO TREAT</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="sc">-</span> ACTUAL_DAYS_POST_MICU_log, <span class="sc">-</span> ADMIT_TO_CONSULT_log, <span class="sc">-</span>TOTAL_THERAPY_VISITS_log, <span class="sc">-</span>PT_YN, <span class="sc">-</span>initiative)</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>data_sub <span class="ot">&lt;-</span> data_sub[,<span class="dv">1</span><span class="sc">:</span><span class="dv">22</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's clean our output by making a trimmed dataset excluding extraneous variables</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>data_for_matrix <span class="ot">&lt;-</span> data_sub <span class="sc">|&gt;</span> </span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>Age_Range, <span class="sc">-</span>Admit_MonthYear, <span class="sc">-</span>Age_Quartile, <span class="sc">-</span>Unit_LOS_log, <span class="sc">-</span>MV_Total_sqrt, <span class="sc">-</span>MV_Total_log, <span class="sc">-</span> MV_YN) <span class="sc">|&gt;</span> </span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Unit_LOS, MV_Total, <span class="fu">everything</span>())</span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="co"># We factored our variables at the start. To make a correlation matrix we must reconvert those back to numeric</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>data_for_matrix <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">lapply</span>(data_for_matrix, <span class="cf">function</span>(x) <span class="cf">if</span> (<span class="fu">is.factor</span>(x)) <span class="fu">as.numeric</span>(x) <span class="cf">else</span> x))</span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a correlation matrix with all variables of the trimmed data set</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a>correlation_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(data_for_matrix, <span class="at">use =</span> <span class="st">"complete.obs"</span>)</span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the matrix</span></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(correlation_matrix, <span class="at">method =</span> <span class="st">"color"</span>, <span class="at">addCoef.col =</span> <span class="st">"Black"</span>, <span class="at">tl.cex =</span> <span class="fl">0.8</span>, <span class="at">number.cex =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="main-obserations" class="level4">
<h4 class="anchored" data-anchor-id="main-obserations">Main Obserations</h4>
<p>The variables that are most correlated with our outcome variables of <code>UNIT_LOS</code> and <code>MV_Total</code> are:</p>
<ul>
<li><code>HOSPITAL_LOS</code></li>
<li><code>ADMIT.TO.CONSULT</code></li>
<li><code>PT_VISITS</code></li>
<li><code>DAYS.WITH.THERAPY.VISITS</code></li>
<li><code>AVERAGE THERAPY LENGTH</code></li>
<li><code>MAX THERAPY LENGTH</code></li>
</ul>
<p>These will be important to examine and potentially control for in our modelS.</p>
</section>
</section>
<section id="Bi" class="level1">
<h1>Bivariate Comparisons</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Hospital Length of Stay</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Admit to Consult Time</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Physical Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Days with Therapy Visits</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-5" role="tab" aria-controls="tabset-5-5" aria-selected="false">Average Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-6" role="tab" aria-controls="tabset-5-6" aria-selected="false">Maximum Therapy Length</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-7" role="tab" aria-controls="tabset-5-7" aria-selected="false">Admit to Consult</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Hospital Length of Stay"</span>,</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Hospital Length of Stay"</span>,</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is an interesting shape! This sharp pattern is because some patients were admitted directly into the MICU. So there is a 1 to 1 connection between their hospital length of stay and MICU length of stay.</p>
<p>Basically we probably can’t use <code>UNIT_LOS</code> as a covariate in this model because it is so intrinsically intertwined with <code>MICU LOS</code>.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<section id="micu-length-of-stay-1" class="level3">
<h3 class="anchored" data-anchor-id="micu-length-of-stay-1">MICU Length of Stay</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Admit to Consult Time"</span>,</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit to Consult Time"</span>,</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 862 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can see that a lot of patients that were in the hospital did not receive a consult (values= 0). We may have to filter these patients out or run a zero-inflated regression.</p>
<p>The longer it took between a patient’s admit to consult the longer they stayed in the MICU.</p>
<section id="total-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation">Total Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total Mechanical Ventilation Time by Admit to Consult Time"</span>,</span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit to Consult Time"</span>,</span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3541 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3541 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-73-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `ADMIT TO CONSULT`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-13.803  -3.698  -1.698   1.302  25.302 

Coefficients:
                   Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)        5.697910   0.102746   55.46 &lt;0.0000000000000002 ***
`ADMIT TO CONSULT` 0.013812   0.001163   11.87 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.042 on 2886 degrees of freedom
  (3541 observations deleted due to missingness)
Multiple R-squared:  0.04656,   Adjusted R-squared:  0.04623 
F-statistic: 140.9 on 1 and 2886 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Similarly, many patients that were not mechanically ventilated.</p>
<p>Otherwise there is a strong linear relationship here.</p>
<p>The longer it took between a patient’s admit to consult the more time they spent mechanically ventilated.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<section id="micu-length-of-stay-2" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-2">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Hospital Length of Stay"</span>,</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Number of PT Visits"</span>,</span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> PT_VISITS, <span class="at">data =</span> data_ex)</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ PT_VISITS, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-550.70  -52.52  -27.32   23.08  590.68 

Coefficients:
            Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)  93.3168     1.4189   65.77 &lt;0.0000000000000002 ***
PT_VISITS    25.5992     0.4609   55.54 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 92.93 on 6427 degrees of freedom
Multiple R-squared:  0.3243,    Adjusted R-squared:  0.3242 
F-statistic:  3085 on 1 and 6427 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>This makes sense, patients that needed more intense and frequent PT visits did so because they had more extreme conditions and therefore stayed longer in the MICU.</p>
</section>
<section id="total-mechanical-ventilation-time" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation-time">Total Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mechanical Ventilation Time by Number of PT Visits"</span>,</span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Number of PT Visits"</span>,</span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-77-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> PT_VISITS, <span class="at">data =</span> data_ex)</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ PT_VISITS, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-17.226  -2.926  -1.445   1.555  24.555 

Coefficients:
            Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)  4.44472    0.09995   44.47 &lt;0.0000000000000002 ***
PT_VISITS    0.74087    0.02654   27.92 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.594 on 3261 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  0.1929,    Adjusted R-squared:  0.1927 
F-statistic: 779.4 on 1 and 3261 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Patients that had more PT visits had more time on mechanical ventilation, but they probably had more PT visits BECAUSE they were mechanically ventilated.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<section id="micu-length-of-stay-3" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-3">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Days with Therapy Visits"</span>,</span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Days with Therapy Visits"</span>,</span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ `DAYS WITH THERAPY VISITS`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-154.48  -53.74  -25.99   23.14  594.01 

Coefficients:
                           Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)                 89.9908     1.4213   63.32 &lt;0.0000000000000002 ***
`DAYS WITH THERAPY VISITS`  28.9367     0.5005   57.81 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 91.69 on 6427 degrees of freedom
Multiple R-squared:  0.3421,    Adjusted R-squared:  0.342 
F-statistic:  3342 on 1 and 6427 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>This is basically the same variables as <code>PT_VISITS</code>.</p>
</section>
<section id="mechanical-ventilation-time" class="level4">
<h4 class="anchored" data-anchor-id="mechanical-ventilation-time">Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mechanical Ventilation Time by Number of PT Visits"</span>,</span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Number of PT Visits"</span>,</span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3166 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">DAYS WITH THERAPY VISITS</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `DAYS WITH THERAPY VISITS`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-15.858  -3.002  -1.308   1.692  24.692 

Coefficients:
                           Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)                 4.30784    0.10094   42.68 &lt;0.0000000000000002 ***
`DAYS WITH THERAPY VISITS`  0.84686    0.02918   29.02 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.558 on 3261 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  0.2053,    Adjusted R-squared:  0.205 
F-statistic: 842.2 on 1 and 3261 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-5-tab">
<section id="micu-length-of-stay-4" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-4">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Average Therapy Length"</span>,</span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average Therapy Length"</span>,</span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-83-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ `AVG THERAPY LENGTH`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-192.34  -60.60  -36.47   26.57  576.25 

Coefficients:
                      Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          107.74921    2.02087   53.32 &lt;0.0000000000000002 ***
`AVG THERAPY LENGTH`   1.49068    0.07199   20.71 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 109.3 on 6419 degrees of freedom
  (8 observations deleted due to missingness)
Multiple R-squared:  0.06262,   Adjusted R-squared:  0.06247 
F-statistic: 428.8 on 1 and 6419 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Weaker but significant relationship.</p>
</section>
<section id="total-mechanical-ventilation-time-1" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation-time-1">Total Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Average Therapy Length"</span>,</span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Average Therapy Length"</span>,</span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `AVG THERAPY LENGTH`, data = data_ex)

Residuals:
   Min     1Q Median     3Q    Max 
-7.799 -3.204 -1.743  1.937 24.095 

Coefficients:
                     Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          5.056876   0.135267   37.38 &lt;0.0000000000000002 ***
`AVG THERAPY LENGTH` 0.046198   0.004582   10.08 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.029 on 3256 degrees of freedom
  (3171 observations deleted due to missingness)
Multiple R-squared:  0.03028,   Adjusted R-squared:  0.02998 
F-statistic: 101.7 on 1 and 3256 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Significant but weak. We should control for <code>Average therapy length</code>.</p>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-6-tab">
<section id="micu-length-of-stay-5" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-5">MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> Unit_LOS)) <span class="sc">+</span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Max Therapy Length"</span>,</span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Max Therapy Length"</span>,</span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"MICU Length of stay"</span>) <span class="sc">+</span></span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 8 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ `MAX THERAPY LENGTH`, data = data_ex)

Residuals:
    Min      1Q  Median      3Q     Max 
-223.39  -62.47  -29.45   26.55  587.55 

Coefficients:
                     Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          96.45479    1.90712   50.58 &lt;0.0000000000000002 ***
`MAX THERAPY LENGTH`  1.65082    0.05402   30.56 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 105.5 on 6419 degrees of freedom
  (8 observations deleted due to missingness)
Multiple R-squared:  0.127, Adjusted R-squared:  0.1269 
F-statistic:   934 on 1 and 6419 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
</section>
<section id="total-mechanical-ventilation-time-2" class="level4">
<h4 class="anchored" data-anchor-id="total-mechanical-ventilation-time-2">Total Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scatterplot</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(data_ex, <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">y =</span> MV_Total)) <span class="sc">+</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"MICU Length of Stay by Maximum Therapy Length"</span>,</span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Maximum Therapy Length"</span>,</span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Total Mechanical Ventilation Time"</span>) <span class="sc">+</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing non-finite outside the scale range
(`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3171 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-89-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the regression</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> <span class="st">`</span><span class="at">MAX THERAPY LENGTH</span><span class="st">`</span>, <span class="at">data =</span> data_ex)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ `MAX THERAPY LENGTH`, data = data_ex)

Residuals:
   Min     1Q Median     3Q    Max 
-7.855 -3.249 -1.570  1.573 24.430 

Coefficients:
                     Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept)          4.570439   0.129017   35.42 &lt;0.0000000000000002 ***
`MAX THERAPY LENGTH` 0.052895   0.003337   15.85 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 4.921 on 3256 degrees of freedom
  (3171 observations deleted due to missingness)
Multiple R-squared:  0.07163,   Adjusted R-squared:  0.07134 
F-statistic: 251.2 on 1 and 3256 DF,  p-value: &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p><a href="#Bi">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-5-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-7-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">ADMIT_TO_CONSULT_avg =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ADMIT TO CONSULT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> ADMIT_TO_CONSULT_avg)) <span class="sc">+</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>,) <span class="sc">+</span></span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Admit to Consult over Time"</span>,</span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Time from Admit to Consult"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-91-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They also successfully decreased the time from admit to consult. Megan may be interested in this.</p>
</div>
</div>
</div>
</section>
<section id="seasonality" class="level1">
<h1>Seasonality</h1>
<p>The investigator is concerned about seasonality effects, let’s investigate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First we need to create variables for month and year</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">year</span>(Admit_MonthYear),</span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Month =</span> <span class="fu">as.factor</span>(<span class="fu">month</span>(Admit_MonthYear)))</span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Month) <span class="sc">|&gt;</span> </span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> avg_Unit_LOS, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS per Year"</span>,</span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="predicting-micu-length-of-stay" class="level4">
<h4 class="anchored" data-anchor-id="predicting-micu-length-of-stay">Predicting MICU Length of Stay</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a simple regression predicting MICU LOS with admission month</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Unit_LOS <span class="sc">~</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Unit_LOS ~ Month, data = data_ex)

Residuals:
   Min     1Q Median     3Q    Max 
-98.67 -72.96 -43.04  27.54 589.78 

Coefficients:
            Estimate Std. Error t value            Pr(&gt;|t|)    
(Intercept) 144.2682     4.7611  30.301 &lt;0.0000000000000002 ***
Month2       -0.4305     6.8372  -0.063              0.9498    
Month3      -14.0515     6.6668  -2.108              0.0351 *  
Month4       -3.1580     6.6557  -0.474              0.6352    
Month5      -16.2273     6.8953  -2.353              0.0186 *  
Month6       -4.8042     7.1044  -0.676              0.4989    
Month7      -12.3337     7.0462  -1.750              0.0801 .  
Month8       -8.1740     6.8710  -1.190              0.2342    
Month9       -0.5399     6.8372  -0.079              0.9371    
Month10     -10.3081     6.6951  -1.540              0.1237    
Month11       1.0183     6.8472   0.149              0.8818    
Month12       2.4044     6.7362   0.357              0.7212    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 113 on 6417 degrees of freedom
Multiple R-squared:  0.002991,  Adjusted R-squared:  0.001282 
F-statistic:  1.75 on 11 and 6417 DF,  p-value: 0.05702</code></pre>
</div>
</div>
<p>Admission month is a marginally significant predictor of the main outcome variable <code>Unit_LOS</code>.</p>
</section>
<section id="predicting-mechanical-ventilation-time" class="level4">
<h4 class="anchored" data-anchor-id="predicting-mechanical-ventilation-time">Predicting Mechanical Ventilation Time</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run a simple regression predicting MICU LOS with admission month</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(MV_Total <span class="sc">~</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = MV_Total ~ Month, data = data_ex)

Residuals:
   Min     1Q Median     3Q    Max 
-5.677 -3.374 -1.821  1.762 25.091 

Coefficients:
            Estimate Std. Error t value             Pr(&gt;|t|)    
(Intercept)  6.66454    0.28853  23.098 &lt; 0.0000000000000002 ***
Month2      -0.51870    0.41681  -1.244              0.21342    
Month3      -0.75545    0.42191  -1.791              0.07346 .  
Month4      -0.43454    0.41244  -1.054              0.29216    
Month5      -1.18983    0.42970  -2.769              0.00566 ** 
Month6      -0.42624    0.44060  -0.967              0.33342    
Month7      -0.87781    0.45469  -1.931              0.05363 .  
Month8      -0.84370    0.43798  -1.926              0.05415 .  
Month9       0.01227    0.42700   0.029              0.97708    
Month10     -1.29039    0.41459  -3.112              0.00187 ** 
Month11     -0.31029    0.42356  -0.733              0.46386    
Month12     -0.30061    0.40708  -0.738              0.46028    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 5.105 on 3251 degrees of freedom
  (3166 observations deleted due to missingness)
Multiple R-squared:  0.006355,  Adjusted R-squared:  0.002993 
F-statistic:  1.89 on 11 and 3251 DF,  p-value: 0.03602</code></pre>
</div>
</div>
<p>Admission month is also a significant predictor of <code>MV_Total</code>.</p>
</section>
<section id="seasonality-summary" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-summary">Seasonality Summary</h4>
<p>It appears that we do have seasonality in our main outcome variables, and will have to account for this in our final model!</p>
</section>
</section>
<section id="Main_Goals" class="level1">
<h1>Analysis: Main Goals</h1>
<section id="goal-1-increase-frequency-of-pt-visits" class="level3">
<h3 class="anchored" data-anchor-id="goal-1-increase-frequency-of-pt-visits">Goal 1: Increase Frequency of PT Visits</h3>
<p>The first goal of the QI-initiative was to increase the frequency of PT visits.</p>
<p>To assess this, we will perform a Poisson Regression with the following formula:</p>
<p><span class="math inline">\(Log( E(admissions with PT_i | QI-Initiative_i ) ) = β_0 + β_1 * QI-Initiative_i + β2 *Covariates_i + ...\)</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Visualization II</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-5" role="tab" aria-controls="tabset-6-5" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_pct_therapy =</span> <span class="fu">mean</span>(PT_VISITS_PERC, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_pct_therapy)) <span class="sc">+</span></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average Percentage of Days with Physical Therapy Over Time"</span>,</span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Average Days with Physical Therapy (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-95-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Interesting! They successfully and drastically increased the percentage of days that patients had physical therapy (roughly from 10-20% pre-iniative to 50-60% post iniative). This percentage did seem to drop off over time during the post- initiative period however, though it is still higher than it was pre-initiative (now roughly 30-40%).</p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<p>First, we must determine whether it is more appropriate to run a Poisson Regression or a Negative Binomial Regression.</p>
<p>To do this we will compare the mean and the variance of this <code>PT_VISITS</code>. If the variance is greater than the mean, than we have overdispersion and a negative binomial model is more appropriate.</p>
<section id="check-for-overdispersion" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span>PT_VISITS))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 1.77601493233784"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span>PT_VISITS))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 6.32381168366"</code></pre>
</div>
</div>
<p>In our case, the variance is higher than the mean, indicating that we have overdispersion, and hence the negative binomial model is more appropriate going forward.</p>
<p>We can also verify this by using the examining the dispersion of our poisson model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Factoring initiative for better output in models</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>initiative, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Pre"</span>,<span class="st">"During"</span>,<span class="st">"Post"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Pre"</span>, <span class="st">"During"</span>, <span class="st">"Post"</span>))</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to unordered factor </span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ordered =</span> <span class="cn">FALSE</span>)</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the Poisson regression</span></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>model_goal1 <span class="ot">&lt;-</span> <span class="fu">glm</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">poisson</span>())</span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for overdispersion</span></span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true" tabindex="-1"></a>dispersion <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">residuals</span>(model_goal1, <span class="at">type =</span> <span class="st">"pearson"</span>)<span class="sc">^</span><span class="dv">2</span>) <span class="sc">/</span> <span class="fu">df.residual</span>(model_goal1)</span>
<span id="cb196-12"><a href="#cb196-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(dispersion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.801068</code></pre>
</div>
</div>
<p>The dispersion parameter is significantly greater than 1, and thus we have overdispersion.</p>
</section>
<section id="performing-the-negative-binomial-regression" class="level4">
<h4 class="anchored" data-anchor-id="performing-the-negative-binomial-regression">Performing the Negative Binomial Regression</h4>
<p>Since we know we have overdispersion, we can now perform the negative binomial regression</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>model_goal1_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal1_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = PT_VISITS ~ initiative + Age_Range + Month, 
    data = data_ex, init.theta = 1.331833346, link = log)

Coefficients:
                 Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)      -0.28202    0.06437  -4.381           0.00001179 ***
initiativeDuring  1.36776    0.04914  27.836 &lt; 0.0000000000000002 ***
initiativePost    1.05902    0.03313  31.963 &lt; 0.0000000000000002 ***
Age_Range40-49   -0.06107    0.05512  -1.108               0.2679    
Age_Range50-59    0.11323    0.04781   2.368               0.0179 *  
Age_Range60-69    0.22251    0.04661   4.774           0.00000181 ***
Age_Range70+      0.19773    0.04837   4.088           0.00004351 ***
Month2            0.05566    0.07194   0.774               0.4391    
Month3           -0.00756    0.07104  -0.106               0.9153    
Month4            0.04635    0.06924   0.669               0.5032    
Month5           -0.07368    0.07287  -1.011               0.3119    
Month6            0.02097    0.07444   0.282               0.7782    
Month7           -0.10744    0.07523  -1.428               0.1533    
Month8           -0.05074    0.07287  -0.696               0.4862    
Month9           -0.04758    0.07327  -0.649               0.5161    
Month10          -0.03757    0.07153  -0.525               0.5994    
Month11          -0.00384    0.07275  -0.053               0.9579    
Month12          -0.08484    0.07196  -1.179               0.2384    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.3318) family taken to be 1)

    Null deviance: 8109.7  on 6412  degrees of freedom
Residual deviance: 6699.0  on 6395  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 22054

Number of Fisher Scoring iterations: 1

              Theta:  1.3318 
          Std. Err.:  0.0471 

 2 x log-likelihood:  -22015.5330 </code></pre>
</div>
</div>
</section>
<section id="zero-inflated-negative-binomial-regression" class="level4">
<h4 class="anchored" data-anchor-id="zero-inflated-negative-binomial-regression">Zero Inflated Negative Binomial Regression</h4>
<p>A zero inflated regression is appropriate in the case of excess zeroes that are generated by a separate process from the count values. This means there are two processes: one that generates only zeros (e.g., not participating in an activity) and another that generates counts including zeros (e.g., participating but not succeeding).</p>
<p>In our case, there are likely a lot of patients that had no need for PT, and those that did but chose not to receive it, thus create two processes for a zero in our outcome variables.</p>
<p>Let’s test.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the zero-inflated negative binomial</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>model_goal1_zifb <span class="ot">&lt;-</span> <span class="fu">zeroinfl</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month<span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">dist =</span> <span class="st">"negbin"</span>)</span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal1_zifb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
zeroinfl(formula = PT_VISITS ~ initiative + Age_Range + Month | initiative, 
    data = data_ex, dist = "negbin")

Pearson residuals:
    Min      1Q  Median      3Q     Max 
-1.0281 -0.6700 -0.4351  0.2628 13.0853 

Count model coefficients (negbin with log link):
                  Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)      -0.090947   0.072352  -1.257             0.208750    
initiativeDuring  1.191104   0.057028  20.886 &lt; 0.0000000000000002 ***
initiativePost    0.881552   0.045000  19.590 &lt; 0.0000000000000002 ***
Age_Range40-49   -0.064724   0.055208  -1.172             0.241052    
Age_Range50-59    0.110198   0.047902   2.300             0.021422 *  
Age_Range60-69    0.211364   0.046670   4.529           0.00000593 ***
Age_Range70+      0.179120   0.048498   3.693             0.000221 ***
Month2            0.055040   0.071736   0.767             0.442925    
Month3           -0.016908   0.071221  -0.237             0.812344    
Month4            0.041365   0.068799   0.601             0.547678    
Month5           -0.074413   0.072529  -1.026             0.304908    
Month6            0.014490   0.074421   0.195             0.845627    
Month7           -0.108969   0.074989  -1.453             0.146187    
Month8           -0.057665   0.072719  -0.793             0.427783    
Month9           -0.049568   0.073358  -0.676             0.499226    
Month10          -0.050853   0.071817  -0.708             0.478885    
Month11          -0.009976   0.072839  -0.137             0.891068    
Month12          -0.103556   0.072311  -1.432             0.152118    
Log(theta)        0.374448   0.038918   9.621 &lt; 0.0000000000000002 ***

Zero-inflation model coefficients (binomial with logit link):
                  Estimate Std. Error z value            Pr(&gt;|z|)    
(Intercept)        -1.6393     0.1933  -8.479 &lt;0.0000000000000002 ***
initiativeDuring  -18.4499  1650.3493  -0.011               0.991    
initiativePost    -13.9241   121.6737  -0.114               0.909    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Theta = 1.4542 
Number of iterations in BFGS optimization: 46 
Log-likelihood: -1.099e+04 on 22 Df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal1_zifb)</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">count_(Intercept)</td>
<td style="text-align: right;">-0.2327551</td>
<td style="text-align: right;">0.0508604</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_initiativeDuring</td>
<td style="text-align: right;">1.0793305</td>
<td style="text-align: right;">1.3028774</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_initiativePost</td>
<td style="text-align: right;">0.7933537</td>
<td style="text-align: right;">0.9697508</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range40-49</td>
<td style="text-align: right;">-0.1729293</td>
<td style="text-align: right;">0.0434820</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range50-59</td>
<td style="text-align: right;">0.0163109</td>
<td style="text-align: right;">0.2040845</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range60-69</td>
<td style="text-align: right;">0.1198919</td>
<td style="text-align: right;">0.3028359</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range70+</td>
<td style="text-align: right;">0.0840652</td>
<td style="text-align: right;">0.2741739</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month2</td>
<td style="text-align: right;">-0.0855597</td>
<td style="text-align: right;">0.1956406</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month3</td>
<td style="text-align: right;">-0.1564982</td>
<td style="text-align: right;">0.1226821</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month4</td>
<td style="text-align: right;">-0.0934785</td>
<td style="text-align: right;">0.1762082</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month5</td>
<td style="text-align: right;">-0.2165676</td>
<td style="text-align: right;">0.0677424</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month6</td>
<td style="text-align: right;">-0.1313727</td>
<td style="text-align: right;">0.1603523</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month7</td>
<td style="text-align: right;">-0.2559454</td>
<td style="text-align: right;">0.0380069</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month8</td>
<td style="text-align: right;">-0.2001914</td>
<td style="text-align: right;">0.0848608</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month9</td>
<td style="text-align: right;">-0.1933469</td>
<td style="text-align: right;">0.0942101</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month10</td>
<td style="text-align: right;">-0.1916113</td>
<td style="text-align: right;">0.0899050</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month11</td>
<td style="text-align: right;">-0.1527372</td>
<td style="text-align: right;">0.1327862</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month12</td>
<td style="text-align: right;">-0.2452831</td>
<td style="text-align: right;">0.0381710</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zero_(Intercept)</td>
<td style="text-align: right;">-2.0182074</td>
<td style="text-align: right;">-1.2603858</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_initiativeDuring</td>
<td style="text-align: right;">-3253.0749866</td>
<td style="text-align: right;">3216.1752395</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zero_initiativePost</td>
<td style="text-align: right;">-252.4001718</td>
<td style="text-align: right;">224.5519146</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-level" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level">Change Reference Level</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the zero-inflated negative binomial</span></span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>model_goal1_zifb <span class="ot">&lt;-</span> <span class="fu">zeroinfl</span>(PT_VISITS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month<span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">dist =</span> <span class="st">"negbin"</span>)</span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-7"><a href="#cb203-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb203-8"><a href="#cb203-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal1_zifb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
zeroinfl(formula = PT_VISITS ~ initiative + Age_Range + Month | initiative, 
    data = data_ex, dist = "negbin")

Pearson residuals:
    Min      1Q  Median      3Q     Max 
-1.0281 -0.6700 -0.4351  0.2628 13.0852 

Count model coefficients (negbin with log link):
                Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)     1.100207   0.074181  14.831 &lt; 0.0000000000000002 ***
initiativePre  -1.191067   0.057026 -20.886 &lt; 0.0000000000000002 ***
initiativePost -0.309561   0.045216  -6.846     0.00000000000758 ***
Age_Range40-49 -0.064760   0.055208  -1.173             0.240791    
Age_Range50-59  0.110168   0.047902   2.300             0.021457 *  
Age_Range60-69  0.211331   0.046670   4.528     0.00000594934450 ***
Age_Range70+    0.179092   0.048498   3.693             0.000222 ***
Month2          0.055036   0.071736   0.767             0.442961    
Month3         -0.016916   0.071221  -0.238             0.812262    
Month4          0.041344   0.068799   0.601             0.547876    
Month5         -0.074416   0.072529  -1.026             0.304886    
Month6          0.014483   0.074421   0.195             0.845697    
Month7         -0.108971   0.074989  -1.453             0.146180    
Month8         -0.057707   0.072719  -0.794             0.427452    
Month9         -0.049570   0.073358  -0.676             0.499217    
Month10        -0.050883   0.071817  -0.709             0.478630    
Month11        -0.009972   0.072839  -0.137             0.891108    
Month12        -0.103575   0.072311  -1.432             0.152041    
Log(theta)      0.374469   0.038918   9.622 &lt; 0.0000000000000002 ***

Zero-inflation model coefficients (binomial with logit link):
               Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)     -16.867    329.456  -0.051    0.959
initiativePre    15.227    329.456   0.046    0.963
initiativePost    1.779    343.138   0.005    0.996
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Theta = 1.4542 
Number of iterations in BFGS optimization: 46 
Log-likelihood: -1.099e+04 on 22 Df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb205"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal1_zifb)</span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">count_(Intercept)</td>
<td style="text-align: right;">0.9548153</td>
<td style="text-align: right;">1.2455987</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_initiativePre</td>
<td style="text-align: right;">-1.3028361</td>
<td style="text-align: right;">-1.0792970</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_initiativePost</td>
<td style="text-align: right;">-0.3981828</td>
<td style="text-align: right;">-0.2209386</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range40-49</td>
<td style="text-align: right;">-0.1729653</td>
<td style="text-align: right;">0.0434460</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range50-59</td>
<td style="text-align: right;">0.0162810</td>
<td style="text-align: right;">0.2040548</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Age_Range60-69</td>
<td style="text-align: right;">0.1198594</td>
<td style="text-align: right;">0.3028034</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Age_Range70+</td>
<td style="text-align: right;">0.0840379</td>
<td style="text-align: right;">0.2741465</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month2</td>
<td style="text-align: right;">-0.0855641</td>
<td style="text-align: right;">0.1956364</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month3</td>
<td style="text-align: right;">-0.1565058</td>
<td style="text-align: right;">0.1226747</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month4</td>
<td style="text-align: right;">-0.0934988</td>
<td style="text-align: right;">0.1761876</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month5</td>
<td style="text-align: right;">-0.2165711</td>
<td style="text-align: right;">0.0677390</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month6</td>
<td style="text-align: right;">-0.1313794</td>
<td style="text-align: right;">0.1603458</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month7</td>
<td style="text-align: right;">-0.2559475</td>
<td style="text-align: right;">0.0380050</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month8</td>
<td style="text-align: right;">-0.2002325</td>
<td style="text-align: right;">0.0848193</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month9</td>
<td style="text-align: right;">-0.1933482</td>
<td style="text-align: right;">0.0942091</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month10</td>
<td style="text-align: right;">-0.1916407</td>
<td style="text-align: right;">0.0898754</td>
</tr>
<tr class="odd">
<td style="text-align: left;">count_Month11</td>
<td style="text-align: right;">-0.1527338</td>
<td style="text-align: right;">0.1327900</td>
</tr>
<tr class="even">
<td style="text-align: left;">count_Month12</td>
<td style="text-align: right;">-0.2453023</td>
<td style="text-align: right;">0.0381516</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zero_(Intercept)</td>
<td style="text-align: right;">-662.5875951</td>
<td style="text-align: right;">628.8545759</td>
</tr>
<tr class="even">
<td style="text-align: left;">zero_initiativePre</td>
<td style="text-align: right;">-630.4936755</td>
<td style="text-align: right;">660.9486619</td>
</tr>
<tr class="odd">
<td style="text-align: left;">zero_initiativePost</td>
<td style="text-align: right;">-670.7594430</td>
<td style="text-align: right;">674.3166767</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="model-selection" class="level4">
<h4 class="anchored" data-anchor-id="model-selection">Model Selection</h4>
<p>We can now compare model performance using AIC and BIC to determine if the ZIF model improves performance.</p>
<p>For fun let’s include the poisson regression model and see how it compares,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare model performance</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a>bic_p <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal1)</span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a>bic_nb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal1_nb)</span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a>bic_zifb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal1_zifb)</span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>aic_p <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal1)</span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>aic_nb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal1_nb)</span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>aic_zifb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal1_zifb)</span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-10"><a href="#cb206-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame to display the values </span></span>
<span id="cb206-11"><a href="#cb206-11" aria-hidden="true" tabindex="-1"></a>model_comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Poisson Model"</span>, <span class="st">"Negative Binomial Model"</span>, <span class="st">"ZIF Negative Binomial Model"</span>), </span>
<span id="cb206-12"><a href="#cb206-12" aria-hidden="true" tabindex="-1"></a>                               <span class="at">BIC =</span> <span class="fu">c</span>(bic_p, bic_nb, bic_zifb), </span>
<span id="cb206-13"><a href="#cb206-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">AIC =</span> <span class="fu">c</span>(bic_p, aic_nb, aic_zifb))</span>
<span id="cb206-14"><a href="#cb206-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-15"><a href="#cb206-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Print resulting table</span></span>
<span id="cb206-16"><a href="#cb206-16" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(model_comparison)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BIC</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Poisson Model</td>
<td style="text-align: right;">25414.66</td>
<td style="text-align: right;">25414.66</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Binomial Model</td>
<td style="text-align: right;">22182.09</td>
<td style="text-align: right;">22053.53</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ZIF Negative Binomial Model</td>
<td style="text-align: right;">22177.55</td>
<td style="text-align: right;">22028.70</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>We can also perform a likelihood ratio test to get a significance value we can report.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb207"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the likelihood ratio test </span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a>lr_test <span class="ot">&lt;-</span> <span class="fu">lrtest</span>(model_goal1_nb, model_goal1_zifb) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in modelUpdate(objects[[i - 1]], objects[[i]]): original model was of
class "negbin", updated model is of class "zeroinfl"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the test result </span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lr_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: PT_VISITS ~ initiative + Age_Range + Month
Model 2: PT_VISITS ~ initiative + Age_Range + Month | initiative
  #Df LogLik Df  Chisq Pr(&gt;Chisq)    
1  19 -11008                         
2  22 -10992  3 30.837 0.00000092 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>We can see that AIC and BIC both prefer the zero inflated model, and thus the <strong>Zero Inflated Binomial Regression will be chosen as the final model for goal 1.</strong></p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<section id="overall-model" class="level5">
<h5 class="anchored" data-anchor-id="overall-model">Overall Model</h5>
<p>The likelihood ratio test indicates that the Zero-Inflated Negative Binomial model provides a significantly better fit than the standard Negative Binomial model (χ² = 30.78, df = 3, p &lt; 0.0001), supporting the decision to run the analysis as a zero inflated model.</p>
</section>
<section id="main-effects" class="level5">
<h5 class="anchored" data-anchor-id="main-effects">Main Effects</h5>
<p>QI-initiative time period is a significant predictor for frequency of PT visits, while controlling for age, admission month, and zero inflation. Compared to patients in the Pre time period, patients in the During time period had a mean number of PT visits that was 3.29 times higher (z = 20.88, 95% CI: [2.94, 3.68], p &lt; 0.0001), and patients in the Post time period had a mean number of PT visits that was 2.42 times higher (z = 19.63, 95% CI: [2.22, 2.64], p &lt; 0.0001). Additionally, compared to patients in the During time period, those in the Post time period had a mean number of PT visits that was 0.74 times the mean number of PT visits (z = -6.78, 95% CI: [0.67, 0.80], p &lt; 0.0001).</p>
</section>
<section id="age-1" class="level5">
<h5 class="anchored" data-anchor-id="age-1">Age</h5>
<p>Age was a significant predictor for frequency of PT visits, while controlling for QI-initiative time period, admission month, and zero inflation. Compared to those who were 18-39, patients who were 50-59 had a 1.12 times higher mean number of PT visits (z = 2.30, 95% CI: [1.02, 1.23], p = 0.021), patients who were 60-69 had a 1.24 times higher mean number of PT visits (z = 4.53, 95% CI: [1.13, 1.35], p = &lt; 0.0001), and patients who were 70+ had a 1.20 times higher mean number of PT visits (z = 3.69, 95% CI: [1.09, 1.32], p = 0.0002). Patients who were 40-49 did not have a statistically significant difference in mean number of PT visits compared to those who were 18-39 (z = -1.166, 95% CI: [0.84, 1.04], p = 0.24).</p>
</section>
<section id="seasonality-1" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-1">Seasonality</h4>
<p>Month was not a significant predictor in this model (p’s for each month &gt; 0.5), but was included in the final model to account for potential seasonality effects.</p>
<section id="overdispersion" class="level5">
<h5 class="anchored" data-anchor-id="overdispersion">Overdispersion</h5>
<p>The estimate of log(θ) in this model is highly significant (𝛽^log(θ) = 0.3723, z = 9.581, p &lt; 0.0001), indicating strong evidence against the null hypothesis that log(theta) equals zero. When exponentiated, θ = exp(0.3723) ≈ 1.45, suggesting that the variance of the count data is approximately 1.45 times greater than the mean, which highlights significant overdispersion. This confirms that the use of a negative binomial distribution is appropriate for modeling our data, as it effectively handles the extra variability compared to a simpler Poisson model.</p>
</section>
<section id="zero-inflation" class="level5">
<h5 class="anchored" data-anchor-id="zero-inflation">Zero Inflation</h5>
<p>When controlling for age range and month, the initiative time period did not significantly affect the probability of zero PT visits (all p’s &gt; 0.05). This suggests that the likelihood of being a structural zero is independent of QI-initiative time period.</p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the effect of the predictors</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">allEffects</span>(model_goal1_nb),</span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Predicted PT Visits"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-105-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</div>
<div id="tabset-6-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-5-tab">
<p>We found that, while controlling for age, admission month, and zero inflation, those in the During time period had a 3.29 times higher (p &lt; 0.0001), and those in the Post time period had a 2.42 times higher (p &lt; 0.0001) average number of PT visits compared to patients in the Pre time period. i Additionally, there was a slight decrease in the number of PT visits from the During to Post time periods, with those in the Post period having a mean number of PT visits that was 0.74 times the mean number of PT visits of those in the During period (p &lt; 0.0001).</p>
<p>Additionally, there was an overall effect for age, where patients that were 50 and older received more PT visits than those who were 18-39.</p>
<p><a href="#Main_Goals">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
<section id="Goal_Two" class="level2">
<h2 class="anchored" data-anchor-id="Goal_Two">Goal 2: Decrease Time from Admit to Therapy</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Visualization II</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-5" role="tab" aria-controls="tabset-7-5" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear) <span class="sc">|&gt;</span> </span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_ADMIT_TO_TREAT =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_ADMIT_TO_TREAT)) <span class="sc">+</span></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb212-11"><a href="#cb212-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>,) <span class="sc">+</span></span>
<span id="cb212-12"><a href="#cb212-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time from Admit to Therapy over Time"</span>,</span>
<span id="cb212-13"><a href="#cb212-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb212-14"><a href="#cb212-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Time from Admit to Therapy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They successfully decreased the time from a patient’s first admit to their first physical therapy session.</p>
<p>This means that patients were receiving PT sooner.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<section id="correct-erroneous-value" class="level4">
<h4 class="anchored" data-anchor-id="correct-erroneous-value">Correct Erroneous Value</h4>
<p>Note: We have a patient with a -1 value for admit to treat time, which is not allowed in a poisson or negative binomial model, and is also not possible, so we will set this to NA.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove patient with -1 value for Admit to Treat time</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>, <span class="cn">NA</span>, <span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="check-for-overdispersion-1" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-1">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 64.0505548705302"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 4357.15605235608"</code></pre>
</div>
</div>
<p>The variance is drastically greater than the mean, indicating that a negative binomial regression is more appropriate.</p>
</section>
<section id="performing-the-negative-binomial-regression-1" class="level4">
<h4 class="anchored" data-anchor-id="performing-the-negative-binomial-regression-1">Performing the Negative Binomial Regression</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a>model_goal2_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `ADMIT TO TREAT` ~ initiative + Age_Range + 
    Month, data = data_ex, init.theta = 1.903810295, link = log)

Coefficients:
                 Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       4.81099    0.05102  94.287 &lt; 0.0000000000000002 ***
initiativeDuring -0.90959    0.03823 -23.793 &lt; 0.0000000000000002 ***
initiativePost   -0.68103    0.02620 -25.989 &lt; 0.0000000000000002 ***
Age_Range40-49   -0.04208    0.04388  -0.959              0.33754    
Age_Range50-59   -0.09610    0.03854  -2.493              0.01266 *  
Age_Range60-69   -0.20880    0.03733  -5.593   0.0000000223330684 ***
Age_Range70+     -0.29504    0.03832  -7.699   0.0000000000000137 ***
Month2           -0.10524    0.05622  -1.872              0.06121 .  
Month3           -0.23000    0.05558  -4.139   0.0000349491162686 ***
Month4           -0.05975    0.05385  -1.110              0.26717    
Month5           -0.13652    0.05672  -2.407              0.01609 *  
Month6           -0.01583    0.05774  -0.274              0.78394    
Month7           -0.05387    0.05838  -0.923              0.35618    
Month8           -0.14939    0.05710  -2.616              0.00889 ** 
Month9           -0.02346    0.05772  -0.406              0.68439    
Month10          -0.14485    0.05560  -2.605              0.00919 ** 
Month11          -0.04564    0.05697  -0.801              0.42313    
Month12           0.13637    0.05580   2.444              0.01452 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.9038) family taken to be 1)

    Null deviance: 5448.3  on 4047  degrees of freedom
Residual deviance: 4355.2  on 4030  degrees of freedom
  (2381 observations deleted due to missingness)
AIC: 40513

Number of Fisher Scoring iterations: 1

              Theta:  1.9038 
          Std. Err.:  0.0408 

 2 x log-likelihood:  -40474.7490 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-109-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-109-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-109-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-109-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.7137308</td>
<td style="text-align: right;">4.9098407</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.9843501</td>
<td style="text-align: right;">-0.8342671</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.7324678</td>
<td style="text-align: right;">-0.6298252</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.1279882</td>
<td style="text-align: right;">0.0440121</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.1717565</td>
<td style="text-align: right;">-0.0207688</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.2821640</td>
<td style="text-align: right;">-0.1358854</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.3702590</td>
<td style="text-align: right;">-0.2201763</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2153569</td>
<td style="text-align: right;">0.0050027</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.3388703</td>
<td style="text-align: right;">-0.1210989</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1658558</td>
<td style="text-align: right;">0.0461453</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2477053</td>
<td style="text-align: right;">-0.0252075</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.1288225</td>
<td style="text-align: right;">0.0974659</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.1678508</td>
<td style="text-align: right;">0.0604720</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2612686</td>
<td style="text-align: right;">-0.0373159</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.1363227</td>
<td style="text-align: right;">0.0896816</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2535057</td>
<td style="text-align: right;">-0.0362073</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.1569210</td>
<td style="text-align: right;">0.0658237</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">0.0272480</td>
<td style="text-align: right;">0.2455280</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-category" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-category">Change Reference Category</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>model_goal2_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb224-8"><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `ADMIT TO TREAT` ~ initiative + Age_Range + 
    Month, data = data_ex, init.theta = 1.903810295, link = log)

Coefficients:
               Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)     3.90140    0.05834  66.870 &lt; 0.0000000000000002 ***
initiativePre   0.90959    0.03823  23.793 &lt; 0.0000000000000002 ***
initiativePost  0.22856    0.03581   6.383   0.0000000001736857 ***
Age_Range40-49 -0.04208    0.04388  -0.959              0.33754    
Age_Range50-59 -0.09610    0.03854  -2.493              0.01266 *  
Age_Range60-69 -0.20880    0.03733  -5.593   0.0000000223330684 ***
Age_Range70+   -0.29504    0.03832  -7.699   0.0000000000000137 ***
Month2         -0.10524    0.05622  -1.872              0.06121 .  
Month3         -0.23000    0.05558  -4.139   0.0000349491162686 ***
Month4         -0.05975    0.05385  -1.110              0.26717    
Month5         -0.13652    0.05672  -2.407              0.01609 *  
Month6         -0.01583    0.05774  -0.274              0.78394    
Month7         -0.05387    0.05838  -0.923              0.35618    
Month8         -0.14939    0.05710  -2.616              0.00889 ** 
Month9         -0.02346    0.05772  -0.406              0.68439    
Month10        -0.14485    0.05560  -2.605              0.00919 ** 
Month11        -0.04564    0.05697  -0.801              0.42313    
Month12         0.13637    0.05580   2.444              0.01452 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.9038) family taken to be 1)

    Null deviance: 5448.3  on 4047  degrees of freedom
Residual deviance: 4355.2  on 4030  degrees of freedom
  (2381 observations deleted due to missingness)
AIC: 40513

Number of Fisher Scoring iterations: 1

              Theta:  1.9038 
          Std. Err.:  0.0408 

 2 x log-likelihood:  -40474.7490 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal2_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">3.7876454</td>
<td style="text-align: right;">4.0165436</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.8342671</td>
<td style="text-align: right;">0.9843501</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">0.1580166</td>
<td style="text-align: right;">0.2983406</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.1279882</td>
<td style="text-align: right;">0.0440121</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.1717565</td>
<td style="text-align: right;">-0.0207688</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.2821640</td>
<td style="text-align: right;">-0.1358854</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.3702590</td>
<td style="text-align: right;">-0.2201763</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2153569</td>
<td style="text-align: right;">0.0050027</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.3388703</td>
<td style="text-align: right;">-0.1210989</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1658558</td>
<td style="text-align: right;">0.0461453</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2477053</td>
<td style="text-align: right;">-0.0252075</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.1288225</td>
<td style="text-align: right;">0.0974659</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.1678508</td>
<td style="text-align: right;">0.0604720</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2612686</td>
<td style="text-align: right;">-0.0373159</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.1363227</td>
<td style="text-align: right;">0.0896816</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2535057</td>
<td style="text-align: right;">-0.0362073</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.1569210</td>
<td style="text-align: right;">0.0658237</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">0.0272480</td>
<td style="text-align: right;">0.2455280</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Since patients that did not receive a consult were coded as <code>NA</code> instead of 0, we do not have to perform a zero inflated regression this time.</p>
<section id="model-comparison" class="level5">
<h5 class="anchored" data-anchor-id="model-comparison">Model Comparison</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the Poisson regression</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a>model_goal2 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">poisson</span>())</span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare model performance</span></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>bic_p <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal2)</span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>bic_nb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_goal2_nb)</span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a>aic_p <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal2)</span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a>aic_nb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_goal2_nb)</span>
<span id="cb229-10"><a href="#cb229-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-11"><a href="#cb229-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame to display the values </span></span>
<span id="cb229-12"><a href="#cb229-12" aria-hidden="true" tabindex="-1"></a>model_comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Poisson Model"</span>, <span class="st">"Negative Binomial Model"</span>), </span>
<span id="cb229-13"><a href="#cb229-13" aria-hidden="true" tabindex="-1"></a>                               <span class="at">BIC =</span> <span class="fu">c</span>(bic_p, bic_nb), </span>
<span id="cb229-14"><a href="#cb229-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">AIC =</span> <span class="fu">c</span>(bic_p, aic_nb))</span>
<span id="cb229-15"><a href="#cb229-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-16"><a href="#cb229-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Print resulting table</span></span>
<span id="cb229-17"><a href="#cb229-17" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(model_comparison)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BIC</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Poisson Model</td>
<td style="text-align: right;">175314.11</td>
<td style="text-align: right;">175314.11</td>
</tr>
<tr class="even">
<td style="text-align: left;">Negative Binomial Model</td>
<td style="text-align: right;">40632.56</td>
<td style="text-align: right;">40512.75</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>AIC and BIC drastically prefer the negative binomial model, indicating it is a better fit for our data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb230"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the likelihood ratio test </span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a>lr_test <span class="ot">&lt;-</span> <span class="fu">lrtest</span>(model_goal2, model_goal2_nb) </span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a>lr_test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Likelihood ratio test

Model 1: `ADMIT TO TREAT` ~ initiative + Age_Range + Month
Model 2: `ADMIT TO TREAT` ~ initiative + Age_Range + Month
  #Df LogLik Df  Chisq            Pr(&gt;Chisq)    
1  18 -87582                                    
2  19 -20237  1 134690 &lt; 0.00000000000000022 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The likelihood ratio test also confirms the negative binomial model performs better.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<section id="overall-model-1" class="level4">
<h4 class="anchored" data-anchor-id="overall-model-1">Overall Model</h4>
<p>The likelihood ratio test indicates that the Negative Binomial model provides a significantly better fit than the Poisson model (χ² = 134758, df = 1, p &lt; 0.0001), supporting the decision to run the analysis as a Negative Binomial model due to overdispersion.</p>
</section>
<section id="main-effects-1" class="level4">
<h4 class="anchored" data-anchor-id="main-effects-1">Main Effects</h4>
<p>QI-initiative time period is a significant predictor for time from admit to treatment, while controlling for age and admission month. Compared to patients in the Pre time period, patients in the During time period had a mean admit to treatment time that was 0.40 times that of patients in the Pre period (z = 23.80, 95% CI: [0.37, 0.43], p &lt; 0.0001), and patients in the Post time period had a mean admit to treatment time that was 0.51 times that of patients in the Pre period (z = -26.01, 95% CI: [0.48, 0.53], p &lt; 0.0001). Additionally, compared to patients in the During time period, those in the Post time period had a mean admit to treatment time that was 1.26 times higher than that of patients during the During period (z = 6.37, 95% CI: [1.17, 1.35], p &lt; 0.0001), indicating a slight increase in admit to treatment time after the During period.</p>
</section>
<section id="age-2" class="level4">
<h4 class="anchored" data-anchor-id="age-2">Age</h4>
<p>Age was a significant predictor for time from admit to treatment, while controlling for QI-initiative time period and admission month. Compared to those who were 18-39, patients who were 50-59 had 0.91 times (z = -2.497, 95% CI: [0.84, 0.98], p = 0.0125), patients who were 60-69 had 0.81 times (z = -5.60, 95% CI: [0.75, 0.87], p &lt; 0.0001), and patients who were 70+ had 0.74 times (z = -7.70, 95% CI: [0.69, 0.80], p &lt; 0.0001) the admit to treatment time. Patients who were 40-49 did not have a statistically significant difference in admit to treatment time compared to those who were 18-39 (z = -0.97, 95% CI: [-.88, 1.04], p = 0.33).</p>
</section>
<section id="seasonality-2" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-2">Seasonality</h4>
<p>Admission Month was a significant predictor for admit to treatment time, while controlling for QI-initiative time period and age. For instance, those admitted during March had an admit to treatment time that was 0.80 times that of those admitted during January (z = -4.11, 95% CI: [0.71, 0.89, p &lt; 0.0001]).</p>
<p>Since possible comparisons between months are myriad (12!), and the goal of this project was not to compare outcome variables between months (merely to control for these differences due to seasonality), further comparisons will not be made.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<section id="initiative" class="level4">
<h4 class="anchored" data-anchor-id="initiative">Initiative</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb232"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a>model_goal2_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">ADMIT TO TREAT</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex)</span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a>effect_initiative <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_goal2_nb)</span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_initiative)</span>
<span id="cb232-12"><a href="#cb232-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-13"><a href="#cb232-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb232-14"><a href="#cb232-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb232-15"><a href="#cb232-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb232-16"><a href="#cb232-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb232-17"><a href="#cb232-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb232-18"><a href="#cb232-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb232-19"><a href="#cb232-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Effect of Initiative on Admit to Physical Therapy Wait Time"</span>,</span>
<span id="cb232-20"><a href="#cb232-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Initiative"</span>,</span>
<span id="cb232-21"><a href="#cb232-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Time from Admit to Physical Therapy"</span></span>
<span id="cb232-22"><a href="#cb232-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb232-23"><a href="#cb232-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-113-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="age-range" class="level4">
<h4 class="anchored" data-anchor-id="age-range">Age Range</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a>effect_age <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"Age_Range"</span>, model_goal2_nb)</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_age)</span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> Age_Range, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb234-9"><a href="#cb234-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb234-10"><a href="#cb234-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb234-11"><a href="#cb234-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb234-12"><a href="#cb234-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb234-13"><a href="#cb234-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age Range on Admit to Physical Therapy Wait Time"</span>,</span>
<span id="cb234-14"><a href="#cb234-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb234-15"><a href="#cb234-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Time from Admit to Physical Therapy"</span></span>
<span id="cb234-16"><a href="#cb234-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb234-17"><a href="#cb234-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-114-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>effect_month <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"Month"</span>, model_goal2_nb)</span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_month)</span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb235-8"><a href="#cb235-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb235-9"><a href="#cb235-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb235-10"><a href="#cb235-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb235-11"><a href="#cb235-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb235-12"><a href="#cb235-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb235-13"><a href="#cb235-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Age Range on Admit to Physical Therapy Wait Time"</span>,</span>
<span id="cb235-14"><a href="#cb235-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age"</span>,</span>
<span id="cb235-15"><a href="#cb235-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Time from Admit to Physical Therapy"</span></span>
<span id="cb235-16"><a href="#cb235-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb235-17"><a href="#cb235-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-115-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-7-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-5-tab">
<section id="qi-initiative" class="level4">
<h4 class="anchored" data-anchor-id="qi-initiative">QI-Initiative</h4>
<p>The QI-initiative successfully decreased the wait time from admit to therapy, with patients admitted in the During period having a mean wait time that was 0.40 times that of patients in the Pre period (p &lt; 0.0001), and patients admitted in the Post period having a wait time that was 0.51 times that of patients in the Pre period (p &lt; 0.0001).</p>
<p>Additionally, there was a slight increase in wait time from admit to therapy after the QI-initiative, with those admitted in the Post time period having a mean wait time that was 1.26 times higher than that of patients during the During period (p &lt; 0.0001).</p>
<p>The QI-initiative effectively halved the wait time from admission to therapy!</p>
</section>
<section id="age-3" class="level4">
<h4 class="anchored" data-anchor-id="age-3">Age</h4>
<p>There was an overall effect where patients that were 50 and older had an average admit to therapy wait time that was faster than patients who were 18-39. This indicates that patients who were 50 and older were being prioritized to receive physical therapy sooner.</p>
</section>
<section id="seasonality-3" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-3">Seasonality</h4>
<p>There were significant differences in wait time from admit to therapy based on the month the patient was admitted, likely just due to differences in staffing (such as in December and January), making this important that we included <code>Admission Month</code> as a covariate in our model that we controlled for.</p>
<p><a href="#Goal_Two">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</section>
<section id="Goal_3" class="level2">
<h2 class="anchored" data-anchor-id="Goal_3">Goal 3: Increase Percentage of Admissions Receiving Physical Therapy</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false">Visualization II</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-5" role="tab" aria-controls="tabset-8-5" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert factor to numeric </span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>PT_YN <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(data_ex<span class="sc">$</span>PT_YN)</span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>PT_YN <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(data_ex<span class="sc">$</span>PT_YN <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and calculate percentages</span></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a>summary_data <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, PT_YN) <span class="sc">|&gt;</span> </span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_count =</span> <span class="fu">sum</span>(count)) <span class="sc">|&gt;</span> </span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percentage =</span> (count <span class="sc">/</span> total_count) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span> </span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PT_YN <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear'. You can override using
the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(summary_data, <span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> percentage)) <span class="sc">+</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">as.Date</span>(<span class="st">"2015-09-01"</span>), <span class="at">y =</span> <span class="cn">Inf</span>, </span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"QI-Initiative"</span>, <span class="at">color =</span> <span class="st">"skyblue2"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb238-9"><a href="#cb238-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Percentage of Admissions Receiving Physical Therapy"</span>,</span>
<span id="cb238-10"><a href="#cb238-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb238-11"><a href="#cb238-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Percentage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-116-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>They successfully increased the percentage of patients receiving PT from ~40% pre-initiative to ~80% during the initiative. This percentage then decreases to ~70% post-initiative</p>
<p><a href="#Goal_3">Top of Tabset</a></p>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<p>For this model, we will perform a logistic regression to see if the likelihood of receiving physical therapy differs by QI-initiative time period.</p>
<section id="performing-the-logistic-regression" class="level4">
<h4 class="anchored" data-anchor-id="performing-the-logistic-regression">Performing the Logistic Regression</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the logistic regression</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a>model_goal3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">PT_YN</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = PT_YN ~ initiative + Age_Range + Month, family = binomial(), 
    data = data_ex)

Coefficients:
                   Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)      -0.6600359  0.1161250  -5.684    0.000000013170247 ***
initiativeDuring  2.2619119  0.1251165  18.078 &lt; 0.0000000000000002 ***
initiativePost    1.5726502  0.0597410  26.324 &lt; 0.0000000000000002 ***
Age_Range40-49    0.1942581  0.0991683   1.959               0.0501 .  
Age_Range50-59    0.3536368  0.0875596   4.039    0.000053722360965 ***
Age_Range60-69    0.6444062  0.0882687   7.301    0.000000000000287 ***
Age_Range70+      0.7645952  0.0924485   8.271 &lt; 0.0000000000000002 ***
Month2            0.0289775  0.1356988   0.214               0.8309    
Month3           -0.0284030  0.1314728  -0.216               0.8290    
Month4            0.0623378  0.1354837   0.460               0.6454    
Month5           -0.1220391  0.1395826  -0.874               0.3819    
Month6            0.0533113  0.1439204   0.370               0.7111    
Month7           -0.1210821  0.1423204  -0.851               0.3949    
Month8           -0.1722675  0.1378900  -1.249               0.2116    
Month9           -0.1891596  0.1357869  -1.393               0.1636    
Month10          -0.0008659  0.1338243  -0.006               0.9948    
Month11          -0.0928069  0.1371891  -0.676               0.4987    
Month12          -0.0974021  0.1348638  -0.722               0.4702    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 8443.4  on 6412  degrees of freedom
Residual deviance: 7362.3  on 6395  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 7398.3

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-117-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-117-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-117-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-117-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">-0.8876220</td>
<td style="text-align: right;">-0.4322546</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">2.0221592</td>
<td style="text-align: right;">2.5131628</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">1.4560662</td>
<td style="text-align: right;">1.6902706</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">0.0000494</td>
<td style="text-align: right;">0.3888507</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">0.1821466</td>
<td style="text-align: right;">0.5254259</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">0.4716468</td>
<td style="text-align: right;">0.8177081</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">0.5837992</td>
<td style="text-align: right;">0.9462512</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2370064</td>
<td style="text-align: right;">0.2950948</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2863169</td>
<td style="text-align: right;">0.2291997</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.2030680</td>
<td style="text-align: right;">0.3281957</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.3955353</td>
<td style="text-align: right;">0.1518012</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.2283691</td>
<td style="text-align: right;">0.3360005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.3999221</td>
<td style="text-align: right;">0.1581532</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.4426274</td>
<td style="text-align: right;">0.0980607</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.4555713</td>
<td style="text-align: right;">0.0768597</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2632707</td>
<td style="text-align: right;">0.2614679</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.3617920</td>
<td style="text-align: right;">0.1761451</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.3618651</td>
<td style="text-align: right;">0.1669516</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-the-reference-category" class="level4">
<h4 class="anchored" data-anchor-id="change-the-reference-category">Change the Reference Category</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-4"><a href="#cb245-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the logistic regression</span></span>
<span id="cb245-5"><a href="#cb245-5" aria-hidden="true" tabindex="-1"></a>model_goal3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">PT_YN</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb245-6"><a href="#cb245-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-7"><a href="#cb245-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb245-8"><a href="#cb245-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = PT_YN ~ initiative + Age_Range + Month, family = binomial(), 
    data = data_ex)

Coefficients:
                 Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)     1.6018760  0.1650691   9.704 &lt; 0.0000000000000002 ***
initiativePre  -2.2619119  0.1251165 -18.078 &lt; 0.0000000000000002 ***
initiativePost -0.6892617  0.1275136  -5.405    0.000000064664060 ***
Age_Range40-49  0.1942581  0.0991683   1.959               0.0501 .  
Age_Range50-59  0.3536368  0.0875596   4.039    0.000053722360965 ***
Age_Range60-69  0.6444062  0.0882687   7.301    0.000000000000287 ***
Age_Range70+    0.7645952  0.0924485   8.271 &lt; 0.0000000000000002 ***
Month2          0.0289775  0.1356988   0.214               0.8309    
Month3         -0.0284030  0.1314728  -0.216               0.8290    
Month4          0.0623378  0.1354837   0.460               0.6454    
Month5         -0.1220391  0.1395826  -0.874               0.3819    
Month6          0.0533113  0.1439204   0.370               0.7111    
Month7         -0.1210821  0.1423204  -0.851               0.3949    
Month8         -0.1722675  0.1378900  -1.249               0.2116    
Month9         -0.1891596  0.1357869  -1.393               0.1636    
Month10        -0.0008659  0.1338243  -0.006               0.9948    
Month11        -0.0928069  0.1371891  -0.676               0.4987    
Month12        -0.0974021  0.1348638  -0.722               0.4702    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 8443.4  on 6412  degrees of freedom
Residual deviance: 7362.3  on 6395  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 7398.3

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb247"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CI's</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a>CIs <span class="ot">&lt;-</span> <span class="fu">confint</span>(model_goal3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb249"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(CIs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">1.2817567</td>
<td style="text-align: right;">1.9291957</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">-2.5131628</td>
<td style="text-align: right;">-2.0221592</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.9448513</td>
<td style="text-align: right;">-0.4444350</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">0.0000494</td>
<td style="text-align: right;">0.3888507</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">0.1821466</td>
<td style="text-align: right;">0.5254259</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">0.4716468</td>
<td style="text-align: right;">0.8177081</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">0.5837992</td>
<td style="text-align: right;">0.9462512</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.2370064</td>
<td style="text-align: right;">0.2950948</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2863169</td>
<td style="text-align: right;">0.2291997</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.2030680</td>
<td style="text-align: right;">0.3281957</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.3955353</td>
<td style="text-align: right;">0.1518012</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.2283691</td>
<td style="text-align: right;">0.3360005</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.3999221</td>
<td style="text-align: right;">0.1581532</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.4426274</td>
<td style="text-align: right;">0.0980607</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.4555713</td>
<td style="text-align: right;">0.0768597</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2632707</td>
<td style="text-align: right;">0.2614679</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.3617920</td>
<td style="text-align: right;">0.1761451</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.3618651</td>
<td style="text-align: right;">0.1669516</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><a href="#Goal_3">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<section id="main-effects-2" class="level4">
<h4 class="anchored" data-anchor-id="main-effects-2">Main Effects</h4>
<p>QI-initiative time period is a significant predictor for the likelihood of receiving PT, while controlling for age and admission month. Compared to patients in the Pre time period, the odds of receiving physical therapy in the During period were approximately 9.52 times higher (z = 18.144, 95% CI: [7.51, 12.22], p &lt; 0.0001), and the odds of receiving physical therapy in the Post time period were 4.84 times higher (z = 26.41, 95% CI: [4.31, 5.44], p &lt; 0.0001). The odds of receiving physical therapy in the Post time period were 0.51 the odds of receiving physical therapy in the during period (z = -5.35, 95% CI: [0.39,0.65], p &lt; 0.0001).</p>
</section>
<section id="age-4" class="level4">
<h4 class="anchored" data-anchor-id="age-4">Age</h4>
<p>Age was a significant predictor for the likelihood of receiving PT, while controlling for QI-initiative time period and admission month. Compared to those who were 18-39, the odds of receiving physical therapy were 1.42 times higher for patients aged 50-59 (z = 4.04, 95% CI: [1.20, 1.69], p &lt; 0.0001), 1.91 times higher for patients aged 60-69 (z = 7.30, 95% CI: [1.60, 2.27], p &lt; 0.0001 ), and 2.15 times higher for patients age 70+ (z = 8.273, 95% CI: [1.79,], p = 2.58). The odds of receiving PT did not differ significantly between patients who were 18-39 and those who were 40-49 (z = 1.96, 95% CI: [1.00, 1.48], p = 0.0502).</p>
</section>
<section id="seasonality-4" class="level4">
<h4 class="anchored" data-anchor-id="seasonality-4">Seasonality</h4>
<p>Admission Month was not a significant predictor for the likelihood of receiving PT (p’s for each month &gt; 0.5), but was included in the final model to account for potential seasonality effects.</p>
<p><a href="#Goal_3">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-4"><a href="#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the logistic regression</span></span>
<span id="cb250-5"><a href="#cb250-5" aria-hidden="true" tabindex="-1"></a>model_goal3 <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="st">`</span><span class="at">PT_YN</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month, <span class="at">data =</span> data_ex, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb250-6"><a href="#cb250-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-7"><a href="#cb250-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot effects</span></span>
<span id="cb250-8"><a href="#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">allEffects</span>(model_goal3),</span>
<span id="cb250-9"><a href="#cb250-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Likelihood of Receiving PT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-119-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Goal_3">Top of Tabset</a></p>
</div>
<div id="tabset-8-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-5-tab">
<section id="qi-initiative-1" class="level4">
<h4 class="anchored" data-anchor-id="qi-initiative-1">QI-Initiative</h4>
<p>The QI-initiative was successful at increasing the likelihood that patients received physical therapy. Compared to patients in the Pre time period, the odds of receiving physical therapy in the During period were approximately 9.52 times higher (p &lt; 0.0001), and the odds of receiving physical therapy in the Post time period were 4.84 times higher (p &lt; 0.0001).</p>
<p>Additionally, there was a decrease in the likelihood of receiving PT after the During period, with the odds of receiving physical therapy in the Post time period being 0.51 the odds of receiving physical therapy in the during period (p &lt; 0.0001).</p>
</section>
<section id="age-5" class="level4">
<h4 class="anchored" data-anchor-id="age-5">Age</h4>
<p>There was an overall effect, where patients 50 years and older were more likely to receive PT compared to those 18-39 years old, while controlling for QI-initiative time period and admission month.</p>
<p>This is again evidence that older patients were receiving priority for PT.</p>
<p><a href="#Goal_3">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</section>
</section>
<section id="analysis-primary-outcomes" class="level1">
<h1>Analysis: Primary Outcomes</h1>
<section id="MICU_LOS" class="level2">
<h2 class="anchored" data-anchor-id="MICU_LOS">MICU Length of Stay</h2>
<p>The primary question A of the study was whether the QI-initiative successfully decreased the MICU length of stay.</p>
<p>To assess this we will run a Poisson or Negative Binomial Regression model predicting <code>UNIT LOS</code>:</p>
<p><span class="math inline">\(Log( E(MICU LOS | QI-Initiative_i ) ) = β_0 + β_1 * QI-Initiative_i + β2 *Covariates_i + ...\)</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Covariates</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Model Selection</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-4" role="tab" aria-controls="tabset-9-4" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-5" role="tab" aria-controls="tabset-9-5" aria-selected="false">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-6" role="tab" aria-controls="tabset-9-6" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<section id="covariate-selection" class="level4">
<h4 class="anchored" data-anchor-id="covariate-selection">Covariate Selection</h4>
<p>The variables that were found to be correlated with <code>MICU LOS</code> were:</p>
<ul>
<li><code>HOSPITAL_LOS</code></li>
<li><code>ADMIT.TO.CONSULT</code></li>
<li><code>PT_VISITS</code></li>
<li><code>DAYS.WITH.THERAPY.VISITS</code></li>
<li><code>AVERAGE THERAPY LENGTH</code></li>
<li><code>MAX THERAPY LENGTH</code></li>
</ul>
<p><code>AVERAGE THERAPY LENGTH</code> and <code>MAX THERAPY LENGTH</code> blank are just different ways of measuring the same variable, and thus only <code>AVERAGE THERAPY LENGTH</code> will be considered as a covariate because it is more relevant in the context of the study. <code>AVERAGE THERAPY LENGTH</code> is important to control for, because it gives us a final model demonstrating the impact of the QI-initiative time period, regardless of how long the therapy visits were for each patient.</p>
<p>Similarly, <code>PT_VISITS</code> and <code>DAYS.WITH.THERAPY.VISITS</code> are essentially the same variable, and thus only <code>PT_VISITS</code> will be selected because it was used in the previous analyses and is therefore more relevant. <code>PT_VISITS</code> will be imporant to account for because it will provide us with a model that demonstrates significance of the QI-initiative, regardless of how many PT visits each patient received.</p>
<p><code>ADMIT TO CONSULT</code> will not be selected due to ~20% missinginess, and we do not want to exclude patients in this study that did not receive a consultation.</p>
<p><code>HOSPITAL_LOS</code> will not be include because it will be an outcome variable and will be analyzed in a separate model. Furthermore, <code>MICU LOS</code> is directly related to <code>HOSPITAL_LOS</code>, and I want to avoid redundant variables due to issues of collinearity (This would be akin to include BMI in a model predicting Height).</p>
<p><code>Age_Range</code> will be included to account for age and because it was a significant predictor in the previous 3 analyses.</p>
<p><code>Month</code> will be included because we want to control for potential seasonality.</p>
<section id="interaction-terms" class="level5">
<h5 class="anchored" data-anchor-id="interaction-terms">Interaction Terms</h5>
<p>Preliminary visualization demonstrates that there may be a <code>initiative*MV_YN*PT_YN</code> interaction. Where the initiative only decreased <code>MICU LOS</code> for patients who were mechanically ventilated and received physical therapy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom labeller function </span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>custom_labels <span class="ot">&lt;-</span> <span class="fu">as_labeller</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">0</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"No Mechanical Ventilation"</span>, <span class="st">`</span><span class="at">1</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Mechanical Ventilation"</span>))</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize and plot the data</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>data_ex <span class="sc">|&gt;</span> </span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Admit_MonthYear, MV_YN, PT_YN) <span class="sc">|&gt;</span> </span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_Unit_LOS =</span> <span class="fu">mean</span>(Unit_LOS, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Admit_MonthYear, <span class="at">y =</span> avg_Unit_LOS, <span class="at">color =</span> <span class="fu">as.factor</span>(PT_YN))) <span class="sc">+</span></span>
<span id="cb251-9"><a href="#cb251-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb251-10"><a href="#cb251-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">se =</span> F) <span class="sc">+</span></span>
<span id="cb251-11"><a href="#cb251-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb251-12"><a href="#cb251-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="at">data =</span> highlight_periods, <span class="fu">aes</span>(<span class="at">xmin =</span> start, <span class="at">xmax =</span> end, <span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>), </span>
<span id="cb251-13"><a href="#cb251-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb251-14"><a href="#cb251-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Average MICU LOS over Time by Mechanical Ventilation"</span>,</span>
<span id="cb251-15"><a href="#cb251-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Admit Date"</span>,</span>
<span id="cb251-16"><a href="#cb251-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Avg MICU LOS"</span>,</span>
<span id="cb251-17"><a href="#cb251-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Received Physical Therapy"</span>) <span class="sc">+</span></span>
<span id="cb251-18"><a href="#cb251-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>MV_YN, <span class="at">labeller =</span> custom_labels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Admit_MonthYear', 'MV_YN'. You can
override using the `.groups` argument.
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-120-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Thus, interaction terms for both <code>initiative*MV_YN</code> and <code>initiative*PT_YN</code> will be included as well.</p>
</section>
</section>
<section id="final-covariates" class="level3">
<h3 class="anchored" data-anchor-id="final-covariates">Final Covariates</h3>
<p>The final model will include the following potential covariates:</p>
<ul>
<li><code>PT_VISITS</code></li>
<li><code>AVERAGE THERAPY LENGTH</code></li>
<li><code>MV_YN</code></li>
<li><code>initiative*MV_YN</code></li>
<li><code>PT_YN</code></li>
<li><code>initiative*PT_YN</code></li>
</ul>
<p>Inclusion of variables into the final model will be decided via BIC using backwards elimination.</p>
<p><a href="#MICU_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<section id="check-for-zero-inflation" class="level4">
<h4 class="anchored" data-anchor-id="check-for-zero-inflation">Check for Zero Inflation</h4>
<p>First we will consider if zero inflation is necessary for <code>UNIT_LOS</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot histogram of MICU LOS</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span>Unit_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-121-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>MICU LOS` is not zero inflated and thus we do not need to consider ZIF for our model.</p>
</section>
<section id="check-for-overdispersion-2" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-2">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span>Unit_LOS, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 138.781303468658"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb256"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span>Unit_LOS, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 12778.5408389354"</code></pre>
</div>
</div>
<p>Our variance is dramatically higher than the mean, and thus we have overdispersion and the negative binomial model is more appropriate than the Poisson regression.</p>
</section>
<section id="full-model" class="level4">
<h4 class="anchored" data-anchor-id="full-model">Full Model</h4>
<p>We will first begin with a saturated model of all potential covariates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb258"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a>model_full <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN <span class="sc">+</span> initiative<span class="sc">*</span>PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + MV_YN + initiative * MV_YN + 
    PT_YN + initiative * PT_YN, data = data_ex, init.theta = 4.289646599, 
    link = log)

Coefficients:
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)             4.3823672  0.0282469 155.145 &lt; 0.0000000000000002 ***
initiativeDuring       -0.1453146  0.0604645  -2.403              0.01625 *  
initiativePost         -0.0822917  0.0266455  -3.088              0.00201 ** 
Age_Range40-49          0.0317567  0.0221104   1.436              0.15092    
Age_Range50-59          0.0108876  0.0195151   0.558              0.57691    
Age_Range60-69         -0.0147466  0.0193828  -0.761              0.44677    
Age_Range70+           -0.0427559  0.0201383  -2.123              0.03374 *  
Month2                  0.0022386  0.0298377   0.075              0.94020    
Month3                 -0.0489545  0.0291545  -1.679              0.09312 .  
Month4                  0.0068517  0.0291669   0.235              0.81427    
Month5                 -0.0367546  0.0303158  -1.212              0.22536    
Month6                 -0.0108190  0.0311224  -0.348              0.72812    
Month7                  0.0071728  0.0310207   0.231              0.81714    
Month8                  0.0341580  0.0302281   1.130              0.25847    
Month9                  0.0508336  0.0300095   1.694              0.09028 .  
Month10                -0.0231288  0.0293877  -0.787              0.43127    
Month11                 0.0319420  0.0300705   1.062              0.28813    
Month12                 0.0478080  0.0295638   1.617              0.10585    
PT_VISITS               0.1383907  0.0030719  45.050 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH`   -0.0013767  0.0006085  -2.262              0.02367 *  
MV_YN                   0.5787710  0.0184760  31.326 &lt; 0.0000000000000002 ***
PT_YN                   0.2319438  0.0262562   8.834 &lt; 0.0000000000000002 ***
initiativeDuring:MV_YN -0.2381179  0.0431943  -5.513         0.0000000353 ***
initiativePost:MV_YN   -0.1415499  0.0263292  -5.376         0.0000000761 ***
initiativeDuring:PT_YN -0.2696489  0.0610438  -4.417         0.0000099941 ***
initiativePost:PT_YN   -0.2621947  0.0292363  -8.968 &lt; 0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2896) family taken to be 1)

    Null deviance: 12428.2  on 6404  degrees of freedom
Residual deviance:  6594.7  on 6379  degrees of freedom
  (24 observations deleted due to missingness)
AIC: 69828

Number of Fisher Scoring iterations: 1

              Theta:  4.2896 
          Std. Err.:  0.0755 

 2 x log-likelihood:  -69773.6730 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb260"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_full, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_full, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                          GVIF Df GVIF^(1/(2*Df))
initiative           36.811604  2        2.463180
Age_Range             1.039062  4        1.004801
Month                 1.084741 11        1.003704
PT_VISITS             1.601575  1        1.265534
`AVG THERAPY LENGTH`  3.519915  1        1.876144
MV_YN                 2.258908  1        1.502966
PT_YN                 4.241298  1        2.059441
initiative:MV_YN      7.674538  2        1.664420
initiative:PT_YN     37.486092  2        2.474387</code></pre>
</div>
</div>
<p>This provides a highly significant model, where the impact of the QI-initiative depends on both whether a patient was mechanically ventilated AND whether they received PT or not.</p>
<p>However, there are issues of multicollinearity for the <code>initiative*PT_YN</code> interaction term (GVIF = 36.93). Thus, the <code>initiative*PT_YN</code> interaction term will be dropped from further analysis to account for multicollinearity (and to make the model simpler to interpret/more parsimonious).</p>
</section>
<section id="backwards-elimination" class="level4">
<h4 class="anchored" data-anchor-id="backwards-elimination">Backwards Elimination</h4>
<p>We will be forcing in the inclusion of <code>Age_Range</code>, since we saw in our previous models that it is a significant predictor of the outcome variables (and also because it makes sense that older people will stay in the MICU longer, and this just seems like something people would ask if we controlled for).</p>
<p>Similarly, <code>Month</code> will be included to account for the seasonality we have seen in previous models and in our plots.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import the vif function from the MASS package </span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get cleaned data set with missing values omitted because this is necessary with the MASS package</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a>data_ex_clean <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(Unit_LOS, initiative, Age_Range, Month, PT_VISITS, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, MV_YN, PT_YN)</span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-8"><a href="#cb263-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with missing values</span></span>
<span id="cb263-9"><a href="#cb263-9" aria-hidden="true" tabindex="-1"></a>data_ex_clean <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_ex_clean)</span>
<span id="cb263-10"><a href="#cb263-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-11"><a href="#cb263-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb263-12"><a href="#cb263-12" aria-hidden="true" tabindex="-1"></a>model_MICU1 <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex_clean)</span>
<span id="cb263-13"><a href="#cb263-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-14"><a href="#cb263-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Set n to the number of observations in the dataset</span></span>
<span id="cb263-15"><a href="#cb263-15" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_ex_clean)</span>
<span id="cb263-16"><a href="#cb263-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-17"><a href="#cb263-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the scope to force the inclusion of specific variables</span></span>
<span id="cb263-18"><a href="#cb263-18" aria-hidden="true" tabindex="-1"></a>scope <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">lower =</span> <span class="sc">~</span> initiative <span class="sc">+</span> Month <span class="sc">+</span> Age_Range, <span class="at">upper =</span> <span class="fu">formula</span>(model_MICU1))</span>
<span id="cb263-19"><a href="#cb263-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-20"><a href="#cb263-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform backwards elimination using BIC</span></span>
<span id="cb263-21"><a href="#cb263-21" aria-hidden="true" tabindex="-1"></a>backwards_model_MICU_bic <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(model_MICU1, <span class="at">direction =</span> <span class="st">"backward"</span>, <span class="at">k =</span> <span class="fu">log</span>(n), <span class="at">scope =</span> scope)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=70072.06
Unit_LOS ~ initiative + Age_Range + Month + PT_VISITS + `AVG THERAPY LENGTH` + 
    MV_YN + initiative * MV_YN + PT_YN

                       Df   AIC
- `AVG THERAPY LENGTH`  1 70070
&lt;none&gt;                    70072
- PT_YN                 1 70093
- initiative:MV_YN      2 70101
- PT_VISITS             1 71847

Step:  AIC=70070.11
Unit_LOS ~ initiative + Age_Range + Month + PT_VISITS + MV_YN + 
    PT_YN + initiative:MV_YN

                   Df   AIC
&lt;none&gt;                70070
- PT_YN             1 70090
- initiative:MV_YN  2 70097
- PT_VISITS         1 71904</code></pre>
</div>
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary of the final model</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(backwards_model_MICU_bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + PT_YN + initiative:MV_YN, data = data_ex_clean, 
    init.theta = 4.229383529, link = log)

Coefficients:
                        Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)             4.432551   0.028026 158.161 &lt; 0.0000000000000002 ***
initiativeDuring       -0.329237   0.031607 -10.417 &lt; 0.0000000000000002 ***
initiativePost         -0.242224   0.019575 -12.374 &lt; 0.0000000000000002 ***
Age_Range40-49          0.028116   0.022252   1.264               0.2064    
Age_Range50-59          0.005061   0.019641   0.258               0.7967    
Age_Range60-69         -0.020969   0.019499  -1.075               0.2822    
Age_Range70+           -0.046988   0.020263  -2.319               0.0204 *  
Month2                  0.006697   0.030036   0.223               0.8236    
Month3                 -0.044043   0.029333  -1.501               0.1332    
Month4                  0.007337   0.029360   0.250               0.8027    
Month5                 -0.035539   0.030517  -1.165               0.2442    
Month6                 -0.009427   0.031329  -0.301               0.7635    
Month7                  0.007389   0.031227   0.237               0.8130    
Month8                  0.038125   0.030426   1.253               0.2102    
Month9                  0.054237   0.030201   1.796               0.0725 .  
Month10                -0.014733   0.029567  -0.498               0.6183    
Month11                 0.038252   0.030263   1.264               0.2062    
Month12                 0.055339   0.029741   1.861               0.0628 .  
PT_VISITS               0.132363   0.003005  44.047 &lt; 0.0000000000000002 ***
MV_YN                   0.583938   0.018565  31.454 &lt; 0.0000000000000002 ***
PT_YN                   0.084725   0.015732   5.386         0.0000000722 ***
initiativeDuring:MV_YN -0.226734   0.043356  -5.230         0.0000001699 ***
initiativePost:MV_YN   -0.146180   0.026496  -5.517         0.0000000345 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2294) family taken to be 1)

    Null deviance: 12259.1  on 6404  degrees of freedom
Residual deviance:  6599.3  on 6382  degrees of freedom
AIC: 69917

Number of Fisher Scoring iterations: 1

              Theta:  4.2294 
          Std. Err.:  0.0744 

 2 x log-likelihood:  -69868.5160 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get VIFS</span></span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(backwards_model_MICU_bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>there are higher-order terms (interactions) in this model
consider setting type = 'predictor'; see ?vif</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     GVIF Df GVIF^(1/(2*Df))
initiative       4.884285  2        1.486621
Age_Range        1.035810  4        1.004408
Month            1.078177 11        1.003427
PT_VISITS        1.511405  1        1.229392
MV_YN            2.249919  1        1.499973
PT_YN            1.502044  1        1.225579
initiative:MV_YN 7.621794  2        1.661553</code></pre>
</div>
</div>
<p>The resulting model omits only <code>AVG THERAPY LENGTH</code>. There are no issues with multicollinearity.</p>
<p>This will be selected as the final model.</p>
<p><a href="#MICU_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb270"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change MV_YN to a factor so I can change levels</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>MV_YN)</span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-4"><a href="#cb270-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb270-5"><a href="#cb270-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb270-6"><a href="#cb270-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-7"><a href="#cb270-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb270-8"><a href="#cb270-8" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb270-9"><a href="#cb270-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-10"><a href="#cb270-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb270-11"><a href="#cb270-11" aria-hidden="true" tabindex="-1"></a>model_MICU <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb270-12"><a href="#cb270-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-13"><a href="#cb270-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb270-14"><a href="#cb270-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + initiative * MV_YN + PT_YN, data = data_ex, 
    init.theta = 4.232773893, link = log)

Coefficients:
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              4.432198   0.027994 158.327 &lt; 0.0000000000000002 ***
initiativeDuring        -0.329529   0.031585 -10.433 &lt; 0.0000000000000002 ***
initiativePost          -0.242447   0.019556 -12.398 &lt; 0.0000000000000002 ***
Age_Range40-49           0.028817   0.022237   1.296               0.1950    
Age_Range50-59           0.004942   0.019628   0.252               0.8012    
Age_Range60-69          -0.021275   0.019482  -1.092               0.2748    
Age_Range70+            -0.047183   0.020252  -2.330               0.0198 *  
Month2                   0.007514   0.029983   0.251               0.8021    
Month3                  -0.043533   0.029296  -1.486               0.1373    
Month4                   0.007931   0.029309   0.271               0.7867    
Month5                  -0.034947   0.030479  -1.147               0.2516    
Month6                  -0.008850   0.031292  -0.283               0.7773    
Month7                   0.007945   0.031190   0.255               0.7989    
Month8                   0.037995   0.030361   1.251               0.2108    
Month9                   0.054427   0.030149   1.805               0.0710 .  
Month10                 -0.013038   0.029518  -0.442               0.6587    
Month11                  0.038812   0.030225   1.284               0.1991    
Month12                  0.055942   0.029703   1.883               0.0596 .  
PT_VISITS                0.132325   0.002995  44.186 &lt; 0.0000000000000002 ***
MV_YN1                   0.583684   0.018550  31.466 &lt; 0.0000000000000002 ***
PT_YN                    0.084957   0.015716   5.406         0.0000000645 ***
initiativeDuring:MV_YN1 -0.227170   0.043319  -5.244         0.0000001570 ***
initiativePost:MV_YN1   -0.146015   0.026476  -5.515         0.0000000349 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2328) family taken to be 1)

    Null deviance: 12297.6  on 6412  degrees of freedom
Residual deviance:  6607.5  on 6390  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 70010

Number of Fisher Scoring iterations: 1

              Theta:  4.2328 
          Std. Err.:  0.0744 

 2 x log-likelihood:  -69962.1400 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb272"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_MICU, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_MICU, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     GVIF Df GVIF^(1/(2*Df))
initiative       4.890998  2        1.487131
Age_Range        1.036016  4        1.004433
Month            1.078731 11        1.003451
PT_VISITS        1.512968  1        1.230028
MV_YN            2.250853  1        1.500284
PT_YN            1.501266  1        1.225262
initiative:MV_YN 7.645003  2        1.662817</code></pre>
</div>
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MICU))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.3773779</td>
<td style="text-align: right;">4.4874118</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.3909240</td>
<td style="text-align: right;">-0.2674550</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.2804583</td>
<td style="text-align: right;">-0.2043883</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0147374</td>
<td style="text-align: right;">0.0724346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0335755</td>
<td style="text-align: right;">0.0433957</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0594529</td>
<td style="text-align: right;">0.0168284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0868476</td>
<td style="text-align: right;">-0.0075588</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.0512439</td>
<td style="text-align: right;">0.0663064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1009748</td>
<td style="text-align: right;">0.0138892</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.0495681</td>
<td style="text-align: right;">0.0654062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.0946755</td>
<td style="text-align: right;">0.0248351</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.0701164</td>
<td style="text-align: right;">0.0525371</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.0531437</td>
<td style="text-align: right;">0.0691373</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.0215312</td>
<td style="text-align: right;">0.0975662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0046407</td>
<td style="text-align: right;">0.1135281</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.0708740</td>
<td style="text-align: right;">0.0447881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.0204323</td>
<td style="text-align: right;">0.0980925</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0022597</td>
<td style="text-align: right;">0.1141461</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1259558</td>
<td style="text-align: right;">0.1387635</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_YN1</td>
<td style="text-align: right;">0.5473376</td>
<td style="text-align: right;">0.6200724</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0537847</td>
<td style="text-align: right;">0.1161101</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring:MV_YN1</td>
<td style="text-align: right;">-0.3120612</td>
<td style="text-align: right;">-0.1423300</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost:MV_YN1</td>
<td style="text-align: right;">-0.1979045</td>
<td style="text-align: right;">-0.0941728</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="change-reference-level-to-during-and-non-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level-to-during-and-non-mechanical-ventilation">Change Reference Level to During and Non-Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change MV_YN to a factor so I can change levels</span></span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">factor</span>(data_ex<span class="sc">$</span>MV_YN)</span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-7"><a href="#cb277-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb277-8"><a href="#cb277-8" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb277-9"><a href="#cb277-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-10"><a href="#cb277-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb277-11"><a href="#cb277-11" aria-hidden="true" tabindex="-1"></a>model_MICU <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb277-12"><a href="#cb277-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb277-13"><a href="#cb277-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb277-14"><a href="#cb277-14" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + initiative * MV_YN + PT_YN, data = data_ex, 
    init.theta = 4.232773893, link = log)

Coefficients:
                       Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)            4.102669   0.040206 102.041 &lt; 0.0000000000000002 ***
initiativePre          0.329529   0.031585  10.433 &lt; 0.0000000000000002 ***
initiativePost         0.087082   0.031707   2.746              0.00602 ** 
Age_Range40-49         0.028817   0.022237   1.296              0.19501    
Age_Range50-59         0.004942   0.019628   0.252              0.80119    
Age_Range60-69        -0.021275   0.019482  -1.092              0.27482    
Age_Range70+          -0.047183   0.020252  -2.330              0.01982 *  
Month2                 0.007514   0.029983   0.251              0.80211    
Month3                -0.043533   0.029296  -1.486              0.13728    
Month4                 0.007931   0.029309   0.271              0.78671    
Month5                -0.034947   0.030479  -1.147              0.25155    
Month6                -0.008850   0.031292  -0.283              0.77732    
Month7                 0.007945   0.031190   0.255              0.79894    
Month8                 0.037995   0.030361   1.251              0.21078    
Month9                 0.054427   0.030149   1.805              0.07104 .  
Month10               -0.013038   0.029518  -0.442              0.65872    
Month11                0.038812   0.030225   1.284              0.19910    
Month12                0.055942   0.029703   1.883              0.05965 .  
PT_VISITS              0.132325   0.002995  44.186 &lt; 0.0000000000000002 ***
MV_YN1                 0.356515   0.039214   9.092 &lt; 0.0000000000000002 ***
PT_YN                  0.084957   0.015716   5.406         0.0000000645 ***
initiativePre:MV_YN1   0.227170   0.043319   5.244         0.0000001570 ***
initiativePost:MV_YN1  0.081155   0.043130   1.882              0.05989 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2328) family taken to be 1)

    Null deviance: 12297.6  on 6412  degrees of freedom
Residual deviance:  6607.5  on 6390  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 70010

Number of Fisher Scoring iterations: 1

              Theta:  4.2328 
          Std. Err.:  0.0744 

 2 x log-likelihood:  -69962.1400 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_MICU, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_MICU, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                      GVIF Df GVIF^(1/(2*Df))
initiative        4.890998  2        1.487131
Age_Range         1.036016  4        1.004433
Month             1.078731 11        1.003451
PT_VISITS         1.512968  1        1.230028
MV_YN            10.059119  1        3.171611
PT_YN             1.501266  1        1.225262
initiative:MV_YN 22.969128  2        2.189203</code></pre>
</div>
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MICU))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.0241777</td>
<td style="text-align: right;">4.1817738</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.2674550</td>
<td style="text-align: right;">0.3909240</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">0.0245821</td>
<td style="text-align: right;">0.1489290</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0147374</td>
<td style="text-align: right;">0.0724346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0335755</td>
<td style="text-align: right;">0.0433957</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0594529</td>
<td style="text-align: right;">0.0168284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0868476</td>
<td style="text-align: right;">-0.0075588</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.0512439</td>
<td style="text-align: right;">0.0663064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1009748</td>
<td style="text-align: right;">0.0138892</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.0495681</td>
<td style="text-align: right;">0.0654062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.0946755</td>
<td style="text-align: right;">0.0248351</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.0701164</td>
<td style="text-align: right;">0.0525371</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.0531437</td>
<td style="text-align: right;">0.0691373</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.0215312</td>
<td style="text-align: right;">0.0975662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0046407</td>
<td style="text-align: right;">0.1135281</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.0708740</td>
<td style="text-align: right;">0.0447881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.0204323</td>
<td style="text-align: right;">0.0980925</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0022597</td>
<td style="text-align: right;">0.1141461</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1259558</td>
<td style="text-align: right;">0.1387635</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_YN1</td>
<td style="text-align: right;">0.2797462</td>
<td style="text-align: right;">0.4332292</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0537847</td>
<td style="text-align: right;">0.1161101</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre:MV_YN1</td>
<td style="text-align: right;">0.1423300</td>
<td style="text-align: right;">0.3120612</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost:MV_YN1</td>
<td style="text-align: right;">-0.0033873</td>
<td style="text-align: right;">0.1657326</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-level-to-pre-and-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level-to-pre-and-mechanical-ventilation">Change Reference Level to Pre and Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"1"</span>)</span>
<span id="cb284-6"><a href="#cb284-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-7"><a href="#cb284-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb284-8"><a href="#cb284-8" aria-hidden="true" tabindex="-1"></a>model_MICU <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb284-9"><a href="#cb284-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-10"><a href="#cb284-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb284-11"><a href="#cb284-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + initiative * MV_YN + PT_YN, data = data_ex, 
    init.theta = 4.232773893, link = log)

Coefficients:
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              5.015882   0.027992 179.187 &lt; 0.0000000000000002 ***
initiativeDuring        -0.556698   0.031731 -17.544 &lt; 0.0000000000000002 ***
initiativePost          -0.388461   0.019312 -20.115 &lt; 0.0000000000000002 ***
Age_Range40-49           0.028817   0.022237   1.296               0.1950    
Age_Range50-59           0.004942   0.019628   0.252               0.8012    
Age_Range60-69          -0.021275   0.019482  -1.092               0.2748    
Age_Range70+            -0.047183   0.020252  -2.330               0.0198 *  
Month2                   0.007514   0.029983   0.251               0.8021    
Month3                  -0.043533   0.029296  -1.486               0.1373    
Month4                   0.007931   0.029309   0.271               0.7867    
Month5                  -0.034947   0.030479  -1.147               0.2516    
Month6                  -0.008850   0.031292  -0.283               0.7773    
Month7                   0.007945   0.031190   0.255               0.7989    
Month8                   0.037995   0.030361   1.251               0.2108    
Month9                   0.054427   0.030149   1.805               0.0710 .  
Month10                 -0.013038   0.029518  -0.442               0.6587    
Month11                  0.038812   0.030225   1.284               0.1991    
Month12                  0.055942   0.029703   1.883               0.0596 .  
PT_VISITS                0.132325   0.002995  44.186 &lt; 0.0000000000000002 ***
MV_YN0                  -0.583684   0.018550 -31.466 &lt; 0.0000000000000002 ***
PT_YN                    0.084957   0.015716   5.406         0.0000000645 ***
initiativeDuring:MV_YN0  0.227170   0.043319   5.244         0.0000001570 ***
initiativePost:MV_YN0    0.146015   0.026476   5.515         0.0000000349 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2328) family taken to be 1)

    Null deviance: 12297.6  on 6412  degrees of freedom
Residual deviance:  6607.5  on 6390  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 70010

Number of Fisher Scoring iterations: 1

              Theta:  4.2328 
          Std. Err.:  0.0744 

 2 x log-likelihood:  -69962.1400 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_MICU, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_MICU, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     GVIF Df GVIF^(1/(2*Df))
initiative       4.493568  2        1.455955
Age_Range        1.036016  4        1.004433
Month            1.078731 11        1.003451
PT_VISITS        1.512968  1        1.230028
MV_YN            2.250853  1        1.500284
PT_YN            1.501266  1        1.225262
initiative:MV_YN 5.785111  2        1.550879</code></pre>
</div>
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MICU))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.9610409</td>
<td style="text-align: right;">5.0711372</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.6181693</td>
<td style="text-align: right;">-0.4946384</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.4259046</td>
<td style="text-align: right;">-0.3510561</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0147374</td>
<td style="text-align: right;">0.0724346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0335755</td>
<td style="text-align: right;">0.0433957</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0594529</td>
<td style="text-align: right;">0.0168284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0868476</td>
<td style="text-align: right;">-0.0075588</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.0512439</td>
<td style="text-align: right;">0.0663064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1009748</td>
<td style="text-align: right;">0.0138892</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.0495681</td>
<td style="text-align: right;">0.0654062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.0946755</td>
<td style="text-align: right;">0.0248351</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.0701164</td>
<td style="text-align: right;">0.0525371</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.0531437</td>
<td style="text-align: right;">0.0691373</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.0215312</td>
<td style="text-align: right;">0.0975662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0046407</td>
<td style="text-align: right;">0.1135281</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.0708740</td>
<td style="text-align: right;">0.0447881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.0204323</td>
<td style="text-align: right;">0.0980925</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0022597</td>
<td style="text-align: right;">0.1141461</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1259558</td>
<td style="text-align: right;">0.1387635</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_YN0</td>
<td style="text-align: right;">-0.6200724</td>
<td style="text-align: right;">-0.5473376</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0537847</td>
<td style="text-align: right;">0.1161101</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring:MV_YN0</td>
<td style="text-align: right;">0.1423300</td>
<td style="text-align: right;">0.3120612</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost:MV_YN0</td>
<td style="text-align: right;">0.0941728</td>
<td style="text-align: right;">0.1979045</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-level-to-during-and-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level-to-during-and-mechanical-ventilation">Change Reference Level to During and Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-4"><a href="#cb291-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb291-5"><a href="#cb291-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"1"</span>)</span>
<span id="cb291-6"><a href="#cb291-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-7"><a href="#cb291-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb291-8"><a href="#cb291-8" aria-hidden="true" tabindex="-1"></a>model_MICU <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb291-9"><a href="#cb291-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb291-10"><a href="#cb291-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb291-11"><a href="#cb291-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + initiative * MV_YN + PT_YN, data = data_ex, 
    init.theta = 4.232773893, link = log)

Coefficients:
                       Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)            4.459184   0.039367 113.271 &lt; 0.0000000000000002 ***
initiativePre          0.556698   0.031731  17.544 &lt; 0.0000000000000002 ***
initiativePost         0.168237   0.030021   5.604         0.0000000209 ***
Age_Range40-49         0.028817   0.022237   1.296               0.1950    
Age_Range50-59         0.004942   0.019628   0.252               0.8012    
Age_Range60-69        -0.021275   0.019482  -1.092               0.2748    
Age_Range70+          -0.047183   0.020252  -2.330               0.0198 *  
Month2                 0.007514   0.029983   0.251               0.8021    
Month3                -0.043533   0.029296  -1.486               0.1373    
Month4                 0.007931   0.029309   0.271               0.7867    
Month5                -0.034947   0.030479  -1.147               0.2516    
Month6                -0.008850   0.031292  -0.283               0.7773    
Month7                 0.007945   0.031190   0.255               0.7989    
Month8                 0.037995   0.030361   1.251               0.2108    
Month9                 0.054427   0.030149   1.805               0.0710 .  
Month10               -0.013038   0.029518  -0.442               0.6587    
Month11                0.038812   0.030225   1.284               0.1991    
Month12                0.055942   0.029703   1.883               0.0596 .  
PT_VISITS              0.132325   0.002995  44.186 &lt; 0.0000000000000002 ***
MV_YN0                -0.356515   0.039214  -9.092 &lt; 0.0000000000000002 ***
PT_YN                  0.084957   0.015716   5.406         0.0000000645 ***
initiativePre:MV_YN0  -0.227170   0.043319  -5.244         0.0000001570 ***
initiativePost:MV_YN0 -0.081155   0.043130  -1.882               0.0599 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2328) family taken to be 1)

    Null deviance: 12297.6  on 6412  degrees of freedom
Residual deviance:  6607.5  on 6390  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 70010

Number of Fisher Scoring iterations: 1

              Theta:  4.2328 
          Std. Err.:  0.0744 

 2 x log-likelihood:  -69962.1400 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_MICU, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_MICU, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                      GVIF Df GVIF^(1/(2*Df))
initiative        4.493568  2        1.455955
Age_Range         1.036016  4        1.004433
Month             1.078731 11        1.003451
PT_VISITS         1.512968  1        1.230028
MV_YN            10.059119  1        3.171611
PT_YN             1.501266  1        1.225262
initiative:MV_YN 21.561910  2        2.154874</code></pre>
</div>
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MICU))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.3825603</td>
<td style="text-align: right;">4.5364016</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.4946384</td>
<td style="text-align: right;">0.6181693</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">0.1090984</td>
<td style="text-align: right;">0.2267173</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0147374</td>
<td style="text-align: right;">0.0724346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0335755</td>
<td style="text-align: right;">0.0433957</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0594529</td>
<td style="text-align: right;">0.0168284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0868476</td>
<td style="text-align: right;">-0.0075588</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.0512439</td>
<td style="text-align: right;">0.0663064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1009748</td>
<td style="text-align: right;">0.0138892</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.0495681</td>
<td style="text-align: right;">0.0654062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.0946755</td>
<td style="text-align: right;">0.0248351</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.0701164</td>
<td style="text-align: right;">0.0525371</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.0531437</td>
<td style="text-align: right;">0.0691373</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.0215312</td>
<td style="text-align: right;">0.0975662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0046407</td>
<td style="text-align: right;">0.1135281</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.0708740</td>
<td style="text-align: right;">0.0447881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.0204323</td>
<td style="text-align: right;">0.0980925</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0022597</td>
<td style="text-align: right;">0.1141461</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1259558</td>
<td style="text-align: right;">0.1387635</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_YN0</td>
<td style="text-align: right;">-0.4332292</td>
<td style="text-align: right;">-0.2797462</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0537847</td>
<td style="text-align: right;">0.1161101</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre:MV_YN0</td>
<td style="text-align: right;">-0.3120612</td>
<td style="text-align: right;">-0.1423300</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost:MV_YN0</td>
<td style="text-align: right;">-0.1657326</td>
<td style="text-align: right;">0.0033873</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="change-reference-level-to-post-and-non-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level-to-post-and-non-mechanical-ventilation">Change Reference Level to Post and Non Mechanical Ventilation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Post"</span>)</span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb298-6"><a href="#cb298-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-7"><a href="#cb298-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb298-8"><a href="#cb298-8" aria-hidden="true" tabindex="-1"></a>model_MICU <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb298-9"><a href="#cb298-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-10"><a href="#cb298-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb298-11"><a href="#cb298-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = Unit_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + initiative * MV_YN + PT_YN, data = data_ex, 
    init.theta = 4.232773893, link = log)

Coefficients:
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              4.189751   0.029335 142.824 &lt; 0.0000000000000002 ***
initiativeDuring        -0.087082   0.031707  -2.746              0.00602 ** 
initiativePre            0.242447   0.019556  12.398 &lt; 0.0000000000000002 ***
Age_Range40-49           0.028817   0.022237   1.296              0.19501    
Age_Range50-59           0.004942   0.019628   0.252              0.80119    
Age_Range60-69          -0.021275   0.019482  -1.092              0.27482    
Age_Range70+            -0.047183   0.020252  -2.330              0.01982 *  
Month2                   0.007514   0.029983   0.251              0.80211    
Month3                  -0.043533   0.029296  -1.486              0.13728    
Month4                   0.007931   0.029309   0.271              0.78671    
Month5                  -0.034947   0.030479  -1.147              0.25155    
Month6                  -0.008850   0.031292  -0.283              0.77732    
Month7                   0.007945   0.031190   0.255              0.79894    
Month8                   0.037995   0.030361   1.251              0.21078    
Month9                   0.054427   0.030149   1.805              0.07104 .  
Month10                 -0.013038   0.029518  -0.442              0.65872    
Month11                  0.038812   0.030225   1.284              0.19910    
Month12                  0.055942   0.029703   1.883              0.05965 .  
PT_VISITS                0.132325   0.002995  44.186 &lt; 0.0000000000000002 ***
MV_YN1                   0.437670   0.019001  23.034 &lt; 0.0000000000000002 ***
PT_YN                    0.084957   0.015716   5.406         0.0000000645 ***
initiativeDuring:MV_YN1 -0.081155   0.043130  -1.882              0.05989 .  
initiativePre:MV_YN1     0.146015   0.026476   5.515         0.0000000349 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(4.2328) family taken to be 1)

    Null deviance: 12297.6  on 6412  degrees of freedom
Residual deviance:  6607.5  on 6390  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 70010

Number of Fisher Scoring iterations: 1

              Theta:  4.2328 
          Std. Err.:  0.0744 

 2 x log-likelihood:  -69962.1400 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_MICU, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_MICU, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                     GVIF Df GVIF^(1/(2*Df))
initiative       4.890998  2        1.487131
Age_Range        1.036016  4        1.004433
Month            1.078731 11        1.003451
PT_VISITS        1.512968  1        1.230028
MV_YN            2.361731  1        1.536792
PT_YN            1.501266  1        1.225262
initiative:MV_YN 6.582019  2        1.601732</code></pre>
</div>
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MICU))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">4.1323562</td>
<td style="text-align: right;">4.2475341</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.1489290</td>
<td style="text-align: right;">-0.0245821</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.2043883</td>
<td style="text-align: right;">0.2804583</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0147374</td>
<td style="text-align: right;">0.0724346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0335755</td>
<td style="text-align: right;">0.0433957</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0594529</td>
<td style="text-align: right;">0.0168284</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0868476</td>
<td style="text-align: right;">-0.0075588</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.0512439</td>
<td style="text-align: right;">0.0663064</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1009748</td>
<td style="text-align: right;">0.0138892</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.0495681</td>
<td style="text-align: right;">0.0654062</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.0946755</td>
<td style="text-align: right;">0.0248351</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.0701164</td>
<td style="text-align: right;">0.0525371</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.0531437</td>
<td style="text-align: right;">0.0691373</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.0215312</td>
<td style="text-align: right;">0.0975662</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0046407</td>
<td style="text-align: right;">0.1135281</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.0708740</td>
<td style="text-align: right;">0.0447881</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.0204323</td>
<td style="text-align: right;">0.0980925</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0022597</td>
<td style="text-align: right;">0.1141461</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1259558</td>
<td style="text-align: right;">0.1387635</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_YN1</td>
<td style="text-align: right;">0.4004717</td>
<td style="text-align: right;">0.4748143</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0537847</td>
<td style="text-align: right;">0.1161101</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring:MV_YN1</td>
<td style="text-align: right;">-0.1657326</td>
<td style="text-align: right;">0.0033873</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePre:MV_YN1</td>
<td style="text-align: right;">0.0941728</td>
<td style="text-align: right;">0.1979045</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><a href="#MICU_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-9-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-4-tab">
<section id="qi-initiative-2" class="level3">
<h3 class="anchored" data-anchor-id="qi-initiative-2">QI-Initiative</h3>
<p>QI-initiative time period was a significant predictor of MICU length of stay, while controlling for age, admission month, reception of physical therapy, and the number of physical therapy visits. The relationship between QI-initiative and MICU length of stay depended on mechanical ventilation status.</p>
<section id="qi-initiative-for-non-mechanical-ventilation" class="level5">
<h5 class="anchored" data-anchor-id="qi-initiative-for-non-mechanical-ventilation">QI-Initiative for Non Mechanical Ventilation</h5>
<p>For those who were not mechanically ventilated, patients admitted in the During period had a mean MICU length of stay that was 0.72 times that of patients admitted in the Pre period (z = -10.54, 95% CI: [0.68,0.76], p &lt; 0.0001), and patients admitted in the Post period had a mean MICU length stay that was 0.78 times that of patients admitted in the Pre time period (z = -12.49, 95% CI: [0.75, 0.81], p &lt; 0.0001). Those in the Post period had a mean MICU length of stay that was 1.09 times higher than patients during the During period (z = 2.78, 95% CI: [1.03,1.16], p = 0.00551).</p>
</section>
<section id="qi-initiative-for-mechanical-ventilation" class="level5">
<h5 class="anchored" data-anchor-id="qi-initiative-for-mechanical-ventilation">QI-Initiative for Mechanical Ventilation</h5>
<p>For those who were mechanically ventilated, patients admitted in the During period had a mean MICU length of stay that was 0.57 times that of patients admitted in the Pre period (z = -17.55, 95% CI: [0.54,0.61], p &lt; 0.0001), and patients admitted in the Post period had a mean MICU length stay that was 0.68 times that of patients admitted in the Pre time period (z = -20.14, 95% CI: [0.65, 0.35], p &lt; 0.0001). Those in the Post period had a mean MICU length of stay that was 1.18 times higher than patients during the During period (z = 5.60, 95% CI: [1.12,1.25], p &lt; 0.0001 ).</p>
</section>
</section>
<section id="mechanical-ventilation-2" class="level3">
<h3 class="anchored" data-anchor-id="mechanical-ventilation-2">Mechanical Ventilation</h3>
<p>Mechanical ventilation was a significant predictor of MICU length of stay, while controlling for age, admission month, reception of physical therapy, and the number of physical therapy visits. The relationship between Mechanical Ventilation and MICU length of stay differed based on the QI-initiative time period.</p>
<section id="mechanical-ventilation-in-the-pre-initiative-period" class="level5">
<h5 class="anchored" data-anchor-id="mechanical-ventilation-in-the-pre-initiative-period">Mechanical Ventilation in the Pre-Initiative Period</h5>
<p>For those in the Pre period, patients who were mechanically ventilated had a mean MICU length of stay that was 1.79 times greater than patients who were not mechanically ventilated (z = 31.451, 95% CI: [1.73, 1.86], p &lt; 0.0001).</p>
</section>
<section id="mechanical-ventilation-in-the-during-initiative-period" class="level5">
<h5 class="anchored" data-anchor-id="mechanical-ventilation-in-the-during-initiative-period">Mechanical Ventilation in the During-Initiative Period</h5>
<p>For those in the During period, patients who were mechanically ventilated had a mean MICU length of stay that was 1.43 times greater than patients who were not mechanically ventilated (z = 9.141, 95% CI: [1.32, 1.54], p &lt; 0.0001).</p>
</section>
<section id="mechanical-ventilation-in-the-post-initiative-period" class="level5">
<h5 class="anchored" data-anchor-id="mechanical-ventilation-in-the-post-initiative-period">Mechanical Ventilation in the Post-Initiative Period</h5>
<p>For those in the Post period, patients who were mechanically ventilated had a mean MICU length of stay that was 1.55 times greater than patients who were not mechanically ventilated (z = 23.09, 95% CI: [1.49, 1.61], p &lt; 0.0001).</p>
</section>
<section id="additional-interaction-comparisons" class="level4">
<h4 class="anchored" data-anchor-id="additional-interaction-comparisons">Additional Interaction Comparisons</h4>
<p>There are additional comparisons we can make in the interaction between initiative and mechanical ventilation, but they pose little clinical relevance and will thus not be examined further (e.g.&nbsp;no mechanical ventilation and Pre period vs mechanical ventilation and Post period).</p>
</section>
</section>
<section id="age-range-1" class="level3">
<h3 class="anchored" data-anchor-id="age-range-1">Age Range</h3>
<p>When accounting for multiple pairwise comparisons, age range is not a significant predictor of MICU length of stay while controlling for the other variables in the model (all p’s &gt; 0.05).</p>
</section>
<section id="admission-month" class="level3">
<h3 class="anchored" data-anchor-id="admission-month">Admission Month</h3>
<p>When accounting for multiple pairwise comparisons, admission month is not a significant predictor of MICU length of stay while controlling for the other variables in the model (all p’s &gt; 0.05).</p>
</section>
<section id="physical-therapy" class="level3">
<h3 class="anchored" data-anchor-id="physical-therapy">Physical Therapy</h3>
<p>Reception of physical therapy was a signicant predictor of MICU length of stay, when controlling for the other variables in the model. Patients who received physical therapy had a mean MICU length of stay that was 1.09 times greater than those who did not receive physical therapy (z = 5.40, 95% CI: [1.05, 1.12], p = &lt; 0.0001).</p>
</section>
<section id="physical-therapy-visits-1" class="level3">
<h3 class="anchored" data-anchor-id="physical-therapy-visits-1">Physical Therapy Visits</h3>
<p>Number of physical therapy visits was a significant predictor of MICU length of stay, when controlling for the other variables in the model. On average, each 1 visit increase was associated with a 1.14 times increase in MICU length of stay (z = 44.23, 95% CI: [1.13,1.15], p &lt; 0.0001).</p>
<p><a href="#MICU_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-9-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(interactions)</span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Change levels for optimal plot</span></span>
<span id="cb305-4"><a href="#cb305-4" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb305-5"><a href="#cb305-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb305-6"><a href="#cb305-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-7"><a href="#cb305-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb305-8"><a href="#cb305-8" aria-hidden="true" tabindex="-1"></a>model_MICU <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(Unit_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb305-9"><a href="#cb305-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb305-10"><a href="#cb305-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Use interactions package to plot interaction</span></span>
<span id="cb305-11"><a href="#cb305-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cat_plot</span>(</span>
<span id="cb305-12"><a href="#cb305-12" aria-hidden="true" tabindex="-1"></a>  model_MICU, </span>
<span id="cb305-13"><a href="#cb305-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">pred =</span> initiative, </span>
<span id="cb305-14"><a href="#cb305-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">modx =</span> MV_YN, </span>
<span id="cb305-15"><a href="#cb305-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">geom =</span> <span class="st">"line"</span>, </span>
<span id="cb305-16"><a href="#cb305-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">colors =</span> <span class="st">"Pastel2"</span>,</span>
<span id="cb305-17"><a href="#cb305-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">x.label =</span> <span class="st">"QI-Initiative Time Period"</span>,</span>
<span id="cb305-18"><a href="#cb305-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">y.label =</span> <span class="st">"Predicted MICU Length of Stay"</span>,</span>
<span id="cb305-19"><a href="#cb305-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">main.title =</span> <span class="st">"MICU Length of Stay by QI-Initiative Time Period and Mechanical Ventilation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-130-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="plot-differences-between-mechanical-ventilation-status" class="level4">
<h4 class="anchored" data-anchor-id="plot-differences-between-mechanical-ventilation-status">Plot Differences between Mechanical Ventilation Status</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel for proper output</span></span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb306-3"><a href="#cb306-3" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb306-4"><a href="#cb306-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-5"><a href="#cb306-5" aria-hidden="true" tabindex="-1"></a><span class="do">### this is from chat gpt</span></span>
<span id="cb306-6"><a href="#cb306-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new data frame for predictions</span></span>
<span id="cb306-7"><a href="#cb306-7" aria-hidden="true" tabindex="-1"></a>new_data <span class="ot">&lt;-</span> data_ex <span class="sc">%&gt;%</span></span>
<span id="cb306-8"><a href="#cb306-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">expand.grid</span>(</span>
<span id="cb306-9"><a href="#cb306-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">initiative =</span> <span class="fu">unique</span>(data_ex<span class="sc">$</span>initiative),</span>
<span id="cb306-10"><a href="#cb306-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">MV_YN =</span> <span class="fu">unique</span>(data_ex<span class="sc">$</span>MV_YN),</span>
<span id="cb306-11"><a href="#cb306-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age_Range =</span> <span class="fu">unique</span>(data_ex<span class="sc">$</span>Age_Range),</span>
<span id="cb306-12"><a href="#cb306-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Month =</span> <span class="fu">unique</span>(data_ex<span class="sc">$</span>Month),</span>
<span id="cb306-13"><a href="#cb306-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">PT_VISITS =</span> <span class="fu">mean</span>(data_ex<span class="sc">$</span>PT_VISITS, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb306-14"><a href="#cb306-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">PT_YN =</span> <span class="fu">unique</span>(data_ex<span class="sc">$</span>PT_YN)</span>
<span id="cb306-15"><a href="#cb306-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb306-16"><a href="#cb306-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-17"><a href="#cb306-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict using the model</span></span>
<span id="cb306-18"><a href="#cb306-18" aria-hidden="true" tabindex="-1"></a>new_data<span class="sc">$</span>predicted_LOS <span class="ot">&lt;-</span> <span class="fu">predict</span>(model_MICU, <span class="at">newdata =</span> new_data, <span class="at">type =</span> <span class="st">"response"</span>)</span>
<span id="cb306-19"><a href="#cb306-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb306-20"><a href="#cb306-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the differences</span></span>
<span id="cb306-21"><a href="#cb306-21" aria-hidden="true" tabindex="-1"></a>new_data_summ <span class="ot">&lt;-</span> new_data <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(initiative, MV_YN) <span class="sc">%&gt;%</span> </span>
<span id="cb306-22"><a href="#cb306-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( <span class="at">mean_LOS =</span> <span class="fu">mean</span>(predicted_LOS, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb306-23"><a href="#cb306-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">diff_LOS =</span> mean_LOS <span class="sc">-</span> <span class="fu">lag</span>(mean_LOS)) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'initiative'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine the differences</span></span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(new_data_summ)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">initiative</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">MV_YN</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_LOS</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">diff_LOS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Pre</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">199.8024</td>
<td style="text-align: right;">88.34475</td>
</tr>
<tr class="even">
<td style="text-align: left;">During</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">114.5064</td>
<td style="text-align: right;">34.33906</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Post</td>
<td style="text-align: left;">1</td>
<td style="text-align: right;">135.4859</td>
<td style="text-align: right;">48.02445</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the differences</span></span>
<span id="cb309-2"><a href="#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(new_data_summ, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> diff_LOS, <span class="at">fill =</span> initiative)) <span class="sc">+</span></span>
<span id="cb309-3"><a href="#cb309-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb309-4"><a href="#cb309-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>, <span class="at">name =</span> <span class="st">"Mechanical Ventilation"</span>) <span class="sc">+</span></span>
<span id="cb309-5"><a href="#cb309-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb309-6"><a href="#cb309-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Differences in MICU Length of Stay between Mechanical Ventilation and Non MV"</span>,</span>
<span id="cb309-7"><a href="#cb309-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative Time Period"</span>,</span>
<span id="cb309-8"><a href="#cb309-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Predicted MICU Length of Stay"</span>,</span>
<span id="cb309-9"><a href="#cb309-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"QI-Initiative"</span>) <span class="sc">+</span></span>
<span id="cb309-10"><a href="#cb309-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb309-11"><a href="#cb309-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-131-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="plot-main-effect" class="level4">
<h4 class="anchored" data-anchor-id="plot-main-effect">Plot Main Effect</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: initiative is not a high-order term in the model</code></pre>
</div>
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb312-4"><a href="#cb312-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb312-5"><a href="#cb312-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb312-6"><a href="#cb312-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb312-7"><a href="#cb312-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb312-8"><a href="#cb312-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb312-9"><a href="#cb312-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb312-10"><a href="#cb312-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Mechanical Ventilation Time by QI-Initiative Time Period"</span>,</span>
<span id="cb312-11"><a href="#cb312-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative"</span>,</span>
<span id="cb312-12"><a href="#cb312-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Mechanical Ventilation Time"</span></span>
<span id="cb312-13"><a href="#cb312-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb312-14"><a href="#cb312-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-132-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#MICU_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-9-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-6-tab">
<p>There was a significant interaction between QI-initiative time period and mechanical ventilation on MICU length of stay, when controlling for age, admission month, reception of physical therapy, and number of physical therapy visits.</p>
<section id="mechanical-ventilation-3" class="level4">
<h4 class="anchored" data-anchor-id="mechanical-ventilation-3">Mechanical Ventilation</h4>
<p>Across the board, patients who were mechanically ventilated had a longer average MICU length of stay than those were not, regardless of QI-initiative time period.</p>
</section>
<section id="qi-initiative-time-period-1" class="level4">
<h4 class="anchored" data-anchor-id="qi-initiative-time-period-1">QI-Initiative Time Period</h4>
<p>The QI-initiative was successful at reducing the MICU length of stay for both patients that were mechanically ventilated and those who were not.</p>
<p>Moreover, the difference in MICU length of stay between patients who were mechanically ventilated and those who were not decreased in the During and Post periods compared to the Pre period. On average, those were mechanically ventilated in the Pre period had a predicted MICU length of stay that was 86.39 hours more than those were not, compared to only 33.69 hours in the During period, and 47.02 hours in the Post period.</p>
<p>In other words, the QI-initiative decreased the average MICU length of stay by at least 48 hours for those who were mechanically ventilated!</p>
<p><a href="#MICU_LOS">Top of Tabset</a></p>
</section>
</div>
</div>
</div>
</section>
<section id="MV" class="level2">
<h2 class="anchored" data-anchor-id="MV">MV Time</h2>
<p>Primary question B of the study was whether the QI-initiative successfully decreased the total mechanical ventilation time.</p>
<p>To assess this we will run a Poisson or Negative Binomial Regression model predicting UNIT LOS:</p>
<p><span class="math inline">\(Log( E(MV Total | QI-Initiative_i ) ) = β_0 + β_1 * QI-Initiative_i + β2 *Covariates_i + ...\)</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true">Covariates</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false">Model Selection</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-4" role="tab" aria-controls="tabset-10-4" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-5" role="tab" aria-controls="tabset-10-5" aria-selected="false">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-6" role="tab" aria-controls="tabset-10-6" aria-selected="false">Age Range</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-7" role="tab" aria-controls="tabset-10-7" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<p>The same variables that were potential covariates for primary question A will be selected for this model. These are:</p>
<p>PT_VISITS AVERAGE THERAPY LENGTH MV_YN initiative<em>MV_YN PT_YN initiative</em>PT_YN</p>
<p>Additionally, since patients that were not mechanically ventilated have a <code>MV_Total</code> time of <code>NA</code>, an interaction term using <code>MV_YN</code> cannot be used, and thus will be dropped from consideration in this model.</p>
<p><a href="#MV">Top of Tabset</a></p>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<section id="check-for-zero-inflation-1" class="level4">
<h4 class="anchored" data-anchor-id="check-for-zero-inflation-1">Check for Zero Inflation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb313"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if MV Total is zero inflated</span></span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(data_ex<span class="sc">$</span>MV_Total, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><code>MV_Total</code> does not have any values of 0, and thus cannot be zero inflated.</p>
</section>
<section id="check-for-overdispersion-3" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-3">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb315"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb315-2"><a href="#cb315-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span>MV_Total, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 6.10174685871897"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span>MV_Total, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 26.135567149879"</code></pre>
</div>
</div>
<p>The variance is higher than the mean, and thus we have overdisperion and will use a negative binomial regression.</p>
</section>
<section id="full-model-1" class="level4">
<h4 class="anchored" data-anchor-id="full-model-1">Full Model</h4>
<p>We will first begin with a saturated model of all potential covariates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-4"><a href="#cb319-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb319-5"><a href="#cb319-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb319-6"><a href="#cb319-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-7"><a href="#cb319-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb319-8"><a href="#cb319-8" aria-hidden="true" tabindex="-1"></a>model_full <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> PT_YN <span class="sc">+</span> initiative<span class="sc">*</span>PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb319-9"><a href="#cb319-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-10"><a href="#cb319-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb319-11"><a href="#cb319-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = MV_Total ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + PT_YN + initiative * PT_YN, 
    data = data_ex, init.theta = 3.522878931, link = log)

Coefficients:
                        Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)             1.660254   0.050675  32.763 &lt; 0.0000000000000002 ***
initiativeDuring       -0.182827   0.108299  -1.688             0.091378 .  
initiativePost         -0.067207   0.046243  -1.453             0.146125    
Age_Range40-49          0.045644   0.042371   1.077             0.281374    
Age_Range50-59          0.039109   0.037009   1.057             0.290629    
Age_Range60-69          0.015927   0.036911   0.431             0.666111    
Age_Range70+            0.018048   0.039275   0.460             0.645851    
Month2                 -0.079008   0.055040  -1.435             0.151156    
Month3                 -0.135656   0.056051  -2.420             0.015511 *  
Month4                 -0.074602   0.054855  -1.360             0.173836    
Month5                 -0.171708   0.057890  -2.966             0.003016 ** 
Month6                 -0.084213   0.058297  -1.445             0.148582    
Month7                 -0.153356   0.060965  -2.515             0.011888 *  
Month8                 -0.106208   0.058671  -1.810             0.070259 .  
Month9                  0.013727   0.056188   0.244             0.806998    
Month10                -0.168900   0.055660  -3.035             0.002409 ** 
Month11                -0.046431   0.056163  -0.827             0.408395    
Month12                -0.001905   0.053954  -0.035             0.971840    
PT_VISITS               0.116184   0.004477  25.950 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH`   -0.004124   0.001175  -3.511             0.000446 ***
PT_YN                   0.271979   0.053225   5.110          0.000000322 ***
initiativeDuring:PT_YN -0.346605   0.119130  -2.909             0.003620 ** 
initiativePost:PT_YN   -0.292881   0.057472  -5.096          0.000000347 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(3.5229) family taken to be 1)

    Null deviance: 4036.1  on 3255  degrees of freedom
Residual deviance: 3158.3  on 3233  degrees of freedom
  (3173 observations deleted due to missingness)
AIC: 17271

Number of Fisher Scoring iterations: 1

              Theta:  3.523 
          Std. Err.:  0.135 

 2 x log-likelihood:  -17222.941 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine multicollinearity</span></span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a><span class="fu">vif</span>(model_full, <span class="at">type =</span> <span class="st">'predictor'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in vif.lm(model_full, type = "predictor"): type = 'predictor' is available only for unweighted linear models;
  type = 'terms' will be used</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                          GVIF Df GVIF^(1/(2*Df))
initiative           25.007318  2        2.236232
Age_Range             1.042280  4        1.005190
Month                 1.099131 11        1.004306
PT_VISITS             1.577196  1        1.255865
`AVG THERAPY LENGTH`  3.548943  1        1.883864
PT_YN                 4.367740  1        2.089914
initiative:PT_YN     40.417637  2        2.521406</code></pre>
</div>
</div>
<p>We have multicollinearity on the <code>initiative*PT_YN</code> interaction again. We will remove this interaction.</p>
</section>
<section id="backwards-elimination-1" class="level4">
<h4 class="anchored" data-anchor-id="backwards-elimination-1">Backwards Elimination</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get cleaned data set with missing values omitted because this is necessary with the MASS package</span></span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a>data_ex_clean <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(MV_Total, initiative, Age_Range, Month, PT_VISITS, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, PT_YN)</span>
<span id="cb324-4"><a href="#cb324-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-5"><a href="#cb324-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with missing values</span></span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true" tabindex="-1"></a>data_ex_clean <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_ex_clean)</span>
<span id="cb324-7"><a href="#cb324-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-8"><a href="#cb324-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Negative Binomial model</span></span>
<span id="cb324-9"><a href="#cb324-9" aria-hidden="true" tabindex="-1"></a>model_MV <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex_clean)</span>
<span id="cb324-10"><a href="#cb324-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-11"><a href="#cb324-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Set n to the number of observations in the dataset</span></span>
<span id="cb324-12"><a href="#cb324-12" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data_ex_clean)</span>
<span id="cb324-13"><a href="#cb324-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb324-14"><a href="#cb324-14" aria-hidden="true" tabindex="-1"></a>scope</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$lower
~initiative + Month + Age_Range

$upper
Unit_LOS ~ initiative + Age_Range + Month + PT_VISITS + `AVG THERAPY LENGTH` + 
    MV_YN + initiative * MV_YN + PT_YN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the scope to force the inclusion of specific variables</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>scope <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">lower =</span> MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Month <span class="sc">+</span> Age_Range, <span class="at">upper =</span> <span class="fu">formula</span>(model_MV))</span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform backwards elimination using BIC</span></span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a>backwards_model_MV_bic <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(model_MV, <span class="at">direction =</span> <span class="st">"backward"</span>, <span class="at">k =</span> <span class="fu">log</span>(n), <span class="at">scope =</span> scope)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=17421.88
MV_Total ~ initiative + Age_Range + Month + PT_VISITS + `AVG THERAPY LENGTH` + 
    PT_YN

                       Df   AIC
&lt;none&gt;                    17422
- PT_YN                 1 17423
- `AVG THERAPY LENGTH`  1 17425
- PT_VISITS             1 17978</code></pre>
</div>
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine selected model</span></span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(backwards_model_MV_bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = MV_Total ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + PT_YN, data = data_ex_clean, 
    init.theta = 3.481985213, link = log)

Coefficients:
                       Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)           1.7278241  0.0493325  35.024 &lt; 0.0000000000000002 ***
initiativeDuring     -0.4187792  0.0458997  -9.124 &lt; 0.0000000000000002 ***
initiativePost       -0.2512336  0.0276680  -9.080 &lt; 0.0000000000000002 ***
Age_Range40-49        0.0423662  0.0424712   0.998             0.318509    
Age_Range50-59        0.0377523  0.0371155   1.017             0.309079    
Age_Range60-69        0.0103329  0.0370215   0.279             0.780163    
Age_Range70+          0.0115508  0.0393926   0.293             0.769353    
Month2               -0.0816017  0.0552061  -1.478             0.139373    
Month3               -0.1303677  0.0561933  -2.320             0.020342 *  
Month4               -0.0754712  0.0550260  -1.372             0.170202    
Month5               -0.1741105  0.0580487  -2.999             0.002705 ** 
Month6               -0.0839495  0.0584616  -1.436             0.151009    
Month7               -0.1542573  0.0611603  -2.522             0.011663 *  
Month8               -0.1077130  0.0588588  -1.830             0.067247 .  
Month9                0.0241076  0.0563193   0.428             0.668614    
Month10              -0.1681626  0.0558234  -3.012             0.002592 ** 
Month11              -0.0417061  0.0563135  -0.741             0.458932    
Month12               0.0007327  0.0540949   0.014             0.989193    
PT_VISITS             0.1115364  0.0044348  25.150 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH` -0.0039679  0.0011782  -3.368             0.000758 ***
PT_YN                 0.1399711  0.0476158   2.940             0.003286 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(3.482) family taken to be 1)

    Null deviance: 4007.0  on 3255  degrees of freedom
Residual deviance: 3164.9  on 3235  degrees of freedom
AIC: 17296

Number of Fisher Scoring iterations: 1

              Theta:  3.482 
          Std. Err.:  0.133 

 2 x log-likelihood:  -17252.030 </code></pre>
</div>
</div>
<p>Backwards elimination includes all variables, and thus this will be selected as the final model.</p>
<p><a href="#MV">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the reference level</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb330-3"><a href="#cb330-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-4"><a href="#cb330-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the reference level</span></span>
<span id="cb330-5"><a href="#cb330-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb330-6"><a href="#cb330-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-7"><a href="#cb330-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the negative binomial regression</span></span>
<span id="cb330-8"><a href="#cb330-8" aria-hidden="true" tabindex="-1"></a>model_MV <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb330-9"><a href="#cb330-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb330-10"><a href="#cb330-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine model</span></span>
<span id="cb330-11"><a href="#cb330-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MV)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = MV_Total ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + PT_YN, data = data_ex, 
    init.theta = 3.481985213, link = log)

Coefficients:
                       Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)           1.7278241  0.0493325  35.024 &lt; 0.0000000000000002 ***
initiativeDuring     -0.4187792  0.0458997  -9.124 &lt; 0.0000000000000002 ***
initiativePost       -0.2512336  0.0276680  -9.080 &lt; 0.0000000000000002 ***
Age_Range40-49        0.0423662  0.0424712   0.998             0.318509    
Age_Range50-59        0.0377523  0.0371155   1.017             0.309079    
Age_Range60-69        0.0103329  0.0370215   0.279             0.780163    
Age_Range70+          0.0115508  0.0393926   0.293             0.769353    
Month2               -0.0816017  0.0552061  -1.478             0.139373    
Month3               -0.1303677  0.0561933  -2.320             0.020342 *  
Month4               -0.0754712  0.0550260  -1.372             0.170202    
Month5               -0.1741105  0.0580487  -2.999             0.002705 ** 
Month6               -0.0839495  0.0584616  -1.436             0.151009    
Month7               -0.1542573  0.0611603  -2.522             0.011663 *  
Month8               -0.1077130  0.0588588  -1.830             0.067247 .  
Month9                0.0241076  0.0563193   0.428             0.668614    
Month10              -0.1681626  0.0558234  -3.012             0.002592 ** 
Month11              -0.0417061  0.0563135  -0.741             0.458932    
Month12               0.0007327  0.0540949   0.014             0.989193    
PT_VISITS             0.1115364  0.0044348  25.150 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH` -0.0039679  0.0011782  -3.368             0.000758 ***
PT_YN                 0.1399711  0.0476158   2.940             0.003286 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(3.482) family taken to be 1)

    Null deviance: 4007.0  on 3255  degrees of freedom
Residual deviance: 3164.9  on 3235  degrees of freedom
  (3173 observations deleted due to missingness)
AIC: 17296

Number of Fisher Scoring iterations: 1

              Theta:  3.482 
          Std. Err.:  0.133 

 2 x log-likelihood:  -17252.030 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MV))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">1.6309860</td>
<td style="text-align: right;">1.8250625</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.5086721</td>
<td style="text-align: right;">-0.3287499</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.3050203</td>
<td style="text-align: right;">-0.1975103</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0408593</td>
<td style="text-align: right;">0.1256731</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0350702</td>
<td style="text-align: right;">0.1105221</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0622156</td>
<td style="text-align: right;">0.0828206</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0655918</td>
<td style="text-align: right;">0.0886905</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.1898129</td>
<td style="text-align: right;">0.0266320</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2404426</td>
<td style="text-align: right;">-0.0202635</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1833071</td>
<td style="text-align: right;">0.0323680</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2879599</td>
<td style="text-align: right;">-0.0602188</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.1985050</td>
<td style="text-align: right;">0.0307507</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.2739578</td>
<td style="text-align: right;">-0.0343711</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2229273</td>
<td style="text-align: right;">0.0076251</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0863610</td>
<td style="text-align: right;">0.1346781</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2776651</td>
<td style="text-align: right;">-0.0586800</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.1519512</td>
<td style="text-align: right;">0.0686068</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.1051617</td>
<td style="text-align: right;">0.1066180</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1021283</td>
<td style="text-align: right;">0.1210575</td>
</tr>
<tr class="even">
<td style="text-align: left;">`AVG THERAPY LENGTH`</td>
<td style="text-align: right;">-0.0062506</td>
<td style="text-align: right;">-0.0016832</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0474993</td>
<td style="text-align: right;">0.2325356</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="change-reference-category-to-during" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-category-to-during">Change Reference Category to During</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change the reference level</span></span>
<span id="cb334-2"><a href="#cb334-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb334-3"><a href="#cb334-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-4"><a href="#cb334-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the negative binomial regression</span></span>
<span id="cb334-5"><a href="#cb334-5" aria-hidden="true" tabindex="-1"></a>model_MV <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb334-6"><a href="#cb334-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb334-7"><a href="#cb334-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine model</span></span>
<span id="cb334-8"><a href="#cb334-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_MV)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = MV_Total ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + PT_YN, data = data_ex, 
    init.theta = 3.481985213, link = log)

Coefficients:
                       Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)           1.3090449  0.0660577  19.817 &lt; 0.0000000000000002 ***
initiativePre         0.4187792  0.0458997   9.124 &lt; 0.0000000000000002 ***
initiativePost        0.1675456  0.0427248   3.922             0.000088 ***
Age_Range40-49        0.0423662  0.0424712   0.998             0.318509    
Age_Range50-59        0.0377523  0.0371155   1.017             0.309079    
Age_Range60-69        0.0103329  0.0370215   0.279             0.780163    
Age_Range70+          0.0115508  0.0393926   0.293             0.769353    
Month2               -0.0816017  0.0552061  -1.478             0.139373    
Month3               -0.1303677  0.0561933  -2.320             0.020342 *  
Month4               -0.0754712  0.0550260  -1.372             0.170202    
Month5               -0.1741105  0.0580487  -2.999             0.002705 ** 
Month6               -0.0839495  0.0584616  -1.436             0.151009    
Month7               -0.1542573  0.0611603  -2.522             0.011663 *  
Month8               -0.1077130  0.0588588  -1.830             0.067247 .  
Month9                0.0241076  0.0563193   0.428             0.668614    
Month10              -0.1681626  0.0558234  -3.012             0.002592 ** 
Month11              -0.0417061  0.0563135  -0.741             0.458932    
Month12               0.0007327  0.0540949   0.014             0.989193    
PT_VISITS             0.1115364  0.0044348  25.150 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH` -0.0039679  0.0011782  -3.368             0.000758 ***
PT_YN                 0.1399711  0.0476158   2.940             0.003286 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(3.482) family taken to be 1)

    Null deviance: 4007.0  on 3255  degrees of freedom
Residual deviance: 3164.9  on 3235  degrees of freedom
  (3173 observations deleted due to missingness)
AIC: 17296

Number of Fisher Scoring iterations: 1

              Theta:  3.482 
          Std. Err.:  0.133 

 2 x log-likelihood:  -17252.030 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb336-2"><a href="#cb336-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_MV))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">1.1797900</td>
<td style="text-align: right;">1.4385311</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.3287499</td>
<td style="text-align: right;">0.5086721</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">0.0834822</td>
<td style="text-align: right;">0.2513735</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0408593</td>
<td style="text-align: right;">0.1256731</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.0350702</td>
<td style="text-align: right;">0.1105221</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.0622156</td>
<td style="text-align: right;">0.0828206</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.0655918</td>
<td style="text-align: right;">0.0886905</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.1898129</td>
<td style="text-align: right;">0.0266320</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2404426</td>
<td style="text-align: right;">-0.0202635</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1833071</td>
<td style="text-align: right;">0.0323680</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2879599</td>
<td style="text-align: right;">-0.0602188</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.1985050</td>
<td style="text-align: right;">0.0307507</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.2739578</td>
<td style="text-align: right;">-0.0343711</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2229273</td>
<td style="text-align: right;">0.0076251</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.0863610</td>
<td style="text-align: right;">0.1346781</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2776651</td>
<td style="text-align: right;">-0.0586800</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.1519512</td>
<td style="text-align: right;">0.0686068</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.1051617</td>
<td style="text-align: right;">0.1066180</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.1021283</td>
<td style="text-align: right;">0.1210575</td>
</tr>
<tr class="even">
<td style="text-align: left;">`AVG THERAPY LENGTH`</td>
<td style="text-align: right;">-0.0062506</td>
<td style="text-align: right;">-0.0016832</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0474993</td>
<td style="text-align: right;">0.2325356</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><a href="#MV">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-10-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-4-tab">
<section id="main-effects-3" class="level3">
<h3 class="anchored" data-anchor-id="main-effects-3">Main Effects</h3>
<p>QI-initiative time period is a significant predictor for mechanical ventilation time, while controlling for age, admission month, total physical therapy visits, and average physical therapy visit length. Compared to patients in the Pre time period, patients in the During time period had a mean mechanical ventilation time that was 0.66 that of those in the Pre period (z = -9.12, 95% CI: [0.60, 0.72], p &lt; 0.0001), and patients in the Post time period had a mean mechanical ventilation time that was 0.78 that of those in the pre period (z = -9.08, 95% CI: [0.74,0.82], p &lt; 0.0001). Additionally, compared to patients in the During time period, those in the Post time period had a mean mechanical ventilation time that was 1.18 that of those in the During period (z = 3.92, 95% CI: [1.09, 1.29], p &lt; 0.0001).</p>
</section>
<section id="age-6" class="level3">
<h3 class="anchored" data-anchor-id="age-6">Age</h3>
<p>Age was not a significant predictor in this model (all p’s &gt; 0.5), but was included in the final model to control for it.</p>
</section>
<section id="month" class="level3">
<h3 class="anchored" data-anchor-id="month">Month</h3>
<p>Admission Month was a significant predictor for mechanical ventilation time, while controlling for QI-initiative time period, age, total PT visits, and average PT visit length. For instance, those admitted during March had an average mechanical ventilation time that was 0.88 times that of those admitted during January z = -2.294, 95% CI: [0.79,0.98], p = 0.022).</p>
<p>Since possible comparisons between months are myriad (12!), and the goal of this project was not to compare outcome variables between months (merely to control for these differences due to seasonality), further comparisons will not be made.</p>
</section>
<section id="reception-of-physical-therapy" class="level3">
<h3 class="anchored" data-anchor-id="reception-of-physical-therapy">Reception of Physical Therapy</h3>
<p>Reception of physical therapy was a signicant predictor of mechanical ventilation time, when controlling for the other variables in the model. Patients who received physical therapy had a mean mechanical ventilation time that was 1.15 times greater than those who did not receive physical therapy (z = 2.95, 95% CI: [1.11, 1.13], p = 0.003).</p>
</section>
<section id="total-physical-therapy-visits" class="level3">
<h3 class="anchored" data-anchor-id="total-physical-therapy-visits">Total Physical Therapy Visits</h3>
<p>Number of physical therapy visits was a significant predictor of mechanical ventilation time, when controlling for the other variables in the model. On average, each 1 visit increase was associated with a 1.12 times increase in mechanical ventilation time (z = 25.13, 95% CI: [1.11,1.13], p &lt; 0.0001).</p>
</section>
<section id="average-physical-therapy-length" class="level3">
<h3 class="anchored" data-anchor-id="average-physical-therapy-length">Average Physical Therapy Length</h3>
<p>Average physical therapy length was a significant predictor of mechanical ventilation time, when controlling for the other variables in the model. On average, each 1 hour increase in physical therapy visit length was associated with a 0.4% decrease in mechanical ventilation time (z = -3.37, 95% CI: [0.994, 0.998], p &lt; 0.0001).</p>
<p><a href="#MV">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-10-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-5-tab">
<section id="main-effect" class="level4">
<h4 class="anchored" data-anchor-id="main-effect">Main Effect</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change reference level</span></span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-4"><a href="#cb338-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get rid of spaces</span></span>
<span id="cb338-5"><a href="#cb338-5" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb338-6"><a href="#cb338-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">AVG_THERAPY_LENGTH =</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>)</span>
<span id="cb338-7"><a href="#cb338-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-8"><a href="#cb338-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the negative binomial regression</span></span>
<span id="cb338-9"><a href="#cb338-9" aria-hidden="true" tabindex="-1"></a>model_MV <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(MV_Total <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> AVG_THERAPY_LENGTH <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb338-10"><a href="#cb338-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-11"><a href="#cb338-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb338-12"><a href="#cb338-12" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_MV)</span>
<span id="cb338-13"><a href="#cb338-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-14"><a href="#cb338-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb338-15"><a href="#cb338-15" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb338-16"><a href="#cb338-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb338-17"><a href="#cb338-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb338-18"><a href="#cb338-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb338-19"><a href="#cb338-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb338-20"><a href="#cb338-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb338-21"><a href="#cb338-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb338-22"><a href="#cb338-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb338-23"><a href="#cb338-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Mechanical Ventilation Time by QI-Initiative Time Period"</span>,</span>
<span id="cb338-24"><a href="#cb338-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative"</span>,</span>
<span id="cb338-25"><a href="#cb338-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Mechanical Ventilation Time"</span></span>
<span id="cb338-26"><a href="#cb338-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb338-27"><a href="#cb338-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-139-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</div>
<div id="tabset-10-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-6-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"Age_Range"</span>, model_MV)</span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb339-5"><a href="#cb339-5" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb339-6"><a href="#cb339-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-7"><a href="#cb339-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb339-8"><a href="#cb339-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> Age_Range, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb339-9"><a href="#cb339-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb339-10"><a href="#cb339-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb339-11"><a href="#cb339-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb339-12"><a href="#cb339-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb339-13"><a href="#cb339-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Mechanical Ventilation Time by Age Range"</span>,</span>
<span id="cb339-14"><a href="#cb339-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Age Range"</span>,</span>
<span id="cb339-15"><a href="#cb339-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Mechanical Ventilation Time"</span></span>
<span id="cb339-16"><a href="#cb339-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb339-17"><a href="#cb339-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-140-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="admission-month-1" class="level4">
<h4 class="anchored" data-anchor-id="admission-month-1">Admission Month</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"Month"</span>, model_MV)</span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb340-5"><a href="#cb340-5" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb340-6"><a href="#cb340-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-7"><a href="#cb340-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb340-8"><a href="#cb340-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> Month, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb340-9"><a href="#cb340-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb340-10"><a href="#cb340-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb340-11"><a href="#cb340-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb340-12"><a href="#cb340-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb340-13"><a href="#cb340-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Mechanical Ventilation Time by Admission Month"</span>,</span>
<span id="cb340-14"><a href="#cb340-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Month"</span>,</span>
<span id="cb340-15"><a href="#cb340-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Mechanical Ventilation Time"</span></span>
<span id="cb340-16"><a href="#cb340-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb340-17"><a href="#cb340-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-141-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="number-of-physical-therapy-visits" class="level4">
<h4 class="anchored" data-anchor-id="number-of-physical-therapy-visits">Number of Physical Therapy Visits</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"PT_VISITS"</span>, model_MV)</span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-4"><a href="#cb341-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb341-5"><a href="#cb341-5" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb341-6"><a href="#cb341-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-7"><a href="#cb341-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb341-8"><a href="#cb341-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> PT_VISITS, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb341-9"><a href="#cb341-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb341-10"><a href="#cb341-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb341-11"><a href="#cb341-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb341-12"><a href="#cb341-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb341-13"><a href="#cb341-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Mechanical Ventilation Time by Number of PT Visits"</span>,</span>
<span id="cb341-14"><a href="#cb341-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Number of Physical Therapy Visits"</span>,</span>
<span id="cb341-15"><a href="#cb341-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Mechanical Ventilation Time"</span></span>
<span id="cb341-16"><a href="#cb341-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb341-17"><a href="#cb341-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-142-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="average-therapy-length-2" class="level4">
<h4 class="anchored" data-anchor-id="average-therapy-length-2">Average Therapy Length</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"AVG_THERAPY_LENGTH"</span>, model_MV)</span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-4"><a href="#cb342-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb342-5"><a href="#cb342-5" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb342-6"><a href="#cb342-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-7"><a href="#cb342-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb342-8"><a href="#cb342-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> AVG_THERAPY_LENGTH, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb342-9"><a href="#cb342-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb342-10"><a href="#cb342-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb342-11"><a href="#cb342-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb342-12"><a href="#cb342-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb342-13"><a href="#cb342-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Mechanical Ventilation Time by Average Therapy Length"</span>,</span>
<span id="cb342-14"><a href="#cb342-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Average Therapy Length"</span>,</span>
<span id="cb342-15"><a href="#cb342-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average Mechanical Ventilation Time"</span></span>
<span id="cb342-16"><a href="#cb342-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb342-17"><a href="#cb342-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-143-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#MV">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-10-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-7-tab">
<p>QI-initiative time period is a significant predictor for mechanical ventilation time, while controlling for age, admission month, total physical therapy visits, and average physical therapy visit length. Compared to patients in the Pre time period, patients in the During time period had a mean mechanical ventilation time that was 0.66 that of those in the Pre period (p &lt; 0.0001), and patients in the Post time period had a mean mechanical ventilation time that was 0.78 that of those in the pre period (p &lt; 0.0001).</p>
<p>Additionally, there was a slight decrease in the impact of the the QI-initiative. Compared to patients in the During time period, those in the Post time period had a mean mechanical ventilation time that was 1.18 that of those in the During period (p &lt; 0.0001).</p>
<p><a href="#MV">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
</section>
<section id="analysis-secondary-outcomes" class="level1">
<h1>Analysis: Secondary Outcomes</h1>
<section id="Non" class="level2">
<h2 class="anchored" data-anchor-id="Non">Non ICU Length of Stay</h2>
<p>Secondary Outcome of interest A is whether the QI-initiative decreased the Non-ICU length of stay.</p>
<p>This will be a Poisson or Negative Binomial Regression similar to the primary analysis</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true">Covariates</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false">Model Selection</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-4" role="tab" aria-controls="tabset-11-4" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-5" role="tab" aria-controls="tabset-11-5" aria-selected="false">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-6" role="tab" aria-controls="tabset-11-6" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<p>The potential covariates for this analysis will be the same as the main analysis.</p>
<p><a href="#Non">Top of Tabset</a></p>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<section id="check-for-zero-inflation-2" class="level4">
<h4 class="anchored" data-anchor-id="check-for-zero-inflation-2">Check for Zero Inflation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for zero inflation</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data_ex<span class="sc">$</span>NON_ICU_LOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-144-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We appear to have zero inflation and will need to check if a zero inflated negative binomial model will improve performance over a simple negative binomial regression.</p>
</section>
<section id="check-for-overdispersion-4" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-4">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span>NON_ICU_LOS, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 238.967957691709"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span>NON_ICU_LOS, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 162873.976571139"</code></pre>
</div>
</div>
<p>We have over dispersion and thus the negative binomial model is preferred over a Poisson regression.</p>
</section>
<section id="test-zero-inflation-model-performance" class="level4">
<h4 class="anchored" data-anchor-id="test-zero-inflation-model-performance">Test Zero Inflation Model Performance</h4>
<p>We will first fit the saturated model as both zero inflated negative binomial regression and a simple negative binomial model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the zero-inflated negative binomial</span></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a>model_NON <span class="ot">&lt;-</span> <span class="fu">zeroinfl</span>(NON_ICU_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN<span class="sc">|</span> initiative, <span class="at">data =</span> data_ex, <span class="at">dist =</span> <span class="st">"negbin"</span>)</span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-7"><a href="#cb348-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb348-8"><a href="#cb348-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_NON)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
zeroinfl(formula = NON_ICU_LOS ~ initiative + Age_Range + Month + PT_VISITS + 
    MV_YN + initiative * MV_YN + PT_YN | initiative, data = data_ex, 
    dist = "negbin")

Pearson residuals:
    Min      1Q  Median      3Q     Max 
-0.7535 -0.6425 -0.3903  0.1532 24.2910 

Count model coefficients (negbin with log link):
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              5.393266   0.075458  71.473 &lt; 0.0000000000000002 ***
initiativeDuring         0.003212   0.083886   0.038             0.969461    
initiativePost           0.014612   0.051875   0.282             0.778193    
Age_Range40-49          -0.063153   0.060268  -1.048             0.294700    
Age_Range50-59          -0.099307   0.052852  -1.879             0.060250 .  
Age_Range60-69          -0.070299   0.052609  -1.336             0.181470    
Age_Range70+            -0.277091   0.054266  -5.106          0.000000329 ***
Month2                  -0.016078   0.080685  -0.199             0.842048    
Month3                  -0.117076   0.078755  -1.487             0.137126    
Month4                  -0.138345   0.078874  -1.754             0.079430 .  
Month5                  -0.198316   0.082207  -2.412             0.015848 *  
Month6                  -0.243802   0.084137  -2.898             0.003760 ** 
Month7                  -0.077612   0.083504  -0.929             0.352664    
Month8                  -0.041371   0.081679  -0.507             0.612503    
Month9                  -0.079622   0.080773  -0.986             0.324256    
Month10                 -0.041182   0.079399  -0.519             0.603987    
Month11                 -0.177580   0.081545  -2.178             0.029428 *  
Month12                  0.017625   0.079969   0.220             0.825561    
PT_VISITS                0.077789   0.009274   8.387 &lt; 0.0000000000000002 ***
MV_YN1                   0.073545   0.050028   1.470             0.141543    
PT_YN                    0.166018   0.043015   3.860             0.000114 ***
initiativeDuring:MV_YN1 -0.103961   0.116588  -0.892             0.372559    
initiativePost:MV_YN1   -0.136775   0.071453  -1.914             0.055596 .  
Log(theta)              -0.565097   0.015164 -37.265 &lt; 0.0000000000000002 ***

Zero-inflation model coefficients (binomial with logit link):
                  Estimate Std. Error z value Pr(&gt;|z|)
(Intercept)       -20.1042   603.5634  -0.033    0.973
initiativeDuring   -0.9272  1828.8701  -0.001    1.000
initiativePost      0.5059   823.4400   0.001    1.000
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Theta = 0.5683 
Number of iterations in BFGS optimization: 50 
Log-likelihood: -4.053e+04 on 27 Df</code></pre>
</div>
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the  negative binomial</span></span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true" tabindex="-1"></a>model_NON_nb <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(NON_ICU_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex)</span>
<span id="cb350-3"><a href="#cb350-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb350-4"><a href="#cb350-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb350-5"><a href="#cb350-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_NON_nb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = NON_ICU_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + MV_YN + initiative * MV_YN + PT_YN, data = data_ex, 
    init.theta = 0.5683045546, link = log)

Coefficients:
                         Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              5.393259   0.075053  71.859 &lt; 0.0000000000000002 ***
initiativeDuring         0.003205   0.084299   0.038               0.9697    
initiativePost           0.014608   0.052233   0.280               0.7797    
Age_Range40-49          -0.063151   0.059673  -1.058               0.2899    
Age_Range50-59          -0.099307   0.052676  -1.885               0.0594 .  
Age_Range60-69          -0.070303   0.052278  -1.345               0.1787    
Age_Range70+            -0.277090   0.054333  -5.100           0.00000034 ***
Month2                  -0.016076   0.080514  -0.200               0.8417    
Month3                  -0.117071   0.078596  -1.490               0.1363    
Month4                  -0.138345   0.078682  -1.758               0.0787 .  
Month5                  -0.198313   0.081775  -2.425               0.0153 *  
Month6                  -0.243802   0.083996  -2.903               0.0037 ** 
Month7                  -0.077608   0.083680  -0.927               0.3537    
Month8                  -0.041369   0.081490  -0.508               0.6117    
Month9                  -0.079621   0.080956  -0.984               0.3254    
Month10                 -0.041179   0.079221  -0.520               0.6032    
Month11                 -0.177577   0.081159  -2.188               0.0287 *  
Month12                  0.017628   0.079766   0.221               0.8251    
PT_VISITS                0.077789   0.008113   9.588 &lt; 0.0000000000000002 ***
MV_YN1                   0.073545   0.049863   1.475               0.1402    
PT_YN                    0.166029   0.042170   3.937           0.00008246 ***
initiativeDuring:MV_YN1 -0.103957   0.116130  -0.895               0.3707    
initiativePost:MV_YN1   -0.136771   0.071051  -1.925               0.0542 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(0.5683) family taken to be 1)

    Null deviance: 8136.8  on 6412  degrees of freedom
Residual deviance: 7887.3  on 6390  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 81112

Number of Fisher Scoring iterations: 1

              Theta:  0.56830 
          Std. Err.:  0.00862 

 2 x log-likelihood:  -81064.00600 </code></pre>
</div>
</div>
<p>And compare information criteria.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare model performance</span></span>
<span id="cb352-2"><a href="#cb352-2" aria-hidden="true" tabindex="-1"></a>bic_nb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_NON_nb)</span>
<span id="cb352-3"><a href="#cb352-3" aria-hidden="true" tabindex="-1"></a>bic_zifb <span class="ot">&lt;-</span> <span class="fu">BIC</span>(model_NON)</span>
<span id="cb352-4"><a href="#cb352-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb352-5"><a href="#cb352-5" aria-hidden="true" tabindex="-1"></a>aic_nb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_NON_nb)</span>
<span id="cb352-6"><a href="#cb352-6" aria-hidden="true" tabindex="-1"></a>aic_zifb <span class="ot">&lt;-</span> <span class="fu">AIC</span>(model_NON)</span>
<span id="cb352-7"><a href="#cb352-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb352-8"><a href="#cb352-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a data frame to display the values </span></span>
<span id="cb352-9"><a href="#cb352-9" aria-hidden="true" tabindex="-1"></a>model_comparison <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Negative Binomial Model"</span>, <span class="st">"ZIF Negative Binomial Model"</span>), </span>
<span id="cb352-10"><a href="#cb352-10" aria-hidden="true" tabindex="-1"></a>                               <span class="at">BIC =</span> <span class="fu">c</span>(bic_nb, bic_zifb), </span>
<span id="cb352-11"><a href="#cb352-11" aria-hidden="true" tabindex="-1"></a>                               <span class="at">AIC =</span> <span class="fu">c</span>(aic_nb, aic_zifb))</span>
<span id="cb352-12"><a href="#cb352-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb352-13"><a href="#cb352-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Print resulting table</span></span>
<span id="cb352-14"><a href="#cb352-14" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(model_comparison)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BIC</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Negative Binomial Model</td>
<td style="text-align: right;">81274.39</td>
<td style="text-align: right;">81112.01</td>
</tr>
<tr class="even">
<td style="text-align: left;">ZIF Negative Binomial Model</td>
<td style="text-align: right;">81300.69</td>
<td style="text-align: right;">81118.01</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>AIC and BIC prefer the simple negative binomial model, and thus we do not have zero inflation!</p>
</section>
<section id="backwards-elimination-2" class="level4">
<h4 class="anchored" data-anchor-id="backwards-elimination-2">Backwards Elimination</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the scope to force the inclusion of specific variables</span></span>
<span id="cb353-2"><a href="#cb353-2" aria-hidden="true" tabindex="-1"></a>scope <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">lower =</span> <span class="sc">~</span> initiative <span class="sc">+</span> Month <span class="sc">+</span> Age_Range, <span class="at">upper =</span> <span class="fu">formula</span>(model_NON_nb))</span>
<span id="cb353-3"><a href="#cb353-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb353-4"><a href="#cb353-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform backwards elimination using BIC</span></span>
<span id="cb353-5"><a href="#cb353-5" aria-hidden="true" tabindex="-1"></a>backwards_model_NON_bic <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(model_NON_nb, <span class="at">direction =</span> <span class="st">"backward"</span>, <span class="at">k =</span> <span class="fu">log</span>(n), <span class="at">scope =</span> scope)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=81250.04
NON_ICU_LOS ~ initiative + Age_Range + Month + PT_VISITS + MV_YN + 
    initiative * MV_YN + PT_YN

                   Df   AIC
- initiative:MV_YN  2 81238
&lt;none&gt;                81250
- PT_YN             1 81257
- PT_VISITS         1 81323

Step:  AIC=81237.62
NON_ICU_LOS ~ initiative + Age_Range + Month + PT_VISITS + MV_YN + 
    PT_YN

            Df   AIC
- MV_YN      1 81230
&lt;none&gt;         81238
- PT_YN      1 81246
- PT_VISITS  1 81308

Step:  AIC=81229.54
NON_ICU_LOS ~ initiative + Age_Range + Month + PT_VISITS + PT_YN

            Df   AIC
&lt;none&gt;         81230
- PT_YN      1 81238
- PT_VISITS  1 81302</code></pre>
</div>
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine final model</span></span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(backwards_model_NON_bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = NON_ICU_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + PT_YN, data = data_ex, init.theta = 0.5680587891, 
    link = log)

Coefficients:
                  Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       5.431446   0.070876  76.633 &lt; 0.0000000000000002 ***
initiativeDuring -0.043640   0.061831  -0.706              0.48032    
initiativePost   -0.053696   0.038041  -1.412              0.15809    
Age_Range40-49   -0.061716   0.059668  -1.034              0.30098    
Age_Range50-59   -0.100560   0.052661  -1.910              0.05619 .  
Age_Range60-69   -0.074376   0.052248  -1.424              0.15458    
Age_Range70+     -0.278712   0.054256  -5.137          0.000000279 ***
Month2           -0.017205   0.080525  -0.214              0.83081    
Month3           -0.119259   0.078545  -1.518              0.12892    
Month4           -0.144106   0.078638  -1.833              0.06687 .  
Month5           -0.202770   0.081773  -2.480              0.01315 *  
Month6           -0.250015   0.083968  -2.977              0.00291 ** 
Month7           -0.079208   0.083618  -0.947              0.34351    
Month8           -0.047918   0.081414  -0.589              0.55615    
Month9           -0.086284   0.080905  -1.066              0.28621    
Month10          -0.047240   0.079171  -0.597              0.55072    
Month11          -0.182991   0.081146  -2.255              0.02413 *  
Month12           0.009545   0.079749   0.120              0.90473    
PT_VISITS         0.075407   0.007909   9.535 &lt; 0.0000000000000002 ***
PT_YN             0.174069   0.041988   4.146          0.000033879 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(0.5681) family taken to be 1)

    Null deviance: 8133.4  on 6412  degrees of freedom
Residual deviance: 7887.8  on 6393  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 81110

Number of Fisher Scoring iterations: 1

              Theta:  0.56806 
          Std. Err.:  0.00861 

 2 x log-likelihood:  -81067.77900 </code></pre>
</div>
</div>
<p>The final model removes <code>AVG THERAPY LENGTH</code> and <code>MV_YN</code>, which makes sense, as if you didn’t go to the ER, then you didn’t require intensive therapy or mechanical ventilation.</p>
<p><a href="#Non">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb357-3"><a href="#cb357-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-4"><a href="#cb357-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb357-5"><a href="#cb357-5" aria-hidden="true" tabindex="-1"></a>model_NON <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(NON_ICU_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex, <span class="at">link =</span> log)</span>
<span id="cb357-6"><a href="#cb357-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb357-7"><a href="#cb357-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb357-8"><a href="#cb357-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_NON)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = NON_ICU_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + PT_YN, data = data_ex, link = log, init.theta = 0.5680587894)

Coefficients:
                  Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)       5.431444   0.070876  76.633 &lt; 0.0000000000000002 ***
initiativeDuring -0.043638   0.061831  -0.706              0.48034    
initiativePost   -0.053694   0.038041  -1.411              0.15810    
Age_Range40-49   -0.061715   0.059668  -1.034              0.30099    
Age_Range50-59   -0.100559   0.052661  -1.910              0.05619 .  
Age_Range60-69   -0.074374   0.052248  -1.423              0.15459    
Age_Range70+     -0.278710   0.054256  -5.137          0.000000279 ***
Month2           -0.017204   0.080525  -0.214              0.83083    
Month3           -0.119258   0.078545  -1.518              0.12893    
Month4           -0.144105   0.078638  -1.833              0.06687 .  
Month5           -0.202770   0.081773  -2.480              0.01315 *  
Month6           -0.250013   0.083968  -2.977              0.00291 ** 
Month7           -0.079208   0.083618  -0.947              0.34351    
Month8           -0.047917   0.081414  -0.589              0.55615    
Month9           -0.086283   0.080905  -1.066              0.28621    
Month10          -0.047239   0.079171  -0.597              0.55072    
Month11          -0.182989   0.081146  -2.255              0.02413 *  
Month12           0.009545   0.079749   0.120              0.90473    
PT_VISITS         0.075406   0.007909   9.534 &lt; 0.0000000000000002 ***
PT_YN             0.174070   0.041988   4.146          0.000033875 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(0.5681) family taken to be 1)

    Null deviance: 8133.4  on 6412  degrees of freedom
Residual deviance: 7887.8  on 6393  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 81110

Number of Fisher Scoring iterations: 1

              Theta:  0.56806 
          Std. Err.:  0.00861 

 2 x log-likelihood:  -81067.77900 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_NON))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5.2935136</td>
<td style="text-align: right;">5.5726245</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.1622411</td>
<td style="text-align: right;">0.0773043</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.1267003</td>
<td style="text-align: right;">0.0193366</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.1795974</td>
<td style="text-align: right;">0.0566555</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.2044159</td>
<td style="text-align: right;">0.0028030</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.1776414</td>
<td style="text-align: right;">0.0283267</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.3851517</td>
<td style="text-align: right;">-0.1725802</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.1753344</td>
<td style="text-align: right;">0.1411822</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2735474</td>
<td style="text-align: right;">0.0348734</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.2987545</td>
<td style="text-align: right;">0.0103628</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.3636162</td>
<td style="text-align: right;">-0.0415060</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.4142783</td>
<td style="text-align: right;">-0.0848340</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.2424838</td>
<td style="text-align: right;">0.0848648</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2076720</td>
<td style="text-align: right;">0.1121815</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.2444270</td>
<td style="text-align: right;">0.0721124</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2028654</td>
<td style="text-align: right;">0.1083008</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.3426818</td>
<td style="text-align: right;">-0.0230156</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.1469838</td>
<td style="text-align: right;">0.1660829</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.0579868</td>
<td style="text-align: right;">0.0933824</td>
</tr>
<tr class="even">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0903232</td>
<td style="text-align: right;">0.2576494</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="change-reference-category-to-during-1" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-category-to-during-1">Change Reference Category to During</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb361-3"><a href="#cb361-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-4"><a href="#cb361-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb361-5"><a href="#cb361-5" aria-hidden="true" tabindex="-1"></a>model_NON <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(NON_ICU_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex, <span class="at">link =</span> log)</span>
<span id="cb361-6"><a href="#cb361-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-7"><a href="#cb361-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb361-8"><a href="#cb361-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_NON)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = NON_ICU_LOS ~ initiative + Age_Range + Month + 
    PT_VISITS + PT_YN, data = data_ex, link = log, init.theta = 0.5680587894)

Coefficients:
                Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)     5.387805   0.092788  58.066 &lt; 0.0000000000000002 ***
initiativePre   0.043638   0.061831   0.706              0.48034    
initiativePost -0.010056   0.059053  -0.170              0.86478    
Age_Range40-49 -0.061715   0.059668  -1.034              0.30099    
Age_Range50-59 -0.100559   0.052661  -1.910              0.05619 .  
Age_Range60-69 -0.074374   0.052248  -1.423              0.15459    
Age_Range70+   -0.278710   0.054256  -5.137          0.000000279 ***
Month2         -0.017204   0.080525  -0.214              0.83083    
Month3         -0.119258   0.078545  -1.518              0.12893    
Month4         -0.144105   0.078638  -1.833              0.06687 .  
Month5         -0.202770   0.081773  -2.480              0.01315 *  
Month6         -0.250013   0.083968  -2.977              0.00291 ** 
Month7         -0.079208   0.083618  -0.947              0.34351    
Month8         -0.047917   0.081414  -0.589              0.55615    
Month9         -0.086283   0.080905  -1.066              0.28621    
Month10        -0.047239   0.079171  -0.597              0.55072    
Month11        -0.182989   0.081146  -2.255              0.02413 *  
Month12         0.009545   0.079749   0.120              0.90473    
PT_VISITS       0.075406   0.007909   9.534 &lt; 0.0000000000000002 ***
PT_YN           0.174070   0.041988   4.146          0.000033875 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(0.5681) family taken to be 1)

    Null deviance: 8133.4  on 6412  degrees of freedom
Residual deviance: 7887.8  on 6393  degrees of freedom
  (16 observations deleted due to missingness)
AIC: 81110

Number of Fisher Scoring iterations: 1

              Theta:  0.56806 
          Std. Err.:  0.00861 

 2 x log-likelihood:  -81067.77900 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get 95% CIs</span></span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_NON))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5.2063551</td>
<td style="text-align: right;">5.5722297</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">-0.0773043</td>
<td style="text-align: right;">0.1622411</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.1279697</td>
<td style="text-align: right;">0.1054230</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.1795974</td>
<td style="text-align: right;">0.0566555</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.2044159</td>
<td style="text-align: right;">0.0028030</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.1776414</td>
<td style="text-align: right;">0.0283267</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.3851517</td>
<td style="text-align: right;">-0.1725802</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.1753344</td>
<td style="text-align: right;">0.1411822</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.2735474</td>
<td style="text-align: right;">0.0348734</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.2987545</td>
<td style="text-align: right;">0.0103628</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.3636162</td>
<td style="text-align: right;">-0.0415060</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.4142783</td>
<td style="text-align: right;">-0.0848340</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.2424838</td>
<td style="text-align: right;">0.0848648</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.2076720</td>
<td style="text-align: right;">0.1121815</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.2444270</td>
<td style="text-align: right;">0.0721124</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.2028654</td>
<td style="text-align: right;">0.1083008</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.3426818</td>
<td style="text-align: right;">-0.0230156</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.1469838</td>
<td style="text-align: right;">0.1660829</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.0579868</td>
<td style="text-align: right;">0.0933824</td>
</tr>
<tr class="even">
<td style="text-align: left;">PT_YN</td>
<td style="text-align: right;">0.0903232</td>
<td style="text-align: right;">0.2576494</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><a href="#Non">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-11-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-4-tab">
<section id="main-effects-4" class="level4">
<h4 class="anchored" data-anchor-id="main-effects-4">Main Effects</h4>
<p>QI-initiative time period is not a significant predictor for Non-ICU length of stay, while controlling for age, admission month, number of physical therapy visits, and reception of physical therapy. There was no difference in the mean Non-ICU length of stay between the Pre and During period (z = -0.84, 95% CI: [0.84, 1.07], p = 0.40), between the Pre and Post period (z = -1.51, 95% CI: [0.88, 1.02], p = 0.13), or between the During and Post periods (z = -0.093, 95% CI: [0.88, 1.12], p = 0.93).</p>
</section>
<section id="age-7" class="level4">
<h4 class="anchored" data-anchor-id="age-7">Age</h4>
<p>Age range was a significant predictor of non-ICU length of stay, while controlling for the other variables in the model. Specifically, patients who were 70+ had a mean non-ICU length of stay that was 0.76 that ofpatients who were 13-39 (z = -5.130, 95% CI: [0.68, 0.84], p &lt; 0.0001). Other age comparisons were not significant (p &gt; 0.05), and comparisons with baseline categories besides 13-39 were not conducted.</p>
</section>
<section id="admission-month-2" class="level4">
<h4 class="anchored" data-anchor-id="admission-month-2">Admission Month</h4>
<p>Admission Month was a significant predictor for non-ICU length of stay, while controlling for the other variables in the model. For instance, those admitted during May had an average mechanical ventilation time that was 0.78 times that of those admitted during January (z = -2.52, 95% CI: [0.69, 0.96], p = 0.01).</p>
<p>Since possible comparisons between months are myriad (12!), and the goal of this project was not to compare outcome variables between months (merely to control for these differences due to seasonality), further comparisons were not made.</p>
</section>
<section id="number-of-physical-therapy-visits-1" class="level4">
<h4 class="anchored" data-anchor-id="number-of-physical-therapy-visits-1">Number of Physical Therapy Visits</h4>
<p>Number of physical therapy visits was a signifcant predictor of non-ICU length of stay. On average, every one visit increase was associated with a 1.08 times higher non-ICU length of stay (z = 9.63, 95% CI: [1.06,1.10], p &lt; 0.0001).</p>
</section>
<section id="reception-of-physical-therapy-1" class="level4">
<h4 class="anchored" data-anchor-id="reception-of-physical-therapy-1">Reception of Physical Therapy</h4>
<p>Reception of physical therapy was a significant predictor of non-ICU length of stay. On average, patients who received physical therapy had a mean non-ICU length of stay that was 1.19 times higher than patients who did not (z = 4.08, 95% CI: [1.09,1.29], p &lt; 0.0001).</p>
<p><a href="#Non">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-11-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-4"><a href="#cb365-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb365-5"><a href="#cb365-5" aria-hidden="true" tabindex="-1"></a>model_NON <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(NON_ICU_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> PT_YN, <span class="at">data =</span> data_ex, <span class="at">link =</span> log)</span>
<span id="cb365-6"><a href="#cb365-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-7"><a href="#cb365-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb365-8"><a href="#cb365-8" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_NON)</span>
<span id="cb365-9"><a href="#cb365-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-10"><a href="#cb365-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb365-11"><a href="#cb365-11" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb365-12"><a href="#cb365-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb365-13"><a href="#cb365-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb365-14"><a href="#cb365-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb365-15"><a href="#cb365-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb365-16"><a href="#cb365-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb365-17"><a href="#cb365-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb365-18"><a href="#cb365-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb365-19"><a href="#cb365-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Non-ICU Length of Stay by QI-Initiative Time Period"</span>,</span>
<span id="cb365-20"><a href="#cb365-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative"</span>,</span>
<span id="cb365-21"><a href="#cb365-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Non-ICU Length of Stay"</span></span>
<span id="cb365-22"><a href="#cb365-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb365-23"><a href="#cb365-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-151-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Non">Top of Tabset</a></p>
</div>
<div id="tabset-11-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-6-tab">
<p>We can conclude that the QI-initiative was not successful in reducing Non_ICU length of stay. Which makes sense, as physical therapy likely targets the patients in worse condition that could benefit from it compared to patients admitted for more benign injuries.</p>
<p><a href="#Non">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
<section id="Total_LOS" class="level2">
<h2 class="anchored" data-anchor-id="Total_LOS">Total Hospital Length of Stay</h2>
<p>Secondary Outcome of interest B is whether the QI-initiative decreased the total hospital length of stay.</p>
<p>This will be a Poisson or Negative Binomial Regression similar to the primary analysis .</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true">Covariates</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false">Model Selection</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false">Analysis</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-4" role="tab" aria-controls="tabset-12-4" aria-selected="false">Interpretation</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-5" role="tab" aria-controls="tabset-12-5" aria-selected="false">Visualization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-6" role="tab" aria-controls="tabset-12-6" aria-selected="false">Summary</a></li></ul>
<div class="tab-content">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<p>The potential covariates for this analysis are the same as the main analysis.</p>
<p><a href="#Total_LOS">Top of Tabset</a></p>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<section id="check-for-zero-inflation-3" class="level4">
<h4 class="anchored" data-anchor-id="check-for-zero-inflation-3">Check for Zero Inflation</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for Zeros</span></span>
<span id="cb366-2"><a href="#cb366-2" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49</code></pre>
</div>
</div>
<p>You cannot have a 0 minute hospital length of stay, thus we do not need to consider zero inflation in our model.</p>
</section>
<section id="check-for-overdispersion-5" class="level4">
<h4 class="anchored" data-anchor-id="check-for-overdispersion-5">Check for Overdispersion</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Mean = "</span>, <span class="fu">mean</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Mean = 377.749261160367"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare mean and variance</span></span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">"Variance = "</span>, <span class="fu">var</span>(data_ex<span class="sc">$</span><span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Variance = 183898.93307545"</code></pre>
</div>
</div>
<p>We have overdispersion, a negative binomial regression will be chosen.</p>
</section>
<section id="backwards-elimination-3" class="level4">
<h4 class="anchored" data-anchor-id="backwards-elimination-3">Backwards Elimination</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb372-3"><a href="#cb372-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-4"><a href="#cb372-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get cleaned data set with missing values omitted because this is necessary with the MASS package</span></span>
<span id="cb372-5"><a href="#cb372-5" aria-hidden="true" tabindex="-1"></a>data_ex_clean <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb372-6"><a href="#cb372-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>, initiative, Age_Range, Month, PT_VISITS, <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span>, MV_YN, PT_YN)</span>
<span id="cb372-7"><a href="#cb372-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-8"><a href="#cb372-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with missing values</span></span>
<span id="cb372-9"><a href="#cb372-9" aria-hidden="true" tabindex="-1"></a>data_ex_clean <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data_ex_clean)</span>
<span id="cb372-10"><a href="#cb372-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-11"><a href="#cb372-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb372-12"><a href="#cb372-12" aria-hidden="true" tabindex="-1"></a>model_tot <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> PT_YN <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> MV_YN <span class="sc">+</span> initiative<span class="sc">*</span>MV_YN, <span class="at">data =</span> data_ex_clean, <span class="at">link =</span> log)</span>
<span id="cb372-13"><a href="#cb372-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-14"><a href="#cb372-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the scope to force the inclusion of specific variables</span></span>
<span id="cb372-15"><a href="#cb372-15" aria-hidden="true" tabindex="-1"></a>scope <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">lower =</span> <span class="sc">~</span> initiative <span class="sc">+</span> Month <span class="sc">+</span> Age_Range, <span class="at">upper =</span> <span class="fu">formula</span>(model_tot))</span>
<span id="cb372-16"><a href="#cb372-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb372-17"><a href="#cb372-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform backwards elimination using BIC</span></span>
<span id="cb372-18"><a href="#cb372-18" aria-hidden="true" tabindex="-1"></a>backwards_model_tot_bic <span class="ot">&lt;-</span> <span class="fu">stepAIC</span>(model_tot, <span class="at">direction =</span> <span class="st">"backward"</span>, <span class="at">k =</span> <span class="fu">log</span>(n), <span class="at">scope =</span> scope)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=87466.28
`HOSPITAL LOS` ~ initiative + Age_Range + Month + PT_VISITS + 
    PT_YN + `AVG THERAPY LENGTH` + MV_YN + initiative * MV_YN

                       Df   AIC
- PT_YN                 1 87459
&lt;none&gt;                    87466
- initiative:MV_YN      2 87467
- `AVG THERAPY LENGTH`  1 87488
- PT_VISITS             1 87817

Step:  AIC=87458.79
`HOSPITAL LOS` ~ initiative + Age_Range + Month + PT_VISITS + 
    `AVG THERAPY LENGTH` + MV_YN + initiative:MV_YN

                       Df   AIC
&lt;none&gt;                    87459
- initiative:MV_YN      2 87459
- `AVG THERAPY LENGTH`  1 87506
- PT_VISITS             1 87811</code></pre>
</div>
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine final model</span></span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(backwards_model_tot_bic)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `HOSPITAL LOS` ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + MV_YN + initiative:MV_YN, 
    data = data_ex_clean, init.theta = 1.706675816, link = log)

Coefficients:
                          Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)              5.7141463  0.0430473 132.741 &lt; 0.0000000000000002 ***
initiativeDuring        -0.1085199  0.0485788  -2.234              0.02549 *  
initiativePost          -0.0729731  0.0300860  -2.425              0.01529 *  
Age_Range40-49          -0.0333751  0.0344891  -0.968              0.33319    
Age_Range50-59          -0.0657986  0.0304475  -2.161              0.03069 *  
Age_Range60-69          -0.0588501  0.0302327  -1.947              0.05159 .  
Age_Range70+            -0.1971839  0.0313954  -6.281   0.0000000003371473 ***
Month2                  -0.0092354  0.0465774  -0.198              0.84282    
Month3                  -0.0845100  0.0454556  -1.859              0.06300 .  
Month4                  -0.0927520  0.0455189  -2.038              0.04158 *  
Month5                  -0.1462935  0.0472877  -3.094              0.00198 ** 
Month6                  -0.1568557  0.0485668  -3.230              0.00124 ** 
Month7                  -0.0558665  0.0483837  -1.155              0.24823    
Month8                  -0.0152168  0.0471583  -0.323              0.74694    
Month9                  -0.0392989  0.0468276  -0.839              0.40134    
Month10                 -0.0378652  0.0458265  -0.826              0.40865    
Month11                 -0.1069590  0.0469269  -2.279              0.02265 *  
Month12                  0.0403426  0.0461244   0.875              0.38177    
PT_VISITS                0.0936973  0.0047424  19.757 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH`     0.0047051  0.0006204   7.584   0.0000000000000335 ***
MV_YN1                   0.2588434  0.0288466   8.973 &lt; 0.0000000000000002 ***
initiativeDuring:MV_YN1 -0.1595678  0.0672666  -2.372              0.01768 *  
initiativePost:MV_YN1   -0.1605212  0.0410735  -3.908   0.0000930085101959 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.7067) family taken to be 1)

    Null deviance: 8106.2  on 6404  degrees of freedom
Residual deviance: 6998.2  on 6382  degrees of freedom
AIC: 87321

Number of Fisher Scoring iterations: 1

              Theta:  1.7067 
          Std. Err.:  0.0279 

 2 x log-likelihood:  -87272.7600 </code></pre>
</div>
</div>
<p>The final model drops <code>PT_YN</code> and the <code>initiative*MV_YN</code> interaction term.</p>
<p><a href="#Total_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-12-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb376-2"><a href="#cb376-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb376-3"><a href="#cb376-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-4"><a href="#cb376-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb376-5"><a href="#cb376-5" aria-hidden="true" tabindex="-1"></a>model_tot <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> MV_YN, <span class="at">data =</span> data_ex, <span class="at">link =</span> log)</span>
<span id="cb376-6"><a href="#cb376-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb376-7"><a href="#cb376-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb376-8"><a href="#cb376-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_tot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `HOSPITAL LOS` ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + MV_YN, data = data_ex, 
    link = log, init.theta = 1.702916828)

Coefficients:
                      Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)           5.758068   0.041868 137.528 &lt; 0.0000000000000002 ***
initiativeDuring     -0.181866   0.035527  -5.119  0.00000030687045696 ***
initiativePost       -0.153099   0.021919  -6.985  0.00000000000284983 ***
Age_Range40-49       -0.031253   0.034518  -0.905             0.365259    
Age_Range50-59       -0.065947   0.030468  -2.164             0.030427 *  
Age_Range60-69       -0.061447   0.030254  -2.031             0.042254 *  
Age_Range70+         -0.197563   0.031425  -6.287  0.00000000032410509 ***
Month2               -0.010035   0.046625  -0.215             0.829582    
Month3               -0.086944   0.045494  -1.911             0.055988 .  
Month4               -0.098762   0.045547  -2.168             0.030133 *  
Month5               -0.151600   0.047339  -3.202             0.001363 ** 
Month6               -0.162222   0.048598  -3.338             0.000844 ***
Month7               -0.058450   0.048427  -1.207             0.227437    
Month8               -0.021490   0.047185  -0.455             0.648786    
Month9               -0.047100   0.046847  -1.005             0.314706    
Month10              -0.044681   0.045843  -0.975             0.329732    
Month11              -0.112168   0.046964  -2.388             0.016922 *  
Month12               0.032102   0.046159   0.695             0.486762    
PT_VISITS             0.090483   0.004691  19.289 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH`  0.004991   0.000618   8.076  0.00000000000000067 ***
MV_YN1                0.172473   0.019665   8.771 &lt; 0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.7029) family taken to be 1)

    Null deviance: 8088.5  on 6404  degrees of freedom
Residual deviance: 6999.4  on 6384  degrees of freedom
  (24 observations deleted due to missingness)
AIC: 87333

Number of Fisher Scoring iterations: 1

              Theta:  1.7029 
          Std. Err.:  0.0278 

 2 x log-likelihood:  -87289.3850 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get confidence intervals</span></span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_tot))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5.6763881</td>
<td style="text-align: right;">5.8407990</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativeDuring</td>
<td style="text-align: right;">-0.2505101</td>
<td style="text-align: right;">-0.1124350</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.1953356</td>
<td style="text-align: right;">-0.1108511</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0991488</td>
<td style="text-align: right;">0.0368078</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.1258433</td>
<td style="text-align: right;">-0.0062158</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.1209400</td>
<td style="text-align: right;">-0.0021411</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.2590113</td>
<td style="text-align: right;">-0.1362179</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.1014594</td>
<td style="text-align: right;">0.0814717</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1762229</td>
<td style="text-align: right;">0.0022774</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1881945</td>
<td style="text-align: right;">-0.0093913</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2445397</td>
<td style="text-align: right;">-0.0585268</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.2573323</td>
<td style="text-align: right;">-0.0668111</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.1531093</td>
<td style="text-align: right;">0.0364691</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.1140185</td>
<td style="text-align: right;">0.0711525</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.1386901</td>
<td style="text-align: right;">0.0445725</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.1346373</td>
<td style="text-align: right;">0.0452452</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.2043456</td>
<td style="text-align: right;">-0.0199027</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0584206</td>
<td style="text-align: right;">0.1226230</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.0803614</td>
<td style="text-align: right;">0.1007693</td>
</tr>
<tr class="even">
<td style="text-align: left;">`AVG THERAPY LENGTH`</td>
<td style="text-align: right;">0.0037486</td>
<td style="text-align: right;">0.0062392</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MV_YN1</td>
<td style="text-align: right;">0.1340589</td>
<td style="text-align: right;">0.2108852</td>
</tr>
</tbody>
</table>


</div>
</div>
<section id="change-reference-level-to-during" class="level4">
<h4 class="anchored" data-anchor-id="change-reference-level-to-during">Change Reference Level to During</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"During"</span>)</span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb380-4"><a href="#cb380-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb380-5"><a href="#cb380-5" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>MV_YN <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>MV_YN, <span class="at">ref =</span> <span class="st">"0"</span>)</span>
<span id="cb380-6"><a href="#cb380-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb380-7"><a href="#cb380-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb380-8"><a href="#cb380-8" aria-hidden="true" tabindex="-1"></a>model_tot <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(<span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span> <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> <span class="st">`</span><span class="at">AVG THERAPY LENGTH</span><span class="st">`</span> <span class="sc">+</span> MV_YN, <span class="at">data =</span> data_ex, <span class="at">link =</span> log)</span>
<span id="cb380-9"><a href="#cb380-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb380-10"><a href="#cb380-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Examine Model</span></span>
<span id="cb380-11"><a href="#cb380-11" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_tot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm.nb(formula = `HOSPITAL LOS` ~ initiative + Age_Range + Month + 
    PT_VISITS + `AVG THERAPY LENGTH` + MV_YN, data = data_ex, 
    link = log, init.theta = 1.702916828)

Coefficients:
                      Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept)           5.576201   0.053762 103.720 &lt; 0.0000000000000002 ***
initiativePre         0.181866   0.035527   5.119  0.00000030687045696 ***
initiativePost        0.028767   0.034196   0.841             0.400214    
Age_Range40-49       -0.031253   0.034518  -0.905             0.365259    
Age_Range50-59       -0.065947   0.030468  -2.164             0.030427 *  
Age_Range60-69       -0.061447   0.030254  -2.031             0.042254 *  
Age_Range70+         -0.197563   0.031425  -6.287  0.00000000032410509 ***
Month2               -0.010035   0.046625  -0.215             0.829582    
Month3               -0.086944   0.045494  -1.911             0.055988 .  
Month4               -0.098762   0.045547  -2.168             0.030133 *  
Month5               -0.151600   0.047339  -3.202             0.001363 ** 
Month6               -0.162222   0.048598  -3.338             0.000844 ***
Month7               -0.058450   0.048427  -1.207             0.227437    
Month8               -0.021490   0.047185  -0.455             0.648786    
Month9               -0.047100   0.046847  -1.005             0.314706    
Month10              -0.044681   0.045843  -0.975             0.329732    
Month11              -0.112168   0.046964  -2.388             0.016922 *  
Month12               0.032102   0.046159   0.695             0.486762    
PT_VISITS             0.090483   0.004691  19.289 &lt; 0.0000000000000002 ***
`AVG THERAPY LENGTH`  0.004991   0.000618   8.076  0.00000000000000067 ***
MV_YN1                0.172473   0.019665   8.771 &lt; 0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for Negative Binomial(1.7029) family taken to be 1)

    Null deviance: 8088.5  on 6404  degrees of freedom
Residual deviance: 6999.4  on 6384  degrees of freedom
  (24 observations deleted due to missingness)
AIC: 87333

Number of Fisher Scoring iterations: 1

              Theta:  1.7029 
          Std. Err.:  0.0278 

 2 x log-likelihood:  -87289.3850 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get confidence intervals</span></span>
<span id="cb382-2"><a href="#cb382-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">confint</span>(model_tot))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Waiting for profiling to be done...</code></pre>
</div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">2.5 %</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">97.5 %</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">(Intercept)</td>
<td style="text-align: right;">5.4710371</td>
<td style="text-align: right;">5.6823491</td>
</tr>
<tr class="even">
<td style="text-align: left;">initiativePre</td>
<td style="text-align: right;">0.1124350</td>
<td style="text-align: right;">0.2505101</td>
</tr>
<tr class="odd">
<td style="text-align: left;">initiativePost</td>
<td style="text-align: right;">-0.0388821</td>
<td style="text-align: right;">0.0955995</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range40-49</td>
<td style="text-align: right;">-0.0991488</td>
<td style="text-align: right;">0.0368078</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range50-59</td>
<td style="text-align: right;">-0.1258433</td>
<td style="text-align: right;">-0.0062158</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range60-69</td>
<td style="text-align: right;">-0.1209400</td>
<td style="text-align: right;">-0.0021411</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Age_Range70+</td>
<td style="text-align: right;">-0.2590113</td>
<td style="text-align: right;">-0.1362179</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month2</td>
<td style="text-align: right;">-0.1014594</td>
<td style="text-align: right;">0.0814717</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month3</td>
<td style="text-align: right;">-0.1762229</td>
<td style="text-align: right;">0.0022774</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month4</td>
<td style="text-align: right;">-0.1881945</td>
<td style="text-align: right;">-0.0093913</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month5</td>
<td style="text-align: right;">-0.2445397</td>
<td style="text-align: right;">-0.0585268</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month6</td>
<td style="text-align: right;">-0.2573323</td>
<td style="text-align: right;">-0.0668111</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month7</td>
<td style="text-align: right;">-0.1531093</td>
<td style="text-align: right;">0.0364691</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month8</td>
<td style="text-align: right;">-0.1140185</td>
<td style="text-align: right;">0.0711525</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month9</td>
<td style="text-align: right;">-0.1386901</td>
<td style="text-align: right;">0.0445725</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month10</td>
<td style="text-align: right;">-0.1346373</td>
<td style="text-align: right;">0.0452452</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month11</td>
<td style="text-align: right;">-0.2043456</td>
<td style="text-align: right;">-0.0199027</td>
</tr>
<tr class="even">
<td style="text-align: left;">Month12</td>
<td style="text-align: right;">-0.0584206</td>
<td style="text-align: right;">0.1226230</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">0.0803614</td>
<td style="text-align: right;">0.1007693</td>
</tr>
<tr class="even">
<td style="text-align: left;">`AVG THERAPY LENGTH`</td>
<td style="text-align: right;">0.0037486</td>
<td style="text-align: right;">0.0062392</td>
</tr>
<tr class="odd">
<td style="text-align: left;">MV_YN1</td>
<td style="text-align: right;">0.1340589</td>
<td style="text-align: right;">0.2108852</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check vifs</span></span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pretty_print</span>(<span class="fu">vif</span>(model_tot))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">GVIF</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">GVIF^(1/(2*Df))</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">initiative</td>
<td style="text-align: right;">1.274062</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.062423</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age_Range</td>
<td style="text-align: right;">1.034605</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">1.004261</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Month</td>
<td style="text-align: right;">1.073062</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">1.003210</td>
</tr>
<tr class="even">
<td style="text-align: left;">PT_VISITS</td>
<td style="text-align: right;">1.505159</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.226849</td>
</tr>
<tr class="odd">
<td style="text-align: left;">`AVG THERAPY LENGTH`</td>
<td style="text-align: right;">1.488256</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.219941</td>
</tr>
<tr class="even">
<td style="text-align: left;">MV_YN</td>
<td style="text-align: right;">1.048987</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.024201</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><a href="#Total_LOS">Top of Tabset</a></p>
</section>
</div>
<div id="tabset-12-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-4-tab">
<section id="main-effects-5" class="level4">
<h4 class="anchored" data-anchor-id="main-effects-5">Main Effects</h4>
<p>QI-initiative time period was a significant predictor of total hospital length of stay, while controlling for age, admission month, mechanical ventilation, total physical therapy visits, and average therapy length. Compared to those in the Pre period, patients in the During period had a mean total hospital length of stay that was 0.83 times that of patients in the pre period (z = -5.27, 95% CI: [0.77,0.89], p &lt; 0.0001), and patients in the Period had a mean total hospital length of stay that was 0.86 times that of patients in the Pre period (z = -7.10, 95% CI: [0.82,0.89], p &lt; 0.0001). Those who were admitted in the During period did not have a significantly different total hospital length of stay compared to those enrolled in the Post period (z = 0.92, 95% CI: [0.96, 1.10], p = 0.36).</p>
</section>
<section id="age-8" class="level4">
<h4 class="anchored" data-anchor-id="age-8">Age</h4>
<p>Age range was a significant predictor of total hospital length of stay, while controlling for the other variables in the model. Specifically, patients who were 50-59 had 0.94 times (z = -2.16, 95% CI: [0.88, 0.99], p = 0.031), patients who were 60-69 had 0.94 times (z = -2.03, 95% CI: [0.89, 0.99], p = 0.043), and patients who were 70+ had 0.82 times the total hospital length of stay of patients who were 13-39 (z = -6.23, 95% CI: [0.77, 0.87], p = 0.0001). Patients who were 40-49 did not differ significantly from patients who were 13-39 (p = 0.37).</p>
</section>
<section id="admission-month-3" class="level1">
<h1>Admission Month</h1>
<p>Admission Month was a significant predictor for total hospital length of stay, while controlling for the other variables in the model. For instance, those admitted during May had an average total hospital length of stay that was 0.86 times that of those admitted during January (z = -3.19, 95% CI: [0.78, -0.0578866], p = 0.0014).</p>
<p>Since possible comparisons between months are myriad (12!), and the goal of this project was not to compare outcome variables between months (merely to control for these differences due to seasonality), further comparisons will not be made.</p>
<section id="number-of-physical-therapy-visits-2" class="level4">
<h4 class="anchored" data-anchor-id="number-of-physical-therapy-visits-2">Number of Physical Therapy Visits</h4>
<p>Total number of physical therapy visits was a significant predictor of total hospital length of stay, while controlling for the other variables in the model. On average, each 1 visit increase was associated with a 1.10 times increase in total hospital length stay (z = 19.37, 95% CI: [1.08, 1.11], p &lt; 0.0001).</p>
</section>
<section id="average-physical-therapy-length-1" class="level4">
<h4 class="anchored" data-anchor-id="average-physical-therapy-length-1">Average Physical Therapy Length</h4>
<p>Average physical therapy length was a significant predictor of total hospital length of stay, while controlling for the other variables in the model. On average, each 1 minute increase in average physical therapy visit length was assocaited with a 1.004 times increase total hospital length of stay (z = 8.03, 95% CI: [1.003, 1.006], p &lt; 0.0001).</p>
</section>
<section id="reception-of-mechanical-ventilation" class="level4">
<h4 class="anchored" data-anchor-id="reception-of-mechanical-ventilation">Reception of Mechanical Ventilation</h4>
<p>Reception of mechanical ventilation was a signicant predictor of total hospital length of stay. On average, patients who were mechanically ventilated had a mean total hospital length of stay that was 1.19 times greater than those who were not (z = 8.79, 95% CI: [1.14, 1.23], p &lt; 0.0001).</p>
<p><a href="#Total_LOS">Top of Tabset</a></p>
</section>
</section>
</div>
<div id="tabset-12-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Relevel </span></span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>data_ex<span class="sc">$</span>initiative <span class="ot">&lt;-</span> <span class="fu">relevel</span>(data_ex<span class="sc">$</span>initiative, <span class="at">ref =</span> <span class="st">"Pre"</span>)</span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Get rid of spaces</span></span>
<span id="cb385-5"><a href="#cb385-5" aria-hidden="true" tabindex="-1"></a>data_ex <span class="ot">&lt;-</span> data_ex <span class="sc">|&gt;</span> </span>
<span id="cb385-6"><a href="#cb385-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">HOSPITAL_LOS =</span> <span class="st">`</span><span class="at">HOSPITAL LOS</span><span class="st">`</span>)</span>
<span id="cb385-7"><a href="#cb385-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-8"><a href="#cb385-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Run the model</span></span>
<span id="cb385-9"><a href="#cb385-9" aria-hidden="true" tabindex="-1"></a>model_tot <span class="ot">&lt;-</span> <span class="fu">glm.nb</span>(HOSPITAL_LOS <span class="sc">~</span> initiative <span class="sc">+</span> Age_Range <span class="sc">+</span> Month <span class="sc">+</span> PT_VISITS <span class="sc">+</span> AVG_THERAPY_LENGTH <span class="sc">+</span> MV_YN, <span class="at">data =</span> data_ex, <span class="at">link =</span> log)</span>
<span id="cb385-10"><a href="#cb385-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-11"><a href="#cb385-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb385-12"><a href="#cb385-12" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_tot)</span>
<span id="cb385-13"><a href="#cb385-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-14"><a href="#cb385-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb385-15"><a href="#cb385-15" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb385-16"><a href="#cb385-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-17"><a href="#cb385-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb385-18"><a href="#cb385-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb385-19"><a href="#cb385-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb385-20"><a href="#cb385-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb385-21"><a href="#cb385-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb385-22"><a href="#cb385-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb385-23"><a href="#cb385-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Total Hospital Length of Stay by QI-Initiative Time Period"</span>,</span>
<span id="cb385-24"><a href="#cb385-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative"</span>,</span>
<span id="cb385-25"><a href="#cb385-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Total Hospital Length of Stay"</span></span>
<span id="cb385-26"><a href="#cb385-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb385-27"><a href="#cb385-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-157-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><a href="#Total_LOS">Top of Tabset</a></p>
</div>
<div id="tabset-12-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-6-tab">
<p>The QI-initiative was successful at reducing the total hospital length of stay!</p>
<p>QI-initiative time period was a significant predictor of total hospital length of stay, while controlling for age, admission month, mechanical ventilation, total physical therapy visits, and average therapy length. Compared to those in the Pre period, patients in the During period had a mean total hospital length of stay that was 0.83 times that of patients in the pre period (p &lt; 0.0001), and patients in the Period had a mean total hospital length of stay that was 0.86 times that of patients in the Pre period(p &lt; 0.0001). Those who were admitted in the During period did not have a significantly different total hospital length of stay compared to those enrolled in the Post period (z = 0.92, 95% CI: [0.96, 1.10], p = 0.36).</p>
<p><a href="#Total_LOS">Top of Tabset</a></p>
</div>
</div>
</div>
</section>
</section>
<section id="results" class="level1">
<h1>Results</h1>
<p>The Quality Improvement Initiative was successful at improving patient outcomes on multiple fronts.</p>
<section id="frequency-of-therapy-visits" class="level4">
<h4 class="anchored" data-anchor-id="frequency-of-therapy-visits">Frequency of Therapy Visits</h4>
<p>The QI-initiative drastically increased the number of physical therapy visits, while controlling for age and seasonality.</p>
<p>While controlling for age, admission month, and zero inflation, those in the During time period had a 3.29 times higher (p &lt; 0.0001), and those in the Post time period had a 2.42 times higher (p &lt; 0.0001) average number of PT visits compared to patients in the Pre time period. i Additionally, there was a slight decrease in the number of PT visits from the During to Post time periods, with those in the Post period having a mean number of PT visits that was 0.74 times the mean number of PT visits of those in the During period (p &lt; 0.0001).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-158-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/clipboard-969471524.png" class="img-fluid"></p>
</section>
<section id="time-from-admit-to-physical-therapy" class="level4">
<h4 class="anchored" data-anchor-id="time-from-admit-to-physical-therapy">Time from Admit to Physical Therapy</h4>
<p>The QI-initiative greatly decreased the wait time from admit to first physical therapy visit, while controlling for age and seasonality.</p>
<p>Patients admitted in the During period had a mean wait time that was 0.40 times that of patients in the Pre period (p &lt; 0.0001), and patients admitted in the Post period having a wait time that was 0.51 times that of patients in the Pre period (p &lt; 0.0001).</p>
<p>Additionally, there was a slight increase in wait time from admit to therapy after the QI-initiative, with those admitted in the Post time period having a mean wait time that was 1.26 times higher than that of patients during the During period (p &lt; 0.0001).</p>
<p>The QI-initiative effectively <strong>halved</strong> the wait time from admission to therapy!</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-159-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/clipboard-1287978105.png" class="img-fluid"></p>
</section>
<section id="admissions-receiving-physical-therapy" class="level4">
<h4 class="anchored" data-anchor-id="admissions-receiving-physical-therapy">Admissions Receiving Physical Therapy</h4>
<p>The QI-initiative dramatically increased the likelihood of patients receiving physical therapy, while controlling for age and seasonality.</p>
<p>Compared to patients in the Pre time period, the odds of receiving physical therapy in the During period were approximately 9.52 times higher (p &lt; 0.0001), and the odds of receiving physical therapy in the Post time period were 4.84 times higher (p &lt; 0.0001).</p>
<p>Additionally, there was a decrease in the likelihood of receiving PT after the During period, with the odds of receiving physical therapy in the Post time period being 0.51 the odds of receiving physical therapy in the during period (p &lt; 0.0001).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-160-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/clipboard-2248547278.png" class="img-fluid"></p>
</section>
<section id="micu-length-of-stay-6" class="level4">
<h4 class="anchored" data-anchor-id="micu-length-of-stay-6">MICU Length of Stay</h4>
<p>The QI-initiative was successful at decreasing MICU length of stay, while controlling for age, seasonality, number of physical therapy visits, and mechanical ventilation.</p>
<p>The average predicted MICU length of decreased from 155.6 hours in the Pre period, to 97.3 hours in the During period, and 111.5 hours in the Post period!</p>
<p>Moreover, the impact of the QI-Initiative differed by mechanical ventilation status. On average, those were mechanically ventilated in the Pre period had a predicted MICU length of stay that was 86.39 hours more than those were not mechanically ventilated, compared to a difference of only 33.69 hours in the During period, and 47.02 hours in the Post period. In other words, the QI-initiative decreased the average MICU length of stay by at least 48 hours for those who were mechanically ventilated!</p>
<p>Across the board, patients who were mechanically ventilated had a longer average MICU length of stay than those were not, regardless of QI-initiative time period.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|echo: false</span></span>
<span id="cb386-2"><a href="#cb386-2" aria-hidden="true" tabindex="-1"></a><span class="co">#|warning: false</span></span>
<span id="cb386-3"><a href="#cb386-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb386-4"><a href="#cb386-4" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_MICU)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: initiative is not a high-order term in the model</code></pre>
</div>
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb388-2"><a href="#cb388-2" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb388-3"><a href="#cb388-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb388-4"><a href="#cb388-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb388-5"><a href="#cb388-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb388-6"><a href="#cb388-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb388-7"><a href="#cb388-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb388-8"><a href="#cb388-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb388-9"><a href="#cb388-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb388-10"><a href="#cb388-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted MICU Length of Stay by QI-Initiative Time Period"</span>,</span>
<span id="cb388-11"><a href="#cb388-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative"</span>,</span>
<span id="cb388-12"><a href="#cb388-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Average MICU Length of Stay (Hours)"</span></span>
<span id="cb388-13"><a href="#cb388-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb388-14"><a href="#cb388-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-161-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-162-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/clipboard-4233876876.png" class="img-fluid"></p>
</section>
<section id="mechanical-ventilation-time-1" class="level4">
<h4 class="anchored" data-anchor-id="mechanical-ventilation-time-1">Mechanical Ventilation Time</h4>
<p>The QI-initiative greatly reduced total mechanical ventilation time, while controlling for age, seasonality, number of physical therapy visits, average therapy length, and reception of physical therapy.</p>
<p>Compared to patients in the Pre time period, patients in the During time period had a mean mechanical ventilation time that was 0.66 that of those in the Pre period (p &lt; 0.0001), and patients in the Post time period had a mean mechanical ventilation time that was 0.78 that of those in the pre period (p &lt; 0.0001). Additionally, there was a slight decrease in the impact of the the QI-initiative. Compared to patients in the During time period, those in the Post time period had a mean mechanical ventilation time that was 1.18 that of those in the During period (p &lt; 0.0001).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-163-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="non-icu-length-of-stay-1" class="level4">
<h4 class="anchored" data-anchor-id="non-icu-length-of-stay-1"><img src="images/clipboard-2071991749.png" class="img-fluid">Non-ICU Length of Stay</h4>
<p>The QI-initiative was NOT successful at reducing the non-ICU length of stay, when controlling for age, seasonality, number of physical therapy visits, and reception of physical therapy (p’s &gt; 0.05).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-164-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/clipboard-669661323.png" class="img-fluid"></p>
</section>
<section id="total-hospital-length-of-stay" class="level4">
<h4 class="anchored" data-anchor-id="total-hospital-length-of-stay">Total Hospital Length of Stay</h4>
<p>The QI-initiative was successful at reducing the total hospital length of stay, while controlling for age, admission month, mechanical ventilation, total physical therapy visits, and average therapy length.</p>
<p>Compared to those in the Pre period, patients in the During period had a mean total hospital length of stay that was 0.83 times that of patients in the pre period (p &lt; 0.0001), and patients in the Period had a mean total hospital length of stay that was 0.86 times that of patients in the Pre period(p &lt; 0.0001). Those who were admitted in the During period did not have a significantly different total hospital length of stay compared to those enrolled in the Post period (z = 0.92, 95% CI: [0.96, 1.10], p = 0.36).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb389"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="co">#|echo: false</span></span>
<span id="cb389-2"><a href="#cb389-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract the effect for initiative</span></span>
<span id="cb389-3"><a href="#cb389-3" aria-hidden="true" tabindex="-1"></a>effect_plot <span class="ot">&lt;-</span> <span class="fu">effect</span>(<span class="st">"initiative"</span>, model_tot)</span>
<span id="cb389-4"><a href="#cb389-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb389-5"><a href="#cb389-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the effect object to a data frame for ggplot</span></span>
<span id="cb389-6"><a href="#cb389-6" aria-hidden="true" tabindex="-1"></a>effect_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(effect_plot)</span>
<span id="cb389-7"><a href="#cb389-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb389-8"><a href="#cb389-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb389-9"><a href="#cb389-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(effect_data, <span class="fu">aes</span>(<span class="at">x =</span> initiative, <span class="at">y =</span> fit, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb389-10"><a href="#cb389-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"aquamarine"</span>) <span class="sc">+</span></span>
<span id="cb389-11"><a href="#cb389-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb389-12"><a href="#cb389-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower, <span class="at">ymax =</span> upper), <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb389-13"><a href="#cb389-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb389-14"><a href="#cb389-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Predicted Total Hospital Length of Stay by QI-Initiative Time Period"</span>,</span>
<span id="cb389-15"><a href="#cb389-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"QI-Initiative"</span>,</span>
<span id="cb389-16"><a href="#cb389-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Total Hospital Length of Stay"</span></span>
<span id="cb389-17"><a href="#cb389-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb389-18"><a href="#cb389-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Megan_Watson_Project_files/figure-html/unnamed-chunk-165-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><img src="images/clipboard-936608385.png" class="img-fluid"></p>
</section>
</section>
<section id="discussion" class="level1">
<h1>Discussion</h1>
<p>In this study we conducted a series of negative binomial regressions to assess the impact of the physical therapy based quality improvement initiative on patient outcomes, controlling for age, seasonality, reception of physical therapy and mechanical ventilation, and the number and average duration of physical therapy visits.</p>
<section id="main-project-goals" class="level4">
<h4 class="anchored" data-anchor-id="main-project-goals">Main Project Goals</h4>
<p>The QI-initiative aimed to enhance the delivery and efficacy of physical therapy (PT). Our analysis showed notable success across all three metrics. Overall, the MICU’s QI-initiative led to substantial improvements, with faster initiation of therapy and greater frequency of visits, particularly benefiting older patients and sustained improvements even after the initiative period, albeit with slight reductions from peak performance during the QI-initiative. These findings underscore the initiative’s success and provide a strong basis for continuing and expanding similar strategies to enhance patient care in intensive care settings.</p>
</section>
<section id="primary-outcomes" class="level4">
<h4 class="anchored" data-anchor-id="primary-outcomes">Primary Outcomes</h4>
<p>The main outcomes of interest were also significantly impacted. The QI-initiative reduced MICU length of stay by more than two days, and was particularly impactful for patients that were mechanically ventilated. The QI-initiative also decreased mechanical ventilation time by 34% in the During period, and 22% in the Post period.</p>
<section id="secondary-outcomes" class="level5">
<h5 class="anchored" data-anchor-id="secondary-outcomes">Secondary Outcomes</h5>
<p>The QI-initiative had no impact on non-ICU length of stay. This is not surprising, as the physical therapy interventions would be more beneficial for patients in the MICU. However, the QI-initiative did successfully decrease the total hospital length of stay by 17% in the During period, and 14% in the Post period; a direct result of lowering MICU length of stay.</p>
</section>
<section id="diminished-effects-during-vs.-post-initiative" class="level5">
<h5 class="anchored" data-anchor-id="diminished-effects-during-vs.-post-initiative">Diminished Effects: During vs.&nbsp;Post-Initiative</h5>
<p>The data indicates a slight reduction in all measured outcomes between the During and Post periods. This trend aligns with the transition of the QI-initiative from an active, conscious effort to a more ingrained, subconscious cultural work practice over time.</p>
<p>Despite this observed decrease, it is not recommended that researchers intensify the QI-initiative efforts immediately. Instead, periodic reevaluation of this analysis is suggested, particularly after a few years, to determine if there is a need to enhance physical therapy initiatives further.</p>
</section>
</section>
<section id="limitations" class="level4">
<h4 class="anchored" data-anchor-id="limitations">Limitations</h4>
<p>One limitation of this study is that we did not control for deaths experienced during hospital stays. Preliminary investigations showed that model outcomes did not change greatly when patient expiration was included as a covariate, but more extensive analyses should be conducted. Additionally, this data set as presented did not allow for us to account for repeat admissions to the ICU, and thus independence may have been violated.</p>
</section>
<section id="conclusion" class="level4">
<h4 class="anchored" data-anchor-id="conclusion">Conclusion</h4>
<p>The current physical therapy improvement strategies employed by the investigators have demonstrated great success in improving patient outcomes, as evidenced by decreases in MICU length of stay, mechanical ventilation time, and total hospital stay.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>